
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic Scripts &#8212; DFHack 0.47.05-r1 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/dfhack.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/dfhack-icon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Development Scripts" href="devel.html" />
    <link rel="prev" title="DFHack Scripts" href="../Scripts.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/dfhack-logo.png" alt="Logo"/>
    <h3 class="logo logo-name">Home</h3>
  </a>
</p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../Scripts.html">DFHack Scripts</a><ul>
      <li>Previous: <a href="../Scripts.html" title="previous chapter">DFHack Scripts</a></li>
      <li>Next: <a href="devel.html" title="next chapter">Development Scripts</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic Scripts</a><ul>
<li><a class="reference internal" href="#adaptation">adaptation</a></li>
<li><a class="reference internal" href="#add-recipe">add-recipe</a></li>
<li><a class="reference internal" href="#add-thought">add-thought</a></li>
<li><a class="reference internal" href="#adv-fix-sleepers">adv-fix-sleepers</a></li>
<li><a class="reference internal" href="#adv-max-skills">adv-max-skills</a></li>
<li><a class="reference internal" href="#adv-rumors">adv-rumors</a></li>
<li><a class="reference internal" href="#animal-control">animal-control</a></li>
<li><a class="reference internal" href="#armoks-blessing">armoks-blessing</a></li>
<li><a class="reference internal" href="#assign-attributes">assign-attributes</a></li>
<li><a class="reference internal" href="#assign-beliefs">assign-beliefs</a></li>
<li><a class="reference internal" href="#assign-facets">assign-facets</a></li>
<li><a class="reference internal" href="#assign-goals">assign-goals</a></li>
<li><a class="reference internal" href="#assign-preferences">assign-preferences</a></li>
<li><a class="reference internal" href="#assign-profile">assign-profile</a></li>
<li><a class="reference internal" href="#assign-skills">assign-skills</a></li>
<li><a class="reference internal" href="#autolabor-artisans">autolabor-artisans</a></li>
<li><a class="reference internal" href="#autounsuspend">autounsuspend</a></li>
<li><a class="reference internal" href="#ban-cooking">ban-cooking</a></li>
<li><a class="reference internal" href="#binpatch">binpatch</a></li>
<li><a class="reference internal" href="#bodyswap">bodyswap</a></li>
<li><a class="reference internal" href="#brainwash">brainwash</a></li>
<li><a class="reference internal" href="#break-dance">break-dance</a></li>
<li><a class="reference internal" href="#burial">burial</a></li>
<li><a class="reference internal" href="#cannibalism">cannibalism</a></li>
<li><a class="reference internal" href="#caravan">caravan</a></li>
<li><a class="reference internal" href="#catsplosion">catsplosion</a></li>
<li><a class="reference internal" href="#clear-smoke">clear-smoke</a></li>
<li><a class="reference internal" href="#colonies">colonies</a></li>
<li><a class="reference internal" href="#color-schemes">color-schemes</a></li>
<li><a class="reference internal" href="#combat-harden">combat-harden</a></li>
<li><a class="reference internal" href="#combine-drinks">combine-drinks</a></li>
<li><a class="reference internal" href="#combine-plants">combine-plants</a></li>
<li><a class="reference internal" href="#create-items">create-items</a></li>
<li><a class="reference internal" href="#deathcause">deathcause</a></li>
<li><a class="reference internal" href="#deep-embark">deep-embark</a></li>
<li><a class="reference internal" href="#deteriorateclothes">deteriorateclothes</a></li>
<li><a class="reference internal" href="#deterioratecorpses">deterioratecorpses</a></li>
<li><a class="reference internal" href="#deterioratefood">deterioratefood</a></li>
<li><a class="reference internal" href="#digfort">digfort</a></li>
<li><a class="reference internal" href="#dorf-tables">dorf_tables</a></li>
<li><a class="reference internal" href="#drain-aquifer">drain-aquifer</a></li>
<li><a class="reference internal" href="#dwarf-op">dwarf-op</a></li>
<li><a class="reference internal" href="#elevate-mental">elevate-mental</a></li>
<li><a class="reference internal" href="#elevate-physical">elevate-physical</a></li>
<li><a class="reference internal" href="#embark-skills">embark-skills</a></li>
<li><a class="reference internal" href="#emigration">emigration</a></li>
<li><a class="reference internal" href="#empty-bin">empty-bin</a></li>
<li><a class="reference internal" href="#exportlegends">exportlegends</a></li>
<li><a class="reference internal" href="#exterminate">exterminate</a></li>
<li><a class="reference internal" href="#extinguish">extinguish</a></li>
<li><a class="reference internal" href="#feature">feature</a></li>
<li><a class="reference internal" href="#fillneeds">fillneeds</a></li>
<li><a class="reference internal" href="#firestarter">firestarter</a></li>
<li><a class="reference internal" href="#fix-ster">fix-ster</a></li>
<li><a class="reference internal" href="#fixnaked">fixnaked</a></li>
<li><a class="reference internal" href="#flashstep">flashstep</a></li>
<li><a class="reference internal" href="#force">force</a></li>
<li><a class="reference internal" href="#forget-dead-body">forget-dead-body</a></li>
<li><a class="reference internal" href="#forum-dwarves">forum-dwarves</a></li>
<li><a class="reference internal" href="#full-heal">full-heal</a></li>
<li><a class="reference internal" href="#gaydar">gaydar</a></li>
<li><a class="reference internal" href="#geld">geld</a></li>
<li><a class="reference internal" href="#ghostly">ghostly</a></li>
<li><a class="reference internal" href="#growcrops">growcrops</a></li>
<li><a class="reference internal" href="#hermit">hermit</a></li>
<li><a class="reference internal" href="#hfs-pit">hfs-pit</a></li>
<li><a class="reference internal" href="#hotkey-notes">hotkey-notes</a></li>
<li><a class="reference internal" href="#install-info">install-info</a></li>
<li><a class="reference internal" href="#item-descriptions">item-descriptions</a></li>
<li><a class="reference internal" href="#launch">launch</a></li>
<li><a class="reference internal" href="#lever">lever</a></li>
<li><a class="reference internal" href="#light-aquifers-only">light-aquifers-only</a></li>
<li><a class="reference internal" href="#linger">linger</a></li>
<li><a class="reference internal" href="#list-agreements">list-agreements</a></li>
<li><a class="reference internal" href="#list-waves">list-waves</a></li>
<li><a class="reference internal" href="#load-save">load-save</a></li>
<li><a class="reference internal" href="#locate-ore">locate-ore</a></li>
<li><a class="reference internal" href="#lua">lua</a></li>
<li><a class="reference internal" href="#make-legendary">make-legendary</a></li>
<li><a class="reference internal" href="#make-monarch">make-monarch</a></li>
<li><a class="reference internal" href="#markdown">markdown</a></li>
<li><a class="reference internal" href="#masspit">masspit</a></li>
<li><a class="reference internal" href="#migrants-now">migrants-now</a></li>
<li><a class="reference internal" href="#multicmd">multicmd</a></li>
<li><a class="reference internal" href="#names">names</a></li>
<li><a class="reference internal" href="#on-new-fortress">on-new-fortress</a></li>
<li><a class="reference internal" href="#once-per-save">once-per-save</a></li>
<li><a class="reference internal" href="#open-legends">open-legends</a></li>
<li><a class="reference internal" href="#points">points</a></li>
<li><a class="reference internal" href="#position">position</a></li>
<li><a class="reference internal" href="#pref-adjust">pref-adjust</a></li>
<li><a class="reference internal" href="#prefchange">prefchange</a></li>
<li><a class="reference internal" href="#putontable">putontable</a></li>
<li><a class="reference internal" href="#questport">questport</a></li>
<li><a class="reference internal" href="#quickfort">quickfort</a></li>
<li><a class="reference internal" href="#quicksave">quicksave</a></li>
<li><a class="reference internal" href="#region-pops">region-pops</a></li>
<li><a class="reference internal" href="#rejuvenate">rejuvenate</a></li>
<li><a class="reference internal" href="#remove-stress">remove-stress</a></li>
<li><a class="reference internal" href="#remove-wear">remove-wear</a></li>
<li><a class="reference internal" href="#repeat">repeat</a></li>
<li><a class="reference internal" href="#resurrect-adv">resurrect-adv</a></li>
<li><a class="reference internal" href="#reveal-hidden-units">reveal-hidden-units</a></li>
<li><a class="reference internal" href="#season-palette">season-palette</a></li>
<li><a class="reference internal" href="#set-orientation">set-orientation</a></li>
<li><a class="reference internal" href="#setfps">setfps</a></li>
<li><a class="reference internal" href="#show-unit-syndromes">show-unit-syndromes</a></li>
<li><a class="reference internal" href="#siren">siren</a></li>
<li><a class="reference internal" href="#source">source</a></li>
<li><a class="reference internal" href="#spawnunit">spawnunit</a></li>
<li><a class="reference internal" href="#startdwarf">startdwarf</a></li>
<li><a class="reference internal" href="#starvingdead">starvingdead</a></li>
<li><a class="reference internal" href="#stripcaged">stripcaged</a></li>
<li><a class="reference internal" href="#superdwarf">superdwarf</a></li>
<li><a class="reference internal" href="#tame">tame</a></li>
<li><a class="reference internal" href="#teleport">teleport</a></li>
<li><a class="reference internal" href="#tidlers">tidlers</a></li>
<li><a class="reference internal" href="#timestream">timestream</a></li>
<li><a class="reference internal" href="#troubleshoot-item">troubleshoot-item</a></li>
<li><a class="reference internal" href="#twaterlvl">twaterlvl</a></li>
<li><a class="reference internal" href="#undump-buildings">undump-buildings</a></li>
<li><a class="reference internal" href="#unforbid">unforbid</a></li>
<li><a class="reference internal" href="#ungeld">ungeld</a></li>
<li><a class="reference internal" href="#uniform-unstick">uniform-unstick</a></li>
<li><a class="reference internal" href="#unretire-anyone">unretire-anyone</a></li>
<li><a class="reference internal" href="#unsuspend">unsuspend</a></li>
<li><a class="reference internal" href="#view-item-info">view-item-info</a></li>
<li><a class="reference internal" href="#view-unit-reports">view-unit-reports</a></li>
<li><a class="reference internal" href="#warn-starving">warn-starving</a></li>
<li><a class="reference internal" href="#weather">weather</a></li>
<li><a class="reference internal" href="#workorder">workorder</a></li>
<li><a class="reference internal" href="#workorder-recheck">workorder-recheck</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="basic-scripts">
<span id="scripts-base"></span><h1>Basic Scripts<a class="headerlink" href="#basic-scripts" title="Permalink to this headline">¶</a></h1>
<p>Basic scripts are not stored in any subdirectory, and can be invoked directly.
They are generally useful tools for any player.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adaptation" id="id133">adaptation</a></p></li>
<li><p><a class="reference internal" href="#add-recipe" id="id134">add-recipe</a></p></li>
<li><p><a class="reference internal" href="#add-thought" id="id135">add-thought</a></p></li>
<li><p><a class="reference internal" href="#adv-fix-sleepers" id="id136">adv-fix-sleepers</a></p></li>
<li><p><a class="reference internal" href="#adv-max-skills" id="id137">adv-max-skills</a></p></li>
<li><p><a class="reference internal" href="#adv-rumors" id="id138">adv-rumors</a></p></li>
<li><p><a class="reference internal" href="#animal-control" id="id139">animal-control</a></p></li>
<li><p><a class="reference internal" href="#armoks-blessing" id="id140">armoks-blessing</a></p></li>
<li><p><a class="reference internal" href="#assign-attributes" id="id141">assign-attributes</a></p></li>
<li><p><a class="reference internal" href="#assign-beliefs" id="id142">assign-beliefs</a></p></li>
<li><p><a class="reference internal" href="#assign-facets" id="id143">assign-facets</a></p></li>
<li><p><a class="reference internal" href="#assign-goals" id="id144">assign-goals</a></p></li>
<li><p><a class="reference internal" href="#assign-preferences" id="id145">assign-preferences</a></p></li>
<li><p><a class="reference internal" href="#assign-profile" id="id146">assign-profile</a></p></li>
<li><p><a class="reference internal" href="#assign-skills" id="id147">assign-skills</a></p></li>
<li><p><a class="reference internal" href="#autolabor-artisans" id="id148">autolabor-artisans</a></p></li>
<li><p><a class="reference internal" href="#autounsuspend" id="id149">autounsuspend</a></p></li>
<li><p><a class="reference internal" href="#ban-cooking" id="id150">ban-cooking</a></p></li>
<li><p><a class="reference internal" href="#binpatch" id="id151">binpatch</a></p></li>
<li><p><a class="reference internal" href="#bodyswap" id="id152">bodyswap</a></p></li>
<li><p><a class="reference internal" href="#brainwash" id="id153">brainwash</a></p></li>
<li><p><a class="reference internal" href="#break-dance" id="id154">break-dance</a></p></li>
<li><p><a class="reference internal" href="#burial" id="id155">burial</a></p></li>
<li><p><a class="reference internal" href="#cannibalism" id="id156">cannibalism</a></p></li>
<li><p><a class="reference internal" href="#caravan" id="id157">caravan</a></p></li>
<li><p><a class="reference internal" href="#catsplosion" id="id158">catsplosion</a></p></li>
<li><p><a class="reference internal" href="#clear-smoke" id="id159">clear-smoke</a></p></li>
<li><p><a class="reference internal" href="#colonies" id="id160">colonies</a></p></li>
<li><p><a class="reference internal" href="#color-schemes" id="id161">color-schemes</a></p></li>
<li><p><a class="reference internal" href="#combat-harden" id="id162">combat-harden</a></p></li>
<li><p><a class="reference internal" href="#combine-drinks" id="id163">combine-drinks</a></p></li>
<li><p><a class="reference internal" href="#combine-plants" id="id164">combine-plants</a></p></li>
<li><p><a class="reference internal" href="#create-items" id="id165">create-items</a></p></li>
<li><p><a class="reference internal" href="#deathcause" id="id166">deathcause</a></p></li>
<li><p><a class="reference internal" href="#deep-embark" id="id167">deep-embark</a></p></li>
<li><p><a class="reference internal" href="#deteriorateclothes" id="id168">deteriorateclothes</a></p></li>
<li><p><a class="reference internal" href="#deterioratecorpses" id="id169">deterioratecorpses</a></p></li>
<li><p><a class="reference internal" href="#deterioratefood" id="id170">deterioratefood</a></p></li>
<li><p><a class="reference internal" href="#digfort" id="id171">digfort</a></p></li>
<li><p><a class="reference internal" href="#dorf-tables" id="id172">dorf_tables</a></p></li>
<li><p><a class="reference internal" href="#drain-aquifer" id="id173">drain-aquifer</a></p></li>
<li><p><a class="reference internal" href="#dwarf-op" id="id174">dwarf-op</a></p></li>
<li><p><a class="reference internal" href="#elevate-mental" id="id175">elevate-mental</a></p></li>
<li><p><a class="reference internal" href="#elevate-physical" id="id176">elevate-physical</a></p></li>
<li><p><a class="reference internal" href="#embark-skills" id="id177">embark-skills</a></p></li>
<li><p><a class="reference internal" href="#emigration" id="id178">emigration</a></p></li>
<li><p><a class="reference internal" href="#empty-bin" id="id179">empty-bin</a></p></li>
<li><p><a class="reference internal" href="#exportlegends" id="id180">exportlegends</a></p></li>
<li><p><a class="reference internal" href="#exterminate" id="id181">exterminate</a></p></li>
<li><p><a class="reference internal" href="#extinguish" id="id182">extinguish</a></p></li>
<li><p><a class="reference internal" href="#feature" id="id183">feature</a></p></li>
<li><p><a class="reference internal" href="#fillneeds" id="id184">fillneeds</a></p></li>
<li><p><a class="reference internal" href="#firestarter" id="id185">firestarter</a></p></li>
<li><p><a class="reference internal" href="#fix-ster" id="id186">fix-ster</a></p></li>
<li><p><a class="reference internal" href="#fixnaked" id="id187">fixnaked</a></p></li>
<li><p><a class="reference internal" href="#flashstep" id="id188">flashstep</a></p></li>
<li><p><a class="reference internal" href="#force" id="id189">force</a></p></li>
<li><p><a class="reference internal" href="#forget-dead-body" id="id190">forget-dead-body</a></p></li>
<li><p><a class="reference internal" href="#forum-dwarves" id="id191">forum-dwarves</a></p></li>
<li><p><a class="reference internal" href="#full-heal" id="id192">full-heal</a></p></li>
<li><p><a class="reference internal" href="#gaydar" id="id193">gaydar</a></p></li>
<li><p><a class="reference internal" href="#geld" id="id194">geld</a></p></li>
<li><p><a class="reference internal" href="#ghostly" id="id195">ghostly</a></p></li>
<li><p><a class="reference internal" href="#growcrops" id="id196">growcrops</a></p></li>
<li><p><a class="reference internal" href="#hermit" id="id197">hermit</a></p></li>
<li><p><a class="reference internal" href="#hfs-pit" id="id198">hfs-pit</a></p></li>
<li><p><a class="reference internal" href="#hotkey-notes" id="id199">hotkey-notes</a></p></li>
<li><p><a class="reference internal" href="#install-info" id="id200">install-info</a></p></li>
<li><p><a class="reference internal" href="#item-descriptions" id="id201">item-descriptions</a></p></li>
<li><p><a class="reference internal" href="#launch" id="id202">launch</a></p></li>
<li><p><a class="reference internal" href="#lever" id="id203">lever</a></p></li>
<li><p><a class="reference internal" href="#light-aquifers-only" id="id204">light-aquifers-only</a></p></li>
<li><p><a class="reference internal" href="#linger" id="id205">linger</a></p></li>
<li><p><a class="reference internal" href="#list-agreements" id="id206">list-agreements</a></p></li>
<li><p><a class="reference internal" href="#list-waves" id="id207">list-waves</a></p></li>
<li><p><a class="reference internal" href="#load-save" id="id208">load-save</a></p></li>
<li><p><a class="reference internal" href="#locate-ore" id="id209">locate-ore</a></p></li>
<li><p><a class="reference internal" href="#lua" id="id210">lua</a></p></li>
<li><p><a class="reference internal" href="#make-legendary" id="id211">make-legendary</a></p></li>
<li><p><a class="reference internal" href="#make-monarch" id="id212">make-monarch</a></p></li>
<li><p><a class="reference internal" href="#markdown" id="id213">markdown</a></p></li>
<li><p><a class="reference internal" href="#masspit" id="id214">masspit</a></p></li>
<li><p><a class="reference internal" href="#migrants-now" id="id215">migrants-now</a></p></li>
<li><p><a class="reference internal" href="#multicmd" id="id216">multicmd</a></p></li>
<li><p><a class="reference internal" href="#names" id="id217">names</a></p></li>
<li><p><a class="reference internal" href="#on-new-fortress" id="id218">on-new-fortress</a></p></li>
<li><p><a class="reference internal" href="#once-per-save" id="id219">once-per-save</a></p></li>
<li><p><a class="reference internal" href="#open-legends" id="id220">open-legends</a></p></li>
<li><p><a class="reference internal" href="#points" id="id221">points</a></p></li>
<li><p><a class="reference internal" href="#position" id="id222">position</a></p></li>
<li><p><a class="reference internal" href="#pref-adjust" id="id223">pref-adjust</a></p></li>
<li><p><a class="reference internal" href="#prefchange" id="id224">prefchange</a></p></li>
<li><p><a class="reference internal" href="#putontable" id="id225">putontable</a></p></li>
<li><p><a class="reference internal" href="#questport" id="id226">questport</a></p></li>
<li><p><a class="reference internal" href="#quickfort" id="id227">quickfort</a></p></li>
<li><p><a class="reference internal" href="#quicksave" id="id228">quicksave</a></p></li>
<li><p><a class="reference internal" href="#region-pops" id="id229">region-pops</a></p></li>
<li><p><a class="reference internal" href="#rejuvenate" id="id230">rejuvenate</a></p></li>
<li><p><a class="reference internal" href="#remove-stress" id="id231">remove-stress</a></p></li>
<li><p><a class="reference internal" href="#remove-wear" id="id232">remove-wear</a></p></li>
<li><p><a class="reference internal" href="#repeat" id="id233">repeat</a></p></li>
<li><p><a class="reference internal" href="#resurrect-adv" id="id234">resurrect-adv</a></p></li>
<li><p><a class="reference internal" href="#reveal-hidden-units" id="id235">reveal-hidden-units</a></p></li>
<li><p><a class="reference internal" href="#season-palette" id="id236">season-palette</a></p></li>
<li><p><a class="reference internal" href="#set-orientation" id="id237">set-orientation</a></p></li>
<li><p><a class="reference internal" href="#setfps" id="id238">setfps</a></p></li>
<li><p><a class="reference internal" href="#show-unit-syndromes" id="id239">show-unit-syndromes</a></p></li>
<li><p><a class="reference internal" href="#siren" id="id240">siren</a></p></li>
<li><p><a class="reference internal" href="#source" id="id241">source</a></p></li>
<li><p><a class="reference internal" href="#spawnunit" id="id242">spawnunit</a></p></li>
<li><p><a class="reference internal" href="#startdwarf" id="id243">startdwarf</a></p></li>
<li><p><a class="reference internal" href="#starvingdead" id="id244">starvingdead</a></p></li>
<li><p><a class="reference internal" href="#stripcaged" id="id245">stripcaged</a></p></li>
<li><p><a class="reference internal" href="#superdwarf" id="id246">superdwarf</a></p></li>
<li><p><a class="reference internal" href="#tame" id="id247">tame</a></p></li>
<li><p><a class="reference internal" href="#teleport" id="id248">teleport</a></p></li>
<li><p><a class="reference internal" href="#tidlers" id="id249">tidlers</a></p></li>
<li><p><a class="reference internal" href="#timestream" id="id250">timestream</a></p></li>
<li><p><a class="reference internal" href="#troubleshoot-item" id="id251">troubleshoot-item</a></p></li>
<li><p><a class="reference internal" href="#twaterlvl" id="id252">twaterlvl</a></p></li>
<li><p><a class="reference internal" href="#undump-buildings" id="id253">undump-buildings</a></p></li>
<li><p><a class="reference internal" href="#unforbid" id="id254">unforbid</a></p></li>
<li><p><a class="reference internal" href="#ungeld" id="id255">ungeld</a></p></li>
<li><p><a class="reference internal" href="#uniform-unstick" id="id256">uniform-unstick</a></p></li>
<li><p><a class="reference internal" href="#unretire-anyone" id="id257">unretire-anyone</a></p></li>
<li><p><a class="reference internal" href="#unsuspend" id="id258">unsuspend</a></p></li>
<li><p><a class="reference internal" href="#view-item-info" id="id259">view-item-info</a></p></li>
<li><p><a class="reference internal" href="#view-unit-reports" id="id260">view-unit-reports</a></p></li>
<li><p><a class="reference internal" href="#warn-starving" id="id261">warn-starving</a></p></li>
<li><p><a class="reference internal" href="#weather" id="id262">weather</a></p></li>
<li><p><a class="reference internal" href="#workorder" id="id263">workorder</a></p></li>
<li><p><a class="reference internal" href="#workorder-recheck" id="id264">workorder-recheck</a></p></li>
</ul>
</div>
<div class="section" id="adaptation">
<span id="id1"></span><h2><a class="toc-backref" href="#id133">adaptation</a><a class="headerlink" href="#adaptation" title="Permalink to this headline">¶</a></h2>
<p>View or set level of cavern adaptation for the selected unit or the whole fort.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>adaptation &lt;show|set&gt; &lt;him|all&gt; [value]
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">value</span></code> must be between 0 and 800,000 (inclusive).</p>
</div>
<div class="section" id="add-recipe">
<span id="id2"></span><h2><a class="toc-backref" href="#id134">add-recipe</a><a class="headerlink" href="#add-recipe" title="Permalink to this headline">¶</a></h2>
<p>Adds unknown weapon and armor crafting recipes to your civ.
E.g. some civilizations never learn to craft high boots. This script can
help with that, and more. Only weapons, armor, and tools are currently supported;
things such as instruments are not. Available options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">add-recipe</span> <span class="pre">all</span></code> adds <em>all</em> available weapons and armor, including exotic items
like blowguns, two-handed swords, and capes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add-recipe</span> <span class="pre">native</span></code> adds only native (but unknown) crafting recipes. Civilizations
pick randomly from a pool of possible recipes, which means not all civs get
high boots, for instance. This command gives you all the recipes your
civilisation could have gotten.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add-recipe</span> <span class="pre">single</span> <span class="pre">&lt;item</span> <span class="pre">token&gt;</span></code> adds a single item by the given
item token. For example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>add-recipe single SHOES:ITEM_SHOES_BOOTS
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="add-thought">
<span id="id3"></span><h2><a class="toc-backref" href="#id135">add-thought</a><a class="headerlink" href="#add-thought" title="Permalink to this headline">¶</a></h2>
<p>Adds a thought or emotion to the selected unit.  Can be used by other scripts,
or the gui invoked by running <code class="docutils literal notranslate"><span class="pre">add-thought</span> <span class="pre">-gui</span></code> with a unit selected.</p>
</div>
<div class="section" id="adv-fix-sleepers">
<span id="id4"></span><h2><a class="toc-backref" href="#id136">adv-fix-sleepers</a><a class="headerlink" href="#adv-fix-sleepers" title="Permalink to this headline">¶</a></h2>
<p>Fixes <a class="reference external" href="https://www.bay12games.com/dwarves/mantisbt/view.php?id=6798">Bug 6798</a>. This bug is characterized by sleeping units who refuse to
awaken in adventure mode regardless of talking to them, hitting them, or waiting
so long you die of thirst. If you come accross one or more bugged sleepers in
adventure mode, simply run the script and all nearby sleepers will be cured.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>adv-fix-sleepers
</pre></div>
</div>
</div>
<div class="section" id="adv-max-skills">
<span id="id5"></span><h2><a class="toc-backref" href="#id137">adv-max-skills</a><a class="headerlink" href="#adv-max-skills" title="Permalink to this headline">¶</a></h2>
<p>When creating an adventurer, raises all changeable skills and
attributes to their maximum level.</p>
</div>
<div class="section" id="adv-rumors">
<span id="id6"></span><h2><a class="toc-backref" href="#id138">adv-rumors</a><a class="headerlink" href="#adv-rumors" title="Permalink to this headline">¶</a></h2>
<p>Improves the “Bring up specific incident or rumor” menu in Adventure mode.</p>
<ul class="simple">
<li><p>Moves entries into one line</p></li>
<li><p>Adds a “slew” keyword for filtering, making it easy to find your kills and not your companions’</p></li>
<li><p>Trims repetitive words</p></li>
</ul>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">A</span><span> in </span><code class="docutils literal notranslate"><span class="pre">dungeonmode/ConversationSpeak</span></code></p>
</p>
</p>
</div>
<div class="section" id="animal-control">
<span id="id7"></span><h2><a class="toc-backref" href="#id139">animal-control</a><a class="headerlink" href="#animal-control" title="Permalink to this headline">¶</a></h2>
<p>Animal control is a script useful for deciding what animals to butcher and geld.</p>
<p>While not as powerful as Dwarf Therapist in managing animals - in so far as
DT allows you to sort by various stats and flags - this script does provide
many options for filtering animals. Additionally you can mark animals for
slaughter or gelding, you can even do so enmasse if you so choose.</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>animal-control -race DOG
animal-control -race DOG -male -notgelded -showstats
animal-control -markfor gelding -id 1988
animal-control -markfor slaughter -id 1988
animal-control -gelded -markedfor slaughter -unmarkfor slaughter
</pre></div>
</div>
<p><strong>Selection options:</strong></p>
<p>These options are used to specify what animals you want or do not want to select.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-all</span></code>:                   Selects all units.</dt><dd><p>Note: cannot be used in conjunction with other
selection options.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">-id</span> <span class="pre">&lt;value&gt;</span></code>:            Selects the unit with the specified id value provided.</p>
<p><code class="docutils literal notranslate"><span class="pre">-race</span> <span class="pre">&lt;value&gt;</span></code>:          Selects units which match the race value provided.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-markedfor</span> <span class="pre">&lt;action&gt;</span></code>:    Selects units which have been marked for the action provided.</dt><dd><p>Valid actions: <code class="docutils literal notranslate"><span class="pre">slaughter</span></code>, <code class="docutils literal notranslate"><span class="pre">gelding</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-notmarkedfor</span> <span class="pre">&lt;action&gt;</span></code>: Selects units which have not been marked for the action provided.</dt><dd><p>Valid actions: <code class="docutils literal notranslate"><span class="pre">slaughter</span></code>, <code class="docutils literal notranslate"><span class="pre">gelding</span></code></p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">-gelded</span></code>:                Selects units which have already been gelded.</p>
<p><code class="docutils literal notranslate"><span class="pre">-notgelded</span></code>:             Selects units which have not been gelded.</p>
<p><code class="docutils literal notranslate"><span class="pre">-male</span></code>:                  Selects units which are male.</p>
<p><code class="docutils literal notranslate"><span class="pre">-female</span></code>:                Selects units which are female.</p>
<p><strong>Command options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-showstats</span></code>:           Displays physical attributes of the selected animals.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-markfor</span> <span class="pre">&lt;action&gt;</span></code>:    Marks selected animals for the action provided.</dt><dd><p>Valid actions: <code class="docutils literal notranslate"><span class="pre">slaughter</span></code>, <code class="docutils literal notranslate"><span class="pre">gelding</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-unmarkfor</span> <span class="pre">&lt;action&gt;</span></code>:  Unmarks selected animals for the action provided.</dt><dd><p>Valid actions: <code class="docutils literal notranslate"><span class="pre">slaughter</span></code>, <code class="docutils literal notranslate"><span class="pre">gelding</span></code></p>
</dd>
</dl>
</li>
</ul>
<p><strong>Other options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-help</span></code>: Displays this information</p></li>
</ul>
<p><strong>Column abbreviations</strong></p>
<p>Due to space constraints, the names of some output columns are abbreviated
as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">str</span></code>: strength</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agi</span></code>: agility</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tgh</span></code>: toughness</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endur</span></code>: endurance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recup</span></code>: recuperation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">disres</span></code>: disease resistance</p></li>
</ul>
</div>
<div class="section" id="armoks-blessing">
<span id="id8"></span><h2><a class="toc-backref" href="#id140">armoks-blessing</a><a class="headerlink" href="#armoks-blessing" title="Permalink to this headline">¶</a></h2>
<p>Runs the equivalent of <a class="reference internal" href="#rejuvenate"><span class="std std-ref">rejuvenate</span></a>, <a class="reference internal" href="#elevate-physical"><span class="std std-ref">elevate-physical</span></a>, <a class="reference internal" href="#elevate-mental"><span class="std std-ref">elevate-mental</span></a>, and
<a class="reference internal" href="#brainwash"><span class="std std-ref">brainwash</span></a> on all dwarves currently on the map.  This is an extreme change,
which sets every stat and trait to an ideal easy-to-satisfy preference.</p>
<p>Without providing arguments, only attributes, age, and personalities will be adjusted.
Adding arguments allows for skills or classes to be adjusted to legendary (maximum).</p>
<p>Arguments:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt><dd><p>Prints list of all skills</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>Prints list of all classes</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt><dd><p>Set all skills, for all Dwarves, to legendary</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;skill</span> <span class="pre">name&gt;</span></code></dt><dd><p>Set a specific skill, for all Dwarves, to legendary</p>
<p>example: <code class="docutils literal notranslate"><span class="pre">armoks-blessing</span> <span class="pre">RANGED_COMBAT</span></code></p>
<p>All Dwarves become a Legendary Archer</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;class</span> <span class="pre">name&gt;</span></code></dt><dd><p>Set a specific class (group of skills), for all Dwarves, to legendary</p>
<p>example: <code class="docutils literal notranslate"><span class="pre">armoks-blessing</span> <span class="pre">Medical</span></code></p>
<p>All Dwarves will have all medical related skills set to legendary</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="assign-attributes">
<span id="id9"></span><h2><a class="toc-backref" href="#id141">assign-attributes</a><a class="headerlink" href="#assign-attributes" title="Permalink to this headline">¶</a></h2>
<p>A script to change the physical and mental attributes of a unit.</p>
<p>Attributes are divided into tiers from -4 to 4. Tier 0 is the
standard level and represents the average values for that attribute,
tier 4 is the maximum level, and tier -4 is the minimum level.</p>
<p>An example of the attribute “Strength”:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tier</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>4</p></td>
<td><p>unbelievably strong</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>mighty</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>very strong</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>strong</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>(no description)</p></td>
</tr>
<tr class="row-odd"><td><p>-1</p></td>
<td><p>weak</p></td>
</tr>
<tr class="row-even"><td><p>-2</p></td>
<td><p>very weak</p></td>
</tr>
<tr class="row-odd"><td><p>-3</p></td>
<td><p>unquestionably weak</p></td>
</tr>
<tr class="row-even"><td><p>-4</p></td>
<td><p>unfathomably weak</p></td>
</tr>
</tbody>
</table>
<p>For more information:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Attribute">https://dwarffortresswiki.org/index.php/DF2014:Attribute</a></p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-attributes</span> <span class="pre">[</span> <span class="pre">&lt;ATTRIBUTE&gt;</span> <span class="pre">&lt;TIER&gt;</span> <span class="pre">&lt;ATTRIBUTE&gt;</span> <span class="pre">&lt;TIER&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the list of the attributes to modify and their tiers.
The valid attribute names can be found in the wiki:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Attribute">https://dwarffortresswiki.org/index.php/DF2014:Attribute</a>
(substitute any space with underscores); tiers range from -4
to 4. There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>reset all attributes to the average level (tier 0).
If both this option and a list of attributes/tiers
are present, the unit attributes will be reset
and then the listed attributes will be modified.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-attributes -reset -attributes [ STRENGTH 2 AGILITY -1 SPATIAL_SENSE -1 ]
</pre></div>
</div>
<p>This will reset all attributes to a neutral value and will set the following
values (if the currently selected unit is a dwarf):</p>
<blockquote>
<div><ul class="simple">
<li><p>Strength: a random value between 1750 and 1999 (tier 2);</p></li>
<li><p>Agility: a random value between 401 and 650 (tier -1);</p></li>
<li><p>Spatial sense: a random value between 1043 and 1292 (tier -1).</p></li>
</ul>
</div></blockquote>
<p>The final result will be: “She is very strong, but she is clumsy.
She has a questionable spatial sense.”</p>
</div>
<div class="section" id="assign-beliefs">
<span id="id10"></span><h2><a class="toc-backref" href="#id142">assign-beliefs</a><a class="headerlink" href="#assign-beliefs" title="Permalink to this headline">¶</a></h2>
<p>A script to change the beliefs (values) of a unit.</p>
<p>Beliefs are defined with the belief token and a number from -3 to 3,
which describes the different levels of belief strength, as explained here:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Beliefs">https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Beliefs</a></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 47%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Strength</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3</p></td>
<td><p>Highest</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Very High</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>High</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Neutral</p></td>
</tr>
<tr class="row-even"><td><p>-1</p></td>
<td><p>Low</p></td>
</tr>
<tr class="row-odd"><td><p>-2</p></td>
<td><p>Very Low</p></td>
</tr>
<tr class="row-even"><td><p>-3</p></td>
<td><p>Lowest</p></td>
</tr>
</tbody>
</table>
<p>Resetting a belief means setting it to a level that does not trigger a
report in the “Thoughts and preferences” screen.</p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>set the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-beliefs</span> <span class="pre">[</span> <span class="pre">&lt;BELIEF&gt;</span> <span class="pre">&lt;LEVEL&gt;</span> <span class="pre">&lt;BELIEF&gt;</span> <span class="pre">&lt;LEVEL&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the beliefs to modify and their levels. The
valid belief tokens can be found in the wiki page
linked above; level values range from -3 to 3.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>reset all beliefs to a neutral level. If the script is
called with both this option and a list of beliefs/levels,
first all the unit beliefs will be reset and then those
beliefs listed after <code class="docutils literal notranslate"><span class="pre">-beliefs</span></code> will be modified.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-beliefs -reset -beliefs [ TRADITION 2 CRAFTSMANSHIP 3 POWER 0 CUNNING -1 ]
</pre></div>
</div>
<p>Resets all the unit beliefs, then sets the listed beliefs to the following
values:</p>
<ul class="simple">
<li><p>Tradition: a random value between 26 and 40 (level 2);</p></li>
<li><p>Craftsmanship: a random value between 41 and 50 (level 3);</p></li>
<li><p>Power: a random value between -10 and 10 (level 0);</p></li>
<li><p>Cunning: a random value between -25 and -11 (level -1).</p></li>
</ul>
<p>The final result (for a dwarf) will be: “She personally is a firm believer in
the value of tradition and sees guile and cunning as indirect and somewhat
worthless.”</p>
<p>Note that the beliefs aligned with the cultural values of the unit have not
triggered a report.</p>
</div>
<div class="section" id="assign-facets">
<span id="id11"></span><h2><a class="toc-backref" href="#id143">assign-facets</a><a class="headerlink" href="#assign-facets" title="Permalink to this headline">¶</a></h2>
<p>A script to change the facets (traits) of a unit.</p>
<p>Facets are defined with a token and a number from -3 to 3, which describes
the different levels of facets strength, as explained here:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Facets">https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Facets</a></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 47%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Strength</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3</p></td>
<td><p>Highest</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Very High</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>High</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Neutral</p></td>
</tr>
<tr class="row-even"><td><p>-1</p></td>
<td><p>Low</p></td>
</tr>
<tr class="row-odd"><td><p>-2</p></td>
<td><p>Very Low</p></td>
</tr>
<tr class="row-even"><td><p>-3</p></td>
<td><p>Lowest</p></td>
</tr>
</tbody>
</table>
<p>Resetting a facet means setting it to a level that does not
trigger a report in the “Thoughts and preferences” screen.</p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>set the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-beliefs</span> <span class="pre">[</span> <span class="pre">&lt;FACET&gt;</span> <span class="pre">&lt;LEVEL&gt;</span> <span class="pre">&lt;FACET&gt;</span> <span class="pre">&lt;LEVEL&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the facets to modify and their levels. The
valid facet tokens can be found in the wiki page
linked above; level values range from -3 to 3.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>reset all facets to a neutral level. If the script is
called with both this option and a list of facets/levels,
first all the unit facets will be reset and then those
facets listed after <code class="docutils literal notranslate"><span class="pre">-facets</span></code> will be modified.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-facets -reset -facets [ HATE_PROPENSITY -2 CHEER_PROPENSITY -1 ]
</pre></div>
</div>
<p>Resets all the unit facets, then sets the listed facets to the following values:</p>
<ul class="simple">
<li><p>Hate propensity: a value between 10 and 24 (level -2);</p></li>
<li><p>Cheer propensity: a value between 25 and 39 (level -1).</p></li>
</ul>
<p>The final result (for a dwarf) will be: “She very rarely develops negative
feelings toward things. She is rarely happy or enthusiastic, and she is
conflicted by this as she values parties and merrymaking in the abstract.”</p>
<p>Note that the facets are compared to the beliefs, and if conflicts arise they
will be reported.</p>
</div>
<div class="section" id="assign-goals">
<span id="id12"></span><h2><a class="toc-backref" href="#id144">assign-goals</a><a class="headerlink" href="#assign-goals" title="Permalink to this headline">¶</a></h2>
<p>A script to change the goals (dreams) of a unit.</p>
<p>Goals are defined with the goal token and a true/false value
that describes whether or not the goal has been accomplished. Be
advised that this last feature has not been properly tested and
might be potentially destructive: I suggest leaving it at false.</p>
<p>For a list of possible goals:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Goals">https://dwarffortresswiki.org/index.php/DF2014:Personality_trait#Goals</a></p>
<p>Bear in mind that nothing will stop you from assigning zero or
more than one goal, but it’s not clear how it will affect the game.</p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>set the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-goals</span> <span class="pre">[</span> <span class="pre">&lt;GOAL&gt;</span> <span class="pre">&lt;REALIZED_FLAG&gt;</span> <span class="pre">&lt;GOAL&gt;</span> <span class="pre">&lt;REALIZED_FLAG&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the goals to modify/add and whether they have
been realized or not. The valid goal tokens
can be found in the wiki page linked above.
The flag must be a true/false value.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>clear all goals. If the script is called with
both this option and a list of goals, first all
the unit goals will be erased and then those
goals listed after <code class="docutils literal notranslate"><span class="pre">-goals</span></code> will be added.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-goals -reset -goals [ MASTER_A_SKILL false ]
</pre></div>
</div>
<p>Clears all the unit goals, then sets the “master a skill” goal. The final result
will be: “dreams of mastering a skill”.</p>
</div>
<div class="section" id="assign-preferences">
<span id="id13"></span><h2><a class="toc-backref" href="#id145">assign-preferences</a><a class="headerlink" href="#assign-preferences" title="Permalink to this headline">¶</a></h2>
<p>A script to change the preferences of a unit.</p>
<p>Preferences are classified into 12 types. The first 9 are:</p>
<ul class="simple">
<li><p>like material;</p></li>
<li><p>like creature;</p></li>
<li><p>like food;</p></li>
<li><p>hate creature;</p></li>
<li><p>like item;</p></li>
<li><p>like plant;</p></li>
<li><p>like tree;</p></li>
<li><p>like colour;</p></li>
<li><p>like shape.</p></li>
</ul>
<p>These can be changed using this script.</p>
<p>The remaining three are not currently managed by this script,
and are: like poetic form, like musical form, like dance form.</p>
<p>To produce the correct description in the “thoughts and preferences”
page, you must specify the particular type of preference. For
each type, a description is provided in the section below.</p>
<p>You will need to know the token of the object you want your dwarf to like.
Unless told otherwise, the best way to get those tokens is to activate
the plugin <a class="reference internal" href="../../plugins/stonesense/docs/Stonesense.html#stonesense"><span class="std std-ref">Stonesense</span></a>, load a world and let the plugin generate a file
named “MatList.csv” in the root DF folder. Browse this file (import it
as a .csv file with Excel or similar program) to get the desired token
(in the “id” column). Otherwise, in the folder “/raw/objects/” under
the main DF directory you will find all the raws defined in the game.</p>
<p>For more information:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Preferences">https://dwarffortresswiki.org/index.php/DF2014:Preferences</a></p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>set the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likematerial</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>usually a type of stone, a type of metal and a type
of gem, plus it can also be a type of wood, a type of
glass, a type of leather, a type of horn, a type of
pearl, a type of ivory, a decoration material - coral
or amber, a type of bone, a type of shell, a type
of silk, a type of yarn, or a type of plant cloth.
Write the tokens as found in the “id” column of the
file “MatList.csv”, generated as explained above.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likecreature</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>one or more creatures liked by the unit. You can
just list the species: if you are using the file
“MatList.csv” as explained above, the creature token
will be something similar to <code class="docutils literal notranslate"><span class="pre">CREATURE:SPARROW:SKIN</span></code>,
so the name of the species will be <code class="docutils literal notranslate"><span class="pre">SPARROW</span></code>. Nothing
will stop you to write the full token, if you want: the
script will just ignore the first and the last parts.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likefood</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>usually a type of alcohol, plus it can be a type of
meat, a type of fish, a type of cheese, a type of edible
plant, a cookable plant/creature extract, a cookable
mill powder, a cookable plant seed or a cookable plant
leaf. Write the tokens as found in the “id” column of
the file “MatList.csv”, generated as explained above.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-hatecreature</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>works the same way as <code class="docutils literal notranslate"><span class="pre">-likecreature</span></code>, but this time
it’s one or more creatures that the unit detests. They
should be a type of <code class="docutils literal notranslate"><span class="pre">HATEABLE</span></code> vermin which isn’t already
explicitly liked, but no check is performed about this.
Like before, you can just list the creature species.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likeitem</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>a kind of weapon, a kind of ammo, a kind of piece of
armor, a piece of clothing (including backpacks or
quivers), a type of furniture (doors, floodgates, beds,
chairs, windows, cages, barrels, tables, coffins,
statues, boxes, armor stands, weapon racks, cabinets,
bins, hatch covers, grates, querns, millstones, traction
benches, or slabs), a kind of craft (figurines, amulets,
scepters, crowns, rings, earrings, bracelets, or large
gems), or a kind of miscellaneous item (catapult parts,
ballista parts, a type of siege ammo, a trap component,
coins, anvils, totems, chains, flasks, goblets,
buckets, animal traps, an instrument, a toy, splints,
crutches, or a tool). The item tokens can be found here:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Item_token">https://dwarffortresswiki.org/index.php/DF2014:Item_token</a>
If you want to specify an item subtype, look into the files
listed under the column “Subtype” of the wiki page (they are
in the “/raw/ojects/” folder), then specify the items using
the full tokens found in those files (see examples below).
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likeplant</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>works in a similar way as <code class="docutils literal notranslate"><span class="pre">-likecreature</span></code>, this time
with plants. You can just List the plant species (the
middle part of the token as listed in “MatList.csv”).
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-liketree</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>works exactly as <code class="docutils literal notranslate"><span class="pre">-likeplant</span></code>. I think this
preference type is here for backward compatibility (?).
You can still use it, however. As before,
you can just list the tree (plant) species.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likecolor</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>you can find the color tokens here:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Color#Color_tokens">https://dwarffortresswiki.org/index.php/DF2014:Color#Color_tokens</a>
or inside the “descriptor_color_standard.txt” file
(in the “/raw/ojects/” folder). You can use the full token or
just the color name.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-likeshape</span> <span class="pre">[</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;TOKEN&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>I couldn’t find a list of shape tokens in the wiki, but you
can find them inside the “descriptor_shape_standard.txt”
file (in the “/raw/ojects/” folder). You can
use the full token or just the shape name.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>clear all preferences. If the script is called
with both this option and one or more preferences,
first all the unit preferences will be cleared
and then the listed preferences will be added.</p>
</dd>
</dl>
<p>Examples:</p>
<ul>
<li><p>“likes alabaster and willow wood”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likematerial [ INORGANIC:ALABASTER PLANT:WILLOW:WOOD ]
</pre></div>
</div>
</li>
<li><p>“likes sparrows for their …”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likecreature SPARROW
</pre></div>
</div>
</li>
<li><p>“prefers to consume dwarven wine and olives”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likefood [ PLANT:MUSHROOM_HELMET_PLUMP:DRINK PLANT:OLIVE:FRUIT ]
</pre></div>
</div>
</li>
<li><p>“absolutely detests jumping spiders:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -hatecreature SPIDER_JUMPING
</pre></div>
</div>
</li>
<li><p>“likes logs and battle axes”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likeitem [ WOOD ITEM_WEAPON:ITEM_WEAPON_AXE_BATTLE ]
</pre></div>
</div>
</li>
<li><p>“likes straberry plants for their …”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likeplant BERRIES_STRAW
</pre></div>
</div>
</li>
<li><p>“likes oaks for their …”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -liketree OAK
</pre></div>
</div>
</li>
<li><p>“likes the color aqua”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likecolor AQUA
</pre></div>
</div>
</li>
<li><p>“likes stars”:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-preferences -reset -likeshape STAR
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="assign-profile">
<span id="id14"></span><h2><a class="toc-backref" href="#id146">assign-profile</a><a class="headerlink" href="#assign-profile" title="Permalink to this headline">¶</a></h2>
<p>A script to change the characteristics of a unit
according to a profile loaded from a json file.</p>
<p>A profile can describe which attributes, skills, preferences, beliefs,
goals and facets a unit must have. The script relies on the presence
of the other <code class="docutils literal notranslate"><span class="pre">assign-...</span></code> modules in this collection: please refer
to the other modules documentation for more specific information.</p>
<p>For information about the json schema, please see the
the “/hack/scripts/dwarf_profiles.json” file.</p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>the target unit ID. If not present, the
target will be the currently selected unit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-file</span> <span class="pre">&lt;filename&gt;</span></code>:</dt><dd><p>the json file containing the profile to apply.
It’s a relative path, starting from the DF
root directory and ending at the json file.
It must begin with a slash. Default value:
“/hack/scripts/dwarf_profiles.json”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-profile</span> <span class="pre">&lt;profile&gt;</span></code>:</dt><dd><p>the profile to apply. It’s the name of
the profile as stated in the json file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span> <span class="pre">[</span> <span class="pre">&lt;list</span> <span class="pre">of</span> <span class="pre">characteristics&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the characteristics to be reset/cleared. If not present,
it will not clear or reset any characteristic, and it will
simply add what is described in the profile. If it’s a
valid list of characteristic, those characteristics will
be reset, and then what is described in the profile
will be applied. If set to <code class="docutils literal notranslate"><span class="pre">PROFILE</span></code>, it will reset
only the characteristics directly modified by the profile
(and then the new values described will be applied).
If set to <code class="docutils literal notranslate"><span class="pre">ALL</span></code>, it will reset EVERY characteristic and
then it will apply the profile.
Accepted values:
<code class="docutils literal notranslate"><span class="pre">ALL</span></code>, <code class="docutils literal notranslate"><span class="pre">PROFILE</span></code>, <code class="docutils literal notranslate"><span class="pre">ATTRIBUTES</span></code>, <code class="docutils literal notranslate"><span class="pre">SKILLS</span></code>,
<code class="docutils literal notranslate"><span class="pre">PREFERENCES</span></code>, <code class="docutils literal notranslate"><span class="pre">BELIEFS</span></code>, <code class="docutils literal notranslate"><span class="pre">GOALS</span></code>, <code class="docutils literal notranslate"><span class="pre">FACETS</span></code>.
There must be a space before and after each square
bracket. If only one value is provided, the square brackets
can be omitted.</p>
</dd>
</dl>
<p>Examples:</p>
<ul>
<li><p>Loads and applies the profile called “DOCTOR” in the default json file,
resetting/clearing all the characteristics changed by the profile, leaving
the others unchanged, and then applies the new values:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-profile -profile DOCTOR -reset PROFILE
</pre></div>
</div>
</li>
<li><p>Loads and applies the profile called “ARCHER” in the provided (fictional) json,
keeping all the old characteristics but the attributes and the skills, which
will be reset (and then, if the profile provides some attributes or skills values,
those new values will be applied):</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-profile -file /hack/scripts/military_profiles.json -profile ARCHER -reset [ ATTRIBUTES SKILLS ]
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="assign-skills">
<span id="id15"></span><h2><a class="toc-backref" href="#id147">assign-skills</a><a class="headerlink" href="#assign-skills" title="Permalink to this headline">¶</a></h2>
<p>A script to change the skills of a unit.</p>
<p>Skills are defined by their token and their rank. Skills tokens can be
found here: <a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Skill_token">https://dwarffortresswiki.org/index.php/DF2014:Skill_token</a></p>
<p>Below you can find a list of the first 16 ranks:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Rank</p></th>
<th class="head"><p>Skill name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Dabbling</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Novice</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Adequate</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Competent</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Skilled</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Proficient</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Talented</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>Adept</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>Expert</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>Professional</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>Accomplished</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>Great</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Master</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>High Master</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>Grand Master</p></td>
</tr>
<tr class="row-odd"><td><p>15+</p></td>
<td><p>Legendary</p></td>
</tr>
</tbody>
</table>
<p>For more information:
<a class="reference external" href="https://dwarffortresswiki.org/index.php/DF2014:Skill#Skill_level_names">https://dwarffortresswiki.org/index.php/DF2014:Skill#Skill_level_names</a></p>
<p>Usage:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-help</span></code>:</dt><dd><p>print the help page.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT_ID&gt;</span></code>:</dt><dd><p>the target unit ID. If not present, the
currently selected unit will be the target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-skills</span> <span class="pre">[</span> <span class="pre">&lt;SKILL&gt;</span> <span class="pre">&lt;RANK&gt;</span> <span class="pre">&lt;SKILL&gt;</span> <span class="pre">&lt;RANK&gt;</span> <span class="pre">&lt;...&gt;</span> <span class="pre">]</span></code>:</dt><dd><p>the list of the skills to modify and their ranks.
Rank values range from -1 (the skill is not learned)
to normally 20 (legendary + 5). It is actually
possible to go beyond 20, no check is performed.
There must be a space before and after each square
bracket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-reset</span></code>:</dt><dd><p>clear all skills. If the script is called with
both this option and a list of skills/ranks,
first all the unit skills will be cleared
and then the listed skills will be added.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>assign-skills -reset -skills [ WOODCUTTING 3 AXE 2 ]
</pre></div>
</div>
<p>Clears all the unit skills, then adds the Wood cutter skill (competent level)
and the Axeman skill (adequate level).</p>
</div>
<div class="section" id="autolabor-artisans">
<span id="id16"></span><h2><a class="toc-backref" href="#id148">autolabor-artisans</a><a class="headerlink" href="#autolabor-artisans" title="Permalink to this headline">¶</a></h2>
<p>Runs an <a class="reference internal" href="../Plugins.html#autolabor"><span class="std std-ref">autolabor</span></a> command, for all labors where skill level
influences output quality.  Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>autolabor-artisans 0 2 3
autolabor-artisans disable
</pre></div>
</div>
</div>
<div class="section" id="autounsuspend">
<span id="id17"></span><h2><a class="toc-backref" href="#id149">autounsuspend</a><a class="headerlink" href="#autounsuspend" title="Permalink to this headline">¶</a></h2>
<p>Periodically check construction jobs and keep them unsuspended with the
<a class="reference internal" href="#unsuspend"><span class="std std-ref">unsuspend</span></a> script.</p>
</div>
<div class="section" id="ban-cooking">
<span id="id18"></span><h2><a class="toc-backref" href="#id150">ban-cooking</a><a class="headerlink" href="#ban-cooking" title="Permalink to this headline">¶</a></h2>
<p>A more convenient way to ban cooking various categories of foods than the
kitchen interface.  Usage:  <code class="docutils literal notranslate"><span class="pre">ban-cooking</span> <span class="pre">&lt;type&gt;</span></code>.  Valid types are <code class="docutils literal notranslate"><span class="pre">booze</span></code>,
<code class="docutils literal notranslate"><span class="pre">honey</span></code>, <code class="docutils literal notranslate"><span class="pre">tallow</span></code>, <code class="docutils literal notranslate"><span class="pre">oil</span></code>, <code class="docutils literal notranslate"><span class="pre">seeds</span></code> (non-tree plants with seeds),
<code class="docutils literal notranslate"><span class="pre">brew</span></code>, <code class="docutils literal notranslate"><span class="pre">fruit</span></code>, <code class="docutils literal notranslate"><span class="pre">mill</span></code>, <code class="docutils literal notranslate"><span class="pre">thread</span></code>, and <code class="docutils literal notranslate"><span class="pre">milk</span></code>.</p>
</div>
<div class="section" id="binpatch">
<span id="id19"></span><h2><a class="toc-backref" href="#id151">binpatch</a><a class="headerlink" href="#binpatch" title="Permalink to this headline">¶</a></h2>
<p>Implements functions for in-memory binpatches.  See <a class="reference internal" href="../Binpatches.html#binpatches"><span class="std std-ref">Patching the DF binary</span></a>.</p>
</div>
<div class="section" id="bodyswap">
<span id="id20"></span><h2><a class="toc-backref" href="#id152">bodyswap</a><a class="headerlink" href="#bodyswap" title="Permalink to this headline">¶</a></h2>
<p>This script allows the player to take direct control of any unit present in
adventure mode whilst giving up control of their current player character.</p>
<p>To specify the target unit, simply select it in the user interface,
such as by opening the unit’s status screen or viewing its description,
and enter “bodyswap” in the DFHack console.</p>
<p>Alternatively, the target unit can be specified by its unit id as shown below.</p>
<p>Arguments:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>-unit id
    replace &quot;id&quot; with the unit id of your target
    example:
        bodyswap -unit 42
</pre></div>
</div>
</div>
<div class="section" id="brainwash">
<span id="id21"></span><h2><a class="toc-backref" href="#id153">brainwash</a><a class="headerlink" href="#brainwash" title="Permalink to this headline">¶</a></h2>
<p>Modify the personality traits of the selected dwarf to match an idealised
personality - for example, as stable and reliable as possible to prevent
tantrums even after months of misery.</p>
<p>Usage:  <code class="docutils literal notranslate"><span class="pre">brainwash</span> <span class="pre">&lt;type&gt;</span></code>, with one of the following types:</p>
<dl class="field-list simple">
<dt class="field-odd">ideal</dt>
<dd class="field-odd"><p>reliable, with generally positive personality traits</p>
</dd>
<dt class="field-even">baseline</dt>
<dd class="field-even"><p>reset all personality traits to the average</p>
</dd>
<dt class="field-odd">stepford</dt>
<dd class="field-odd"><p>amplifies all good qualities to an excessive degree</p>
</dd>
<dt class="field-even">wrecked</dt>
<dd class="field-even"><p>amplifies all bad qualities to an excessive degree</p>
</dd>
</dl>
</div>
<div class="section" id="break-dance">
<span id="id22"></span><h2><a class="toc-backref" href="#id154">break-dance</a><a class="headerlink" href="#break-dance" title="Permalink to this headline">¶</a></h2>
<p>Breaks up dances, such as broken or otherwise hung dances that occur when a unit
can’t find a partner.</p>
</div>
<div class="section" id="burial">
<span id="id23"></span><h2><a class="toc-backref" href="#id155">burial</a><a class="headerlink" href="#burial" title="Permalink to this headline">¶</a></h2>
<p>Sets all unowned coffins to allow burial.  <code class="docutils literal notranslate"><span class="pre">burial</span> <span class="pre">-pets</span></code> also allows burial
of pets.</p>
</div>
<div class="section" id="cannibalism">
<span id="id24"></span><h2><a class="toc-backref" href="#id156">cannibalism</a><a class="headerlink" href="#cannibalism" title="Permalink to this headline">¶</a></h2>
<p>Allows consumption of sapient corpses. Use from an adventurer’s inventory screen
or an individual item’s detail screen.</p>
</div>
<div class="section" id="caravan">
<span id="id25"></span><h2><a class="toc-backref" href="#id157">caravan</a><a class="headerlink" href="#caravan" title="Permalink to this headline">¶</a></h2>
<p>Adjusts properties of caravans on the map. See also <a class="reference internal" href="#force"><span class="std std-ref">force</span></a> to create caravans.</p>
<p>This script has multiple subcommands. Commands listed with the argument
<code class="docutils literal notranslate"><span class="pre">[IDS]</span></code> can take multiple caravan IDs (see <code class="docutils literal notranslate"><span class="pre">caravan</span> <span class="pre">list</span></code>). If no IDs are
specified, then the commands apply to all caravans on the map.</p>
<p><strong>Subcommands:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code>: lists IDs and information about all caravans on the map.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extend</span> <span class="pre">[DAYS]</span> <span class="pre">[IDS]</span></code>: extends the time that caravans stay at the depot by
the specified number of days (defaults to 7 if not specified). Also causes
caravans to return to the depot if applicable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">happy</span> <span class="pre">[IDS]</span></code>: makes caravans willing to trade again (after seizing goods,
annoying merchants, etc.). Also causes caravans to return to the depot if
applicable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">leave</span> <span class="pre">[IDS]</span></code>: makes caravans pack up and leave immediately.</p></li>
</ul>
</div>
<div class="section" id="catsplosion">
<span id="id26"></span><h2><a class="toc-backref" href="#id158">catsplosion</a><a class="headerlink" href="#catsplosion" title="Permalink to this headline">¶</a></h2>
<p>Makes cats (and other animals) just <em>multiply</em>. It is not a good idea to run this
more than once or twice.</p>
<p>Usage:</p>
<dl class="field-list simple">
<dt class="field-odd">catsplosion</dt>
<dd class="field-odd"><p>Make all cats pregnant</p>
</dd>
<dt class="field-even">catsplosion list</dt>
<dd class="field-even"><p>List IDs of all animals on the map</p>
</dd>
<dt class="field-odd">catsplosion ID …</dt>
<dd class="field-odd"><p>Make animals with given ID(s) pregnant</p>
</dd>
</dl>
<p>Animals will give birth within two in-game hours (100 ticks or fewer).</p>
</div>
<div class="section" id="clear-smoke">
<span id="id27"></span><h2><a class="toc-backref" href="#id159">clear-smoke</a><a class="headerlink" href="#clear-smoke" title="Permalink to this headline">¶</a></h2>
<p>Removes all smoke from the map. Note that this can leak memory and should be
used sparingly.</p>
</div>
<div class="section" id="colonies">
<span id="id28"></span><h2><a class="toc-backref" href="#id160">colonies</a><a class="headerlink" href="#colonies" title="Permalink to this headline">¶</a></h2>
<p>List vermin colonies, place honey bees, or convert all vermin
to honey bees.  Usage:</p>
<dl class="field-list simple">
<dt class="field-odd">colonies</dt>
<dd class="field-odd"><p>List all vermin colonies on the map.</p>
</dd>
<dt class="field-even">colonies place</dt>
<dd class="field-even"><p>Place a honey bee colony under the cursor.</p>
</dd>
<dt class="field-odd">colonies convert</dt>
<dd class="field-odd"><p>Convert all existing colonies to honey bees.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">place</span></code> and <code class="docutils literal notranslate"><span class="pre">convert</span></code> subcommands by default create or
convert to honey bees, as this is the most commonly useful.
However both accept an optional flag to use a different vermin
type, for example <code class="docutils literal notranslate"><span class="pre">colonies</span> <span class="pre">place</span> <span class="pre">ANT</span></code> creates an ant colony
and <code class="docutils literal notranslate"><span class="pre">colonies</span> <span class="pre">convert</span> <span class="pre">TERMITE</span></code> ends your beekeeping industry.</p>
</div>
<div class="section" id="color-schemes">
<span id="id29"></span><h2><a class="toc-backref" href="#id161">color-schemes</a><a class="headerlink" href="#color-schemes" title="Permalink to this headline">¶</a></h2>
<p>A script to manage color schemes.</p>
<dl class="simple">
<dt>Current features are :</dt><dd><ul class="simple">
<li><dl class="field-list simple">
<dt class="field-odd">Registration</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">Loading</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">Listing</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">Default</dt>
<dd class="field-odd"><p>Setting/Loading</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>For detailed information and usage, type <code class="docutils literal notranslate"><span class="pre">color-schemes</span></code> in console.</p>
<dl class="simple">
<dt>Loaded as a module, this script will export those methods :</dt><dd><ul class="simple">
<li><p>register(path, force) : Register colors schemes by path (file or directory), relative to DF main directory</p></li>
<li><p>load(name)            : Load a registered color scheme by name</p></li>
<li><p>list()                : Return a list of registered color schemes</p></li>
<li><p>set_default(name)     : Set the default color scheme</p></li>
<li><p>load_default()        : Load the default color scheme</p></li>
</ul>
</dd>
</dl>
<p>For more information about arguments and return values, see <code class="docutils literal notranslate"><span class="pre">hack/scripts/color-schemes.lua</span></code>.</p>
<dl class="simple">
<dt>Related scripts:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="gui.html#gui-color-schemes"><span class="std std-ref">gui/color-schemes</span></a> is the in-game GUI for this script.</p></li>
<li><p><a class="reference internal" href="#season-palette"><span class="std std-ref">season-palette</span></a> swaps color schemes when the season changes.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="combat-harden">
<span id="id30"></span><h2><a class="toc-backref" href="#id162">combat-harden</a><a class="headerlink" href="#combat-harden" title="Permalink to this headline">¶</a></h2>
<p>Sets the combat-hardened value on a unit, making them care more/less about seeing corpses.
Requires a value and a target.</p>
<p>Valid values:</p>
<dl class="field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">-value</span> <span class="pre">&lt;0-100&gt;</span></code></dt>
<dd class="field-odd"><p>A percent value to set combat hardened to.</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">-tier</span> <span class="pre">&lt;1-4&gt;</span></code></dt>
<dd class="field-even"><dl class="simple">
<dt>Choose a tier of hardenedness to set it to.</dt><dd><p>1 = No hardenedness.
2 = “is getting used to tragedy”
3 = “is a hardened individual”
4 = “doesn’t really care about anything anymore” (max)</p>
</dd>
</dl>
</dd>
</dl>
<p>If neither are provided, the script defaults to using a value of 100.</p>
<p>Valid targets:</p>
<dl class="field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">-all</span></code></dt>
<dd class="field-odd"><p>All active units will be affected.</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">-citizens</span></code></dt>
<dd class="field-even"><p>All (sane) citizens of your fort will be affected. Will do nothing in adventure mode.</p>
</dd>
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;UNIT</span> <span class="pre">ID&gt;</span></code></dt>
<dd class="field-odd"><p>The given unit will be affected.</p>
</dd>
</dl>
<p>If no target is given, the provided unit can’t be found, or no unit id is given with the unit
argument, the script will try and default to targeting the currently selected unit.</p>
</div>
<div class="section" id="combine-drinks">
<span id="id31"></span><h2><a class="toc-backref" href="#id163">combine-drinks</a><a class="headerlink" href="#combine-drinks" title="Permalink to this headline">¶</a></h2>
<p>Merge stacks of drinks in the selected stockpile.</p>
</div>
<div class="section" id="combine-plants">
<span id="id32"></span><h2><a class="toc-backref" href="#id164">combine-plants</a><a class="headerlink" href="#combine-plants" title="Permalink to this headline">¶</a></h2>
<p>Merge stacks of plants or plant growths in the selected container or stockpile.</p>
</div>
<div class="section" id="create-items">
<span id="id33"></span><h2><a class="toc-backref" href="#id165">create-items</a><a class="headerlink" href="#create-items" title="Permalink to this headline">¶</a></h2>
<p>Spawn items under the cursor, to get your fortress started.</p>
<p>The first argument gives the item category, the second gives the material,
and the optional third gives the number of items to create (defaults to 20).</p>
<p>Currently supported item categories: <code class="docutils literal notranslate"><span class="pre">boulder</span></code>, <code class="docutils literal notranslate"><span class="pre">bar</span></code>, <code class="docutils literal notranslate"><span class="pre">plant</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code>,
<code class="docutils literal notranslate"><span class="pre">web</span></code>.</p>
<p>Instead of material, using <code class="docutils literal notranslate"><span class="pre">list</span></code> makes the script list eligible materials.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">web</span></code> item category will create an uncollected cobweb on the floor.</p>
<p>Note that the script does not enforce anything, and will let you create
boulders of toad blood and stuff like that.
However the <code class="docutils literal notranslate"><span class="pre">list</span></code> mode will only show ‘normal’ materials.</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>create-items boulders COAL_BITUMINOUS 12
create-items plant tail_pig
create-items log list
create-items web CREATURE:SPIDER_CAVE_GIANT:SILK
create-items bar CREATURE:CAT:SOAP
create-items bar adamantine
</pre></div>
</div>
</div>
<div class="section" id="deathcause">
<span id="id34"></span><h2><a class="toc-backref" href="#id166">deathcause</a><a class="headerlink" href="#deathcause" title="Permalink to this headline">¶</a></h2>
<p>Select a body part ingame, or a unit from the <kbd class="kbd docutils literal notranslate">u</kbd> unit list, and this
script will display the cause of death of the creature.</p>
</div>
<div class="section" id="deep-embark">
<span id="id35"></span><h2><a class="toc-backref" href="#id167">deep-embark</a><a class="headerlink" href="#deep-embark" title="Permalink to this headline">¶</a></h2>
<p>Moves the starting units and equipment to
a specific underground region upon embarking.</p>
<p>This script can be run directly from the console
at any point whilst setting up an embark.</p>
<p>Alternatively, create a file called “onLoad.init”
in the DF raw folder (if one does not exist already)
and enter the script command within it. Doing so will
cause the script to run automatically and should hence
be especially useful for modders who want their mod
to include underground embarks by default.</p>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>deep-embark -depth CAVERN_2
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>-depth X
    (obligatory)
    replace &quot;X&quot; with one of the following:
        CAVERN_1
        CAVERN_2
        CAVERN_3
        UNDERWORLD

-blockDemons
    including this arg will prevent demon surges
    in the context of breached underworld spires
    (intended mainly for UNDERWORLD embarks)
    (&quot;wildlife&quot; demon spawning will be unaffected)

-atReclaim
    if the script is being run from onLoad.init,
    including this arg will enable deep embarks
    when reclaiming sites too
    (there&#39;s no need to specify this if running
    the script directly from the console)

-clear
    re-enable normal surface embarks
</pre></div>
</div>
</div>
<div class="section" id="deteriorateclothes">
<span id="id36"></span><h2><a class="toc-backref" href="#id168">deteriorateclothes</a><a class="headerlink" href="#deteriorateclothes" title="Permalink to this headline">¶</a></h2>
<p>Somewhere between a “mod” and a “fps booster”, with a small impact on
vanilla gameplay. All of those slightly worn wool shoes that dwarves
scatter all over the place will deteriorate at a greatly increased rate,
and eventually just crumble into nothing. As warm and fuzzy as a dining
room full of used socks makes your dwarves feel, your FPS does not like it.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>deteriorateclothes start|stop
</pre></div>
</div>
</div>
<div class="section" id="deterioratecorpses">
<span id="id37"></span><h2><a class="toc-backref" href="#id169">deterioratecorpses</a><a class="headerlink" href="#deterioratecorpses" title="Permalink to this headline">¶</a></h2>
<p>Somewhere between a “mod” and a “fps booster”, with a small impact on
vanilla gameplay.</p>
<p>In long running forts, especially evil biomes, you end up with a lot
of toes, teeth, fingers, and limbs scattered all over the place.
Various corpses from various sieges, stray kitten corpses, probably
some heads. Basically, your map will look like a giant pile of
assorted body parts, all of which individually eat up a small part
of your FPS, which collectively eat up quite a bit.</p>
<p>In addition, this script also targets various butchery byproducts.
Enjoying your thriving animal industry? Your FPS does not. Those
thousands of skulls, bones, hooves, and wool eat up precious FPS
that could be used to kill goblins and elves. Whose corpses will
also get destroyed by the script to kill more goblins and elves.</p>
<p>This script causes all of those to rot away into nothing after
several months.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>deterioratecorpses start|stop
</pre></div>
</div>
</div>
<div class="section" id="deterioratefood">
<span id="id38"></span><h2><a class="toc-backref" href="#id170">deterioratefood</a><a class="headerlink" href="#deterioratefood" title="Permalink to this headline">¶</a></h2>
<p>Somewhere between a “mod” and a “fps booster”, with a small impact on
vanilla gameplay.</p>
<p>With this script running, all food and plants wear out and disappear
after several months. Barrels and stockpiles will keep them from
rotting, but it won’t keep them from decaying. No more sitting on a
hundred years worth of food. No more keeping barrels of pig tails
sitting around until you decide to use them. Either use it, eat it,
or lose it. Seeds, are excluded from this, if you aren’t planning on
using your pig tails, hold onto the seeds for a rainy day.</p>
<p>This script is…pretty far reaching. However, almost all long
running forts I’ve had end up sitting on thousands and thousands of
food items. Several thousand cooked meals, three thousand plump
helmets, just as many fish and meat. It gets pretty absurd. And your
FPS doesn’t like it.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>deterioratefood start|stop
</pre></div>
</div>
</div>
<div class="section" id="digfort">
<span id="id39"></span><h2><a class="toc-backref" href="#id171">digfort</a><a class="headerlink" href="#digfort" title="Permalink to this headline">¶</a></h2>
<p>A script to designate an area for digging according to a plan in csv format.</p>
<p><strong>Digfort is deprecated.</strong> Please use DFHack’s more powerful <a class="reference internal" href="#quickfort"><span class="std std-ref">quickfort</span></a> command
instead. You can use your existing .csv files. Just move them to the
<code class="docutils literal notranslate"><span class="pre">blueprints</span></code> folder in your DF installation, and instead of <code class="docutils literal notranslate"><span class="pre">digfort</span>
<span class="pre">file.csv</span></code> run <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">run</span> <span class="pre">file.csv</span></code>.</p>
<p>This script, inspired by (Python) quickfort, can designate an area for digging.
Your plan should be stored in a .csv file like this:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span><span class="c1"># this is a comment</span>
d,d,u,d,d,skip this tile,d
d,d,d,i
</pre></div>
</div>
<p>Other than <code class="docutils literal notranslate"><span class="pre">d</span></code>, tile shapes are named after the ‘dig’ menu shortcuts:
<code class="docutils literal notranslate"><span class="pre">d</span></code> for default, <code class="docutils literal notranslate"><span class="pre">u</span></code> upstairs, <code class="docutils literal notranslate"><span class="pre">j</span></code> downstairs, <code class="docutils literal notranslate"><span class="pre">i</span></code> updown,
<code class="docutils literal notranslate"><span class="pre">h</span></code> channel, <code class="docutils literal notranslate"><span class="pre">r</span></code> upward ramp, and <code class="docutils literal notranslate"><span class="pre">x</span></code> remove designation.
Unrecognized characters are ignored (e.g. the ‘skip this tile’ in the sample).
<code class="docutils literal notranslate"><span class="pre">d</span></code> is interpreted based on the shape of the current tile. It will dig
walls, remove stairs and ramps, gather plants, and fell trees.</p>
<p>Empty lines and data after a <code class="docutils literal notranslate"><span class="pre">#</span></code> are ignored as comments. Double quote (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>)
characters that are inserted at the beginning of strings by csv exporters are
also ignored. To skip a row in your design, add a row consisting only of <code class="docutils literal notranslate"><span class="pre">,</span></code>
characters.</p>
<p>One comment in the file may contain the phrase <code class="docutils literal notranslate"><span class="pre">start(3,5)</span></code>. It is interpreted
as an offset for the pattern: instead of starting at the cursor, it will start
3 tiles left and 5 tiles up from the cursor.</p>
<p>Additionally a comment can have a <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> for a rise in z level or a <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> for a
drop in z.</p>
<p>The script takes the plan filename, starting from the root df folder (where
<code class="docutils literal notranslate"><span class="pre">dfhack.init</span></code> is found).</p>
<p>Additional options can be specified after the filename:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">force</span></code>: if the blueprint would extend beyond the edge of the map, still
draw the parts that remain on the map. (The default behavior in this case
is to fail with an error message.)</p></li>
</ul>
</div>
<div class="section" id="dorf-tables">
<span id="id40"></span><h2><a class="toc-backref" href="#id172">dorf_tables</a><a class="headerlink" href="#dorf-tables" title="Permalink to this headline">¶</a></h2>
<p>Data tables for <a class="reference internal" href="#dwarf-op"><span class="std std-ref">dwarf-op</span></a></p>
<dl class="simple">
<dt>Arguments:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-list</span> <span class="pre">[jobs|professions|types]</span></code></p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dorf_tables -list jobs
dorf_tables -list professions
dorf_tables -list types
</pre></div>
</div>
<hr class="docutils" />
<p>The data tables defined are described below.</p>
<dl>
<dt>job_distributions:</dt><dd><p>Defines thresholds for each column of distributions. The columns must
add up to the values in the thresholds row for that column.
Every other row references an entry in ‘jobs’</p>
</dd>
<dt>jobs:</dt><dd><p>Defines <a class="reference internal" href="#dwarf-op"><span class="std std-ref">dwarf-op</span></a>’s nameable jobs. This is preferable to taking every
profession and making a distribution that covers all 100+ profs.</p>
<p>Each job is comprised of required professions, optional professions,
probabilities for each optional profession, a ‘max’ number of
optional professions, and a list of type(s) to apply to dwarves in
the defined job.</p>
</dd>
<dt>professions:</dt><dd><p>These are a subset of the professions DF has. All professions listed
will match a profession dwarf fortress has built in, however not all
the built-ins are defined here.</p>
<p>Each profession is defined with a set of job skills, these match
the skills built in to dwarf fortress. Each skill is given a value
which represents the bonus a dwarf will get to this skill. The skills
are added in a random order, with the first few receiving the highest
values (excluding the bonus just mentioned). Thus the bonuses are to
ensure a minimum threshold is passed for certain skills deemed
critical to a profession.</p>
</dd>
<dt>types:</dt><dd><p>These are a sort of archetype system for applying to dwarves. It
primarily includes physical attributes, but can include skills as well.</p>
<p>Each type has a probability of being applied to a dwarf just by pure
luck - this is in addition to types applied by other means. Each type
also has a list of attribute(s) each attribute has a attribute_level
associated to it. Additionally each type may define a list of skills
from the aforementioned job_skill listing, each skill is defined with
a minimum value and maximum value, the given value is an evening
distributed random number between these two numbers (inclusive).</p>
</dd>
</dl>
<hr class="docutils" />
<p>To see a full list of built-in professions and jobs, you can run these commands:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>devel/query -table df.profession -listkeys
devel/query -table df.job_skill -listkeys
</pre></div>
</div>
</div>
<div class="section" id="drain-aquifer">
<span id="id41"></span><h2><a class="toc-backref" href="#id173">drain-aquifer</a><a class="headerlink" href="#drain-aquifer" title="Permalink to this headline">¶</a></h2>
<p>Remove all ‘aquifer’ tags from the map blocks. Irreversible.</p>
</div>
<div class="section" id="dwarf-op">
<span id="id42"></span><h2><a class="toc-backref" href="#id174">dwarf-op</a><a class="headerlink" href="#dwarf-op" title="Permalink to this headline">¶</a></h2>
<p>Dwarf optimization is a script designed to provide a robust solution
to hacking dwarves to be better at work. The primary use case is as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>take a dwarf</p></li>
<li><p>delete their ability to do anything, even walk (job skills, phyiscal/mental attributes)</p></li>
<li><p>load the job distribution table from dorf_tables</p></li>
<li><p>update values in said table so the table accurately represents the distribution of your dwarves</p></li>
<li><p>pick an under-represented job from the table</p></li>
<li><p>apply the job to the dwarf, which means:</p>
<ul class="simple">
<li><p>apply professions</p></li>
<li><p>provide custom profession name</p></li>
<li><p>add job skills</p></li>
<li><p>apply dwarf types</p></li>
<li><p>etc.</p></li>
</ul>
</li>
</ol>
</div></blockquote>
<p>Beyond this use case of optimizing dwarves according to the tables in
<a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a>, this script makes each step in the process available to use
separately, if you so choose.</p>
<p>There are two basic steps to using this script: selecting a subset of your dwarves,
and running commands on those dwarves.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dwarf-op -help
dwarf-op -select &lt;select-option&gt; -&lt;command&gt; &lt;args&gt;
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dwarf-op -select [ jobs Trader Miner Leader Rancher ] -applytype adaptable
dwarf-op -select all -clear -optimize
dwarf-op -select pall -clear -optimize
dwarf-op -select optimized -reroll
dwarf-op -select named -reroll inclusive -applyprofession RECRUIT
</pre></div>
</div>
<p><strong>Select options:</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prepend the letter <code class="docutils literal notranslate"><span class="pre">p</span></code> to any option to include protected dwarves in your selection</p>
</div>
<dl class="field-list">
<dt class="field-odd">(none)</dt>
<dd class="field-odd"><p>same as typing ‘-select highlighted’</p>
</dd>
<dt class="field-even">all</dt>
<dd class="field-even"><p>selects all dwarves.</p>
</dd>
<dt class="field-odd">highlighted</dt>
<dd class="field-odd"><p>selects only the in-game highlighted dwarf (from any screen).
[Ignores protection status]</p>
</dd>
<dt class="field-even">&lt;name&gt;</dt>
<dd class="field-even"><p>selects any dwarf with &lt;name&gt; in their name or nickname.
(sub-string match) [Ignores protection status]</p>
</dd>
<dt class="field-odd">named</dt>
<dd class="field-odd"><p>selects dwarves with user-given names.</p>
</dd>
<dt class="field-even">unnamed</dt>
<dd class="field-even"><p>selects dwarves without user-given names.</p>
</dd>
<dt class="field-odd">employed</dt>
<dd class="field-odd"><p>selects dwarves with custom professions. Excludes optimized dwarves.</p>
</dd>
<dt class="field-even">optimized</dt>
<dd class="field-even"><p>selects dwarves based on session data. Dwarves who have been
optimized should be listed in this data.</p>
</dd>
<dt class="field-odd">unoptimized</dt>
<dd class="field-odd"><p>selects any dwarves that don’t appear in session data.</p>
</dd>
<dt class="field-even">protected</dt>
<dd class="field-even"><p>selects any dwarves which use protection signals in their name
or profession. (i.e. <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">,</span></code>)</p>
</dd>
<dt class="field-odd">unprotected</dt>
<dd class="field-odd"><p>selects any dwarves which don’t use protection signals in their
name or profession.</p>
</dd>
<dt class="field-even">drunks</dt>
<dd class="field-even"><p>selects any dwarves which are currently zeroed, or were
originally drunks as their profession.</p>
</dd>
<dt class="field-odd">jobs</dt>
<dd class="field-odd"><p>selects any dwarves with the listed jobs. This will only match
with custom professions, or optimized dwarves (for optimized
dwarves see jobs in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a>).</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dwarf-op -select [ jobs job1 job2 etc. ]
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dwarf-op -select [ jobs Miner Trader ]
</pre></div>
</div>
</dd>
<dt class="field-even">waves</dt>
<dd class="field-even"><p>selects dwarves from the specified migration waves. Waves are
enumerated starting at 0 and increasing by 1 with each wave. The
waves go by season and year and thus should match what you see
in <a class="reference internal" href="#list-waves"><span class="std std-ref">list-waves</span></a> or Dwarf Therapist. It is recommended that you
<code class="docutils literal notranslate"><span class="pre">-show</span></code> the selected dwarves before modifying.</p>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>dwarf-op -select [ waves 0 1 3 5 7 13 ]
</pre></div>
</div>
</dd>
</dl>
<p><strong>General commands:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-reset</span></code>: deletes json file containing session data (bug: might not delete
session data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-resetall</span></code>: deletes both json files. session data and existing persistent
data (bug: might not delete session data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-show</span></code>: displays affected dwarves (id, name, migration wave, primary job).
Useful for previewing selected dwarves before modifying them, or looking up
the migration wave number for a group of dwarves.</p></li>
</ul>
<p><strong>Dwarf commands:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">clean</span> <span class="pre">&lt;value&gt;</span></code>:    Cleans selected dwarves.</dt><dd><p>Checks for skills with a rating of <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> and
deletes them from the dwarf’s skill list</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-clear</span></code>:           Zeroes selected dwarves, or zeroes all dwarves if no selection is given.</dt><dd><p>No attributes, no labours. Assigns <code class="docutils literal notranslate"><span class="pre">DRUNK</span></code> profession.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">-reroll</span> <span class="pre">[inclusive]</span></code>: zeroes selected dwarves, then rerolls that dwarf based on its job.</p>
<blockquote>
<div><ul class="simple">
<li><p>Ignores dwarves with unlisted jobs.</p></li>
<li><p>optional argument: <code class="docutils literal notranslate"><span class="pre">inclusive</span></code> - means your dorf(s) get the best of N rolls.</p></li>
<li><p>See attrib_levels table in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a> for <code class="docutils literal notranslate"><span class="pre">p</span></code> values describing the
normal distribution of stats (each p value has a sub-distribution, which
makes the bell curve not so bell-shaped). Labours do not follow the same
stat system and are more uniformly random, which are compensated for in
the description of jobs/professions.</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-optimize</span></code>:        Performs a job search for unoptimized dwarves.</dt><dd><p>Each dwarf will be found a job according to the
job_distribution table in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-applyjobs</span></code>:       Applies the listed jobs to the selected dwarves.</dt><dd><ul class="simple">
<li><p>List format: <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">job1</span> <span class="pre">job2</span> <span class="pre">jobn</span> <span class="pre">]</span></code> (brackets and jobs all separated by spaces)</p></li>
<li><p>See jobs table in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a> for available jobs.”</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-applyprofessions</span></code>: Applies the listed professions to the selected dwarves.</dt><dd><ul class="simple">
<li><p>List format: <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">prof1</span> <span class="pre">prof2</span> <span class="pre">profn</span> <span class="pre">]</span></code> (brackets and professions all separated by spaces)</p></li>
<li><p>See professions table in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a> for available professions.</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-applytypes</span></code>:      Applies the listed types to the selected dwarves.</dt><dd><ul class="simple">
<li><p>List format: <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">type1</span> <span class="pre">type2</span> <span class="pre">typen</span> <span class="pre">]</span></code> (brackets and types all separated by spaces)</p></li>
<li><p>See dwf_types table in <a class="reference internal" href="#dorf-tables"><span class="std std-ref">dorf_tables</span></a> for available types.</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">renamejob</span> <span class="pre">&lt;name&gt;</span></code>: Renames the selected dwarves’ custom profession to whatever is specified</p>
<p><strong>Other Arguments:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">-help</span></code>: displays this help information.</p>
<p><code class="docutils literal notranslate"><span class="pre">-debug</span></code>: enables debugging print lines</p>
</div>
<div class="section" id="elevate-mental">
<span id="id43"></span><h2><a class="toc-backref" href="#id175">elevate-mental</a><a class="headerlink" href="#elevate-mental" title="Permalink to this headline">¶</a></h2>
<p>Set all mental attributes of the selected dwarf to the maximum possible, or
any number numbers between 0 and 5000 passed as an argument:
<code class="docutils literal notranslate"><span class="pre">elevate-mental</span> <span class="pre">100</span></code> for example would make the dwarf very stupid indeed.</p>
</div>
<div class="section" id="elevate-physical">
<span id="id44"></span><h2><a class="toc-backref" href="#id176">elevate-physical</a><a class="headerlink" href="#elevate-physical" title="Permalink to this headline">¶</a></h2>
<p>Set all physical attributes of the selected dwarf to the maximum possible, or
any number numbers between 0 and 5000 passed as an argument.  Higher is
usually better, but an ineffective hammerer can be useful too…</p>
</div>
<div class="section" id="embark-skills">
<span id="id45"></span><h2><a class="toc-backref" href="#id177">embark-skills</a><a class="headerlink" href="#embark-skills" title="Permalink to this headline">¶</a></h2>
<p>Adjusts dwarves’ skills when embarking.</p>
<p>Note that already-used skill points are not taken into account or reset.</p>
<dl class="field-list simple">
<dt class="field-odd">points N</dt>
<dd class="field-odd"><p>Sets the skill points remaining of the selected dwarf to <code class="docutils literal notranslate"><span class="pre">N</span></code>.</p>
</dd>
<dt class="field-even">points N all</dt>
<dd class="field-even"><p>Sets the skill points remaining of all dwarves to <code class="docutils literal notranslate"><span class="pre">N</span></code>.</p>
</dd>
<dt class="field-odd">max</dt>
<dd class="field-odd"><p>Sets all skills of the selected dwarf to “Proficient”.</p>
</dd>
<dt class="field-even">max all</dt>
<dd class="field-even"><p>Sets all skills of all dwarves to “Proficient”.</p>
</dd>
<dt class="field-odd">legendary</dt>
<dd class="field-odd"><p>Sets all skills of the selected dwarf to “Legendary”.</p>
</dd>
<dt class="field-even">legendary all</dt>
<dd class="field-even"><p>Sets all skills of all dwarves to “Legendary”.</p>
</dd>
</dl>
</div>
<div class="section" id="emigration">
<span id="id46"></span><h2><a class="toc-backref" href="#id178">emigration</a><a class="headerlink" href="#emigration" title="Permalink to this headline">¶</a></h2>
<p>Allows dwarves to emigrate from the fortress when stressed,
in proportion to how badly stressed they are and adjusted
for who they would have to leave with - a dwarven merchant
being more attractive than leaving alone (or with an elf).
The check is made monthly.</p>
<p>A happy dwarf (ie with negative stress) will never emigrate.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>emigration enable|disable
</pre></div>
</div>
</div>
<div class="section" id="empty-bin">
<span id="id47"></span><h2><a class="toc-backref" href="#id179">empty-bin</a><a class="headerlink" href="#empty-bin" title="Permalink to this headline">¶</a></h2>
<p>Empties the contents of the selected bin onto the floor.</p>
</div>
<div class="section" id="exportlegends">
<span id="id48"></span><h2><a class="toc-backref" href="#id180">exportlegends</a><a class="headerlink" href="#exportlegends" title="Permalink to this headline">¶</a></h2>
<p>Controls legends mode to export data - especially useful to set-and-forget large
worlds, or when you want a map of every site when there are several hundred.</p>
<p>The ‘info’ option exports more data than is possible in vanilla, to a
<code class="file docutils literal notranslate"><span class="pre">region-date-legends_plus.xml</span></code> file developed to extend
<a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=128932">World Viewer</a> and other legends utilities.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exportlegends OPTION [FOLDER_NAME]
</pre></div>
</div>
<p>Valid values for <code class="docutils literal notranslate"><span class="pre">OPTION</span></code> are:</p>
<dl class="field-list simple">
<dt class="field-odd">info</dt>
<dd class="field-odd"><p>Exports the world/gen info, the legends XML, and a custom XML with more information</p>
</dd>
<dt class="field-even">custom</dt>
<dd class="field-even"><p>Exports a custom XML with more information</p>
</dd>
<dt class="field-odd">sites</dt>
<dd class="field-odd"><p>Exports all available site maps</p>
</dd>
<dt class="field-even">maps</dt>
<dd class="field-even"><p>Exports all seventeen detailed maps</p>
</dd>
<dt class="field-odd">all</dt>
<dd class="field-odd"><p>Equivalent to calling all of the above, in that order</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">FOLDER_NAME</span></code>, if specified, is the name of the folder where all the files
will be saved. This defaults to the <code class="docutils literal notranslate"><span class="pre">legends-regionX-YYYYY-MM-DD</span></code> format. A path is
also allowed, although everything but the last folder has to exist. To export
to the top-level DF folder, pass <code class="docutils literal notranslate"><span class="pre">.</span></code> for this argument.</p>
<p>Examples:</p>
<ul>
<li><p>Export all information to the <code class="docutils literal notranslate"><span class="pre">legends-regionX-YYYYY-MM-DD</span></code> folder:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exportlegends all
</pre></div>
</div>
</li>
<li><p>Export all information to the <code class="docutils literal notranslate"><span class="pre">region6</span></code> folder:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exportlegends all region6
</pre></div>
</div>
</li>
<li><p>Export just the files included in <code class="docutils literal notranslate"><span class="pre">info</span></code> (above) to the <code class="docutils literal notranslate"><span class="pre">legends-regionX-YYYYY-MM-DD</span></code> folder:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exportlegends info
</pre></div>
</div>
</li>
<li><p>Export just the custom XML file to the DF folder (no subfolder):</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exportlegends custom .
</pre></div>
</div>
</li>
</ul>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">A</span><span> -&gt; </span><code class="guilabel docutils literal notranslate"><span class="pre">&quot;exportlegends</span> <span class="pre">all&quot;</span></code><span> in </span><code class="docutils literal notranslate"><span class="pre">legends</span></code></p>
</p>
</p>
</div>
<div class="section" id="exterminate">
<span id="id49"></span><h2><a class="toc-backref" href="#id181">exterminate</a><a class="headerlink" href="#exterminate" title="Permalink to this headline">¶</a></h2>
<p>Kills any unit of a given race.</p>
<p>With no argument, lists the available races and count eligible targets.</p>
<p>With the special argument <code class="docutils literal notranslate"><span class="pre">this</span></code>, targets only the selected creature.
Alternatively, <code class="docutils literal notranslate"><span class="pre">him</span></code>, <code class="docutils literal notranslate"><span class="pre">her</span></code>, <code class="docutils literal notranslate"><span class="pre">it</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, and <code class="docutils literal notranslate"><span class="pre">selected</span></code>
do the same thing.</p>
<p>With the special argument <code class="docutils literal notranslate"><span class="pre">undead</span></code>, targets all undeads on the map,
regardless of their race.</p>
<p>When specifying a race, a caste can be specified to further restrict the
targeting. To do that, append and colon and the caste name after the race.</p>
<p>Any non-dead non-caged unit of the specified race gets its <code class="docutils literal notranslate"><span class="pre">blood_count</span></code>
set to 0, which means immediate death at the next game tick. For creatures
such as vampires, it also sets animal.vanish_countdown to 2.</p>
<p>An alternate mode is selected by adding a 2nd argument to the command,
<code class="docutils literal notranslate"><span class="pre">magma</span></code>. In this case, a column of 7/7 magma is generated on top of the
targets until they die (Warning: do not call on magma-safe creatures. Also,
using this mode on birds is not recommended.)  The final alternate mode
is <code class="docutils literal notranslate"><span class="pre">butcher</span></code>, which marks them for butchering but does not kill.</p>
<p>Will target any unit on a revealed tile of the map, including ambushers,
but ignore caged/chained creatures.</p>
<p>Ex:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exterminate gob
exterminate gob:male
exterminate gob:enemy
</pre></div>
</div>
<p>To kill a single creature, select the unit with the ‘v’ cursor and:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exterminate this
</pre></div>
</div>
<p>To purify all elves on the map with fire (may have side-effects):</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>exterminate elve magma
</pre></div>
</div>
</div>
<div class="section" id="extinguish">
<span id="id50"></span><h2><a class="toc-backref" href="#id182">extinguish</a><a class="headerlink" href="#extinguish" title="Permalink to this headline">¶</a></h2>
<p>This script allows the user to put out fires affecting
map tiles, plants, units, items and buildings.</p>
<p>To select a target, place the cursor over it before running the script.
Alternatively, use one of the arguments below.</p>
<p>Arguments:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>-all
    extinguish everything on the map

-location [ x y z ]
    extinguish only at the specified coordinates
</pre></div>
</div>
</div>
<div class="section" id="feature">
<span id="id51"></span><h2><a class="toc-backref" href="#id183">feature</a><a class="headerlink" href="#feature" title="Permalink to this headline">¶</a></h2>
<p>Enables management of map features.</p>
<ul class="simple">
<li><p>Discovering a magma feature (magma pool, volcano, magma sea, or curious
underground structure) permits magma workshops and furnaces to be built.</p></li>
<li><p>Discovering a cavern layer causes plants (trees, shrubs, and grass) from
that cavern to grow within your fortress.</p></li>
</ul>
<p>Options:</p>
<dl class="field-list simple">
<dt class="field-odd">list</dt>
<dd class="field-odd"><p>Lists all map features in your current embark by index.</p>
</dd>
<dt class="field-even">magma</dt>
<dd class="field-even"><p>Enable magma furnaces (discovers a random magma feature).</p>
</dd>
<dt class="field-odd">show X</dt>
<dd class="field-odd"><p>Marks the selected map feature as discovered.</p>
</dd>
<dt class="field-even">hide X</dt>
<dd class="field-even"><p>Marks the selected map feature as undiscovered.</p>
</dd>
</dl>
</div>
<div class="section" id="fillneeds">
<span id="id52"></span><h2><a class="toc-backref" href="#id184">fillneeds</a><a class="headerlink" href="#fillneeds" title="Permalink to this headline">¶</a></h2>
<p>Use with a unit selected to make them focused and unstressed.</p>
<p>Alternatively, a unit can be specified by passing <code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">UNIT_ID</span></code></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">-all</span></code> to apply to all units on the map.</p>
</div>
<div class="section" id="firestarter">
<span id="id53"></span><h2><a class="toc-backref" href="#id185">firestarter</a><a class="headerlink" href="#firestarter" title="Permalink to this headline">¶</a></h2>
<p>Lights things on fire: items, locations, entire inventories even! Use while
viewing an item, unit inventory, or tile to start fires.</p>
</div>
<div class="section" id="fix-ster">
<span id="id54"></span><h2><a class="toc-backref" href="#id186">fix-ster</a><a class="headerlink" href="#fix-ster" title="Permalink to this headline">¶</a></h2>
<p>Utilizes the orientation tag to either fix infertile creatures or inflict
infertility on creatures that you do not want to breed.  Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>fix-ster [fert|ster] [all|animals|only:&lt;creature&gt;]
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fert</span></code> or <code class="docutils literal notranslate"><span class="pre">ster</span></code> is a required argument; whether to make the target fertile
or sterile.  Optional arguments specify the target: no argument for the
selected unit, <code class="docutils literal notranslate"><span class="pre">all</span></code> for all units on the map, <code class="docutils literal notranslate"><span class="pre">animals</span></code> for all non-dwarf
creatures, or <code class="docutils literal notranslate"><span class="pre">only:&lt;creature&gt;</span></code> to only process matching creatures.</p>
</div>
<div class="section" id="fixnaked">
<span id="id55"></span><h2><a class="toc-backref" href="#id187">fixnaked</a><a class="headerlink" href="#fixnaked" title="Permalink to this headline">¶</a></h2>
<p>Removes all unhappy thoughts due to lack of clothing.</p>
</div>
<div class="section" id="flashstep">
<span id="id56"></span><h2><a class="toc-backref" href="#id188">flashstep</a><a class="headerlink" href="#flashstep" title="Permalink to this headline">¶</a></h2>
<p>A hotkey-friendly teleport that places your adventurer where your cursor is.</p>
</div>
<div class="section" id="force">
<span id="id57"></span><h2><a class="toc-backref" href="#id189">force</a><a class="headerlink" href="#force" title="Permalink to this headline">¶</a></h2>
<p>A simpler wrapper around the <a class="reference internal" href="modtools.html#modtools-force"><span class="std std-ref">modtools/force</span></a> script.</p>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">force</span> <span class="pre">event_type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force</span> <span class="pre">event_type</span> <span class="pre">civ_id</span></code> - civ ID required for <code class="docutils literal notranslate"><span class="pre">Diplomat</span></code> and <code class="docutils literal notranslate"><span class="pre">Caravan</span></code>
events</p></li>
</ul>
<p>See <a class="reference internal" href="modtools.html#modtools-force"><span class="std std-ref">modtools/force</span></a> for a complete list of event types.</p>
</div>
<div class="section" id="forget-dead-body">
<span id="id58"></span><h2><a class="toc-backref" href="#id190">forget-dead-body</a><a class="headerlink" href="#forget-dead-body" title="Permalink to this headline">¶</a></h2>
<p>Removes emotions associated with seeing a dead body.</p>
</div>
<div class="section" id="forum-dwarves">
<span id="id59"></span><h2><a class="toc-backref" href="#id191">forum-dwarves</a><a class="headerlink" href="#forum-dwarves" title="Permalink to this headline">¶</a></h2>
<p>Saves a copy of a text screen, formatted in bbcode for posting to the
Bay12 Forums.  See <a class="reference internal" href="#markdown"><span class="std std-ref">markdown</span></a> to export for Reddit etc.</p>
<p>This script will attempt to read the current df-screen, and if it is a
text-viewscreen (such as the dwarf ‘thoughts’ screen or an item
‘description’) then append a marked-up version of this text to the
target file. Previous entries in the file are not overwritten, so you
may use the ‘forumdwarves’ command multiple times to create a single
document containing the text from multiple screens (eg: text screens
from several dwarves, or text screens from multiple artifacts/items,
or some combination).</p>
<p>The screens which have been tested and known to function properly with
this script are:</p>
<ol class="arabic simple">
<li><p>dwarf/unit ‘thoughts’ screen</p></li>
<li><p>item/art ‘description’ screen</p></li>
<li><p>individual ‘historical item/figure’ screens</p></li>
</ol>
<p>There may be other screens to which the script applies.  It should be
safe to attempt running the script with any screen active, with an
error message to inform you when the selected screen is not appropriate
for this script.</p>
<p>The target file’s name is ‘forumdwarves.txt’.  A reminder to this effect
will be displayed if the script is successful.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The text will be encoded in CP437, which is likely to be incompatible
with the system default.  This causes incorrect display of special
characters (eg. <span class="guilabel">é õ ç</span> = <code class="docutils literal notranslate"><span class="pre">é</span> <span class="pre">õ</span> <span class="pre">ç</span></code>).  You can fix this by
opening the file in an editor such as Notepad++ and selecting the
correct encoding before using the text.</p>
</div>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">Shift</span><span class="kbd">F</span><span> in </span><code class="docutils literal notranslate"><span class="pre">dwarfmode</span></code></p>
</p>
</p>
</div>
<div class="section" id="full-heal">
<span id="id60"></span><h2><a class="toc-backref" href="#id192">full-heal</a><a class="headerlink" href="#full-heal" title="Permalink to this headline">¶</a></h2>
<p>Attempts to fully heal the selected unit from anything, optionally
including death.  Usage:</p>
<dl class="field-list simple">
<dt class="field-odd">full-heal</dt>
<dd class="field-odd"><p>Completely heal the currently selected unit.</p>
</dd>
<dt class="field-even">full-heal -unit [unitId]</dt>
<dd class="field-even"><p>Apply command to the unit with the given ID, instead of selected unit.</p>
</dd>
<dt class="field-odd">full-heal -r [-keep_corpse]</dt>
<dd class="field-odd"><p>Heal the unit, raising from the dead if needed.
Add <code class="docutils literal notranslate"><span class="pre">-keep_corpse</span></code> to avoid removing their corpse.
The unit can be targeted by selecting its corpse on the UI.</p>
</dd>
<dt class="field-even">full-heal -all [-r] [-keep_corpse]</dt>
<dd class="field-even"><p>Heal all units on the map.</p>
</dd>
<dt class="field-odd">full-heal -all_citizens [-r] [-keep_corpse]</dt>
<dd class="field-odd"><p>Heal all fortress citizens on the map. Does not include pets.</p>
</dd>
<dt class="field-even">full-heal -all_civ [-r] [-keep_corpse]</dt>
<dd class="field-even"><p>Heal all units belonging to your parent civilisation, including pets and visitors.</p>
</dd>
</dl>
<p>For example, <code class="docutils literal notranslate"><span class="pre">full-heal</span> <span class="pre">-r</span> <span class="pre">-keep_corpse</span> <span class="pre">-unit</span> <span class="pre">ID_NUM</span></code> will fully heal
unit ID_NUM.  If this unit was dead, it will be resurrected without deleting
the corpse - creepy!</p>
</div>
<div class="section" id="gaydar">
<span id="id61"></span><h2><a class="toc-backref" href="#id193">gaydar</a><a class="headerlink" href="#gaydar" title="Permalink to this headline">¶</a></h2>
<p>Shows the sexual orientation of units, useful for social engineering or checking
the viability of livestock breeding programs.</p>
<p>Targets:</p>
<dl class="field-list simple">
<dt class="field-odd">-all</dt>
<dd class="field-odd"><p>shows orientation of every creature</p>
</dd>
<dt class="field-even">-citizens</dt>
<dd class="field-even"><p>shows only orientation of citizens in fort mode</p>
</dd>
<dt class="field-odd">-named</dt>
<dd class="field-odd"><p>shows orientation of all named units on map</p>
</dd>
<dt class="field-even">(no target)</dt>
<dd class="field-even"><p>shows orientation of the unit under the cursor</p>
</dd>
</dl>
<p>Orientation filters:</p>
<dl class="field-list simple">
<dt class="field-odd">-notStraight</dt>
<dd class="field-odd"><p>only creatures who are not strictly straight</p>
</dd>
<dt class="field-even">-gayOnly</dt>
<dd class="field-even"><p>only creatures who are strictly gay</p>
</dd>
<dt class="field-odd">-biOnly</dt>
<dd class="field-odd"><p>only creatures who can get into romances with both sexes</p>
</dd>
<dt class="field-even">-straightOnly</dt>
<dd class="field-even"><p>only creatures who are strictly straight</p>
</dd>
<dt class="field-odd">-asexualOnly</dt>
<dd class="field-odd"><p>only creatures who are strictly asexual</p>
</dd>
</dl>
</div>
<div class="section" id="geld">
<span id="id62"></span><h2><a class="toc-backref" href="#id194">geld</a><a class="headerlink" href="#geld" title="Permalink to this headline">¶</a></h2>
<p>Geld allows the user to geld and ungeld animals.</p>
<p>Valid options:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;id&gt;</span></code>: Gelds the unit with the specified ID.</dt><dd><p>This is optional; if not specified, the selected unit is used instead.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">-ungeld</span></code>:    Ungelds the specified unit instead (see also <a class="reference internal" href="#ungeld"><span class="std std-ref">ungeld</span></a>).</p>
<p><code class="docutils literal notranslate"><span class="pre">-toggle</span></code>:    Toggles the gelded status of the specified unit.</p>
<p><code class="docutils literal notranslate"><span class="pre">-help</span></code>:      Shows this help information</p>
</div>
<div class="section" id="ghostly">
<span id="id63"></span><h2><a class="toc-backref" href="#id195">ghostly</a><a class="headerlink" href="#ghostly" title="Permalink to this headline">¶</a></h2>
<p>Toggles an adventurer’s ghost status. Useful for walking through walls, avoiding
attacks, or recovering after a death.</p>
</div>
<div class="section" id="growcrops">
<span id="id64"></span><h2><a class="toc-backref" href="#id196">growcrops</a><a class="headerlink" href="#growcrops" title="Permalink to this headline">¶</a></h2>
<p>Instantly grow seeds inside farming plots.</p>
<p>With no argument, this command list the various seed types
currently in use in your farming plots. With a seed type,
the script will grow specified seeds, ready to be harvested.</p>
<p>Arguments:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">help</span></code></dt><dd><p>List the various seed types currently in use in your farming plots</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;crop</span> <span class="pre">name&gt;</span></code></dt><dd><p>Grow specific planted seed type</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt><dd><p>Grow all planted seeds</p>
</dd>
</dl>
</li>
</ul>
<p>Example:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Grow plump helmet spawn:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">growcrops</span> <span class="pre">plump</span></code></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="hermit">
<span id="id65"></span><h2><a class="toc-backref" href="#id197">hermit</a><a class="headerlink" href="#hermit" title="Permalink to this headline">¶</a></h2>
<p>Blocks all caravans, migrants, diplomats, and forgotten beasts (not wildlife).
Useful for attempting the <a class="reference external" href="http://dwarffortresswiki.org/index.php/DF2014:Playstyle_challenge#Hermit">hermit challenge</a>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">enable</span></code> or <code class="docutils literal notranslate"><span class="pre">disable</span></code> to enable/disable, or <code class="docutils literal notranslate"><span class="pre">help</span></code> for this help.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This does not block sieges, and may not block visitors or monarchs.</p>
</div>
</div>
<div class="section" id="hfs-pit">
<span id="id66"></span><h2><a class="toc-backref" href="#id198">hfs-pit</a><a class="headerlink" href="#hfs-pit" title="Permalink to this headline">¶</a></h2>
<p>Creates a pit to the underworld at the cursor, taking three numbers as
arguments.  Usage:  <code class="docutils literal notranslate"><span class="pre">hfs-pit</span> <span class="pre">&lt;size&gt;</span> <span class="pre">&lt;walls&gt;</span> <span class="pre">&lt;stairs&gt;</span></code></p>
<p>The first argument is size of the (square) pit in all directions.  The second
is <code class="docutils literal notranslate"><span class="pre">1</span></code> to wall off the sides of the pit on all layers except the underworld,
or anything else to leave them open.  The third parameter is 1 to add stairs.
Stairs are buggy; they will not reveal the bottom until you dig somewhere,
but underworld creatures will path in.</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>hfs-pit 1 0 0
    A single-tile wide pit with no walls or stairs.
    This is the default if no numbers are given.

hfs-pit 4 0 1
    A four-across pit with no stairs but adding walls.

hfs-pit 2 1 0
    A two-across pit with stairs but no walls.
</pre></div>
</div>
</div>
<div class="section" id="hotkey-notes">
<span id="id67"></span><h2><a class="toc-backref" href="#id199">hotkey-notes</a><a class="headerlink" href="#hotkey-notes" title="Permalink to this headline">¶</a></h2>
<p>Lists the key, name, and jump position of your hotkeys in the DFHack console.</p>
</div>
<div class="section" id="install-info">
<span id="id68"></span><h2><a class="toc-backref" href="#id200">install-info</a><a class="headerlink" href="#install-info" title="Permalink to this headline">¶</a></h2>
<p>Saves information about the current DFHack installation to <code class="docutils literal notranslate"><span class="pre">install-info.txt</span></code>
in the current DF folder. Useful for bug reports.</p>
</div>
<div class="section" id="item-descriptions">
<span id="id69"></span><h2><a class="toc-backref" href="#id201">item-descriptions</a><a class="headerlink" href="#item-descriptions" title="Permalink to this headline">¶</a></h2>
<p>Exports a table with custom description text for every item in the game.
Used by <a class="reference internal" href="#view-item-info"><span class="std std-ref">view-item-info</span></a>; see instructions there for how to override
for mods.</p>
</div>
<div class="section" id="launch">
<span id="id70"></span><h2><a class="toc-backref" href="#id202">launch</a><a class="headerlink" href="#launch" title="Permalink to this headline">¶</a></h2>
<p>Activate with a cursor on screen and you will go there rapidly. Attack
something first to ride them there.</p>
</div>
<div class="section" id="lever">
<span id="id71"></span><h2><a class="toc-backref" href="#id203">lever</a><a class="headerlink" href="#lever" title="Permalink to this headline">¶</a></h2>
<p>Allow manipulation of in-game levers from the dfhack console.</p>
<p>Can list levers, including state and links, with:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>lever list
</pre></div>
</div>
<p>To queue a job so that a dwarf will pull the lever 42, use <code class="docutils literal notranslate"><span class="pre">lever</span> <span class="pre">pull</span> <span class="pre">42</span></code>.
This is the same as <kbd class="kbd docutils literal notranslate">q</kbd> querying the building and queue a <kbd class="kbd docutils literal notranslate">P</kbd> pull request.</p>
<p>To queue a job at high priority, add <code class="docutils literal notranslate"><span class="pre">--high</span></code> or <code class="docutils literal notranslate"><span class="pre">--priority</span></code>:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>lever pull 42 --high
</pre></div>
</div>
<p>To magically toggle the lever immediately, add <code class="docutils literal notranslate"><span class="pre">--now</span></code> or <code class="docutils literal notranslate"><span class="pre">--cheat</span></code>:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>lever pull 42 --now
</pre></div>
</div>
</div>
<div class="section" id="light-aquifers-only">
<span id="id72"></span><h2><a class="toc-backref" href="#id204">light-aquifers-only</a><a class="headerlink" href="#light-aquifers-only" title="Permalink to this headline">¶</a></h2>
<p>This script behaves differently depending on whether it’s called pre embark or post
embark. Pre embark it changes all aquifers in the world to light ones, while post
embark it only changes the ones at the embark to light ones, leaving the rest of the
world unchanged.</p>
<p>Pre embark:
Changes the Drainage of all world tiles that would generate Heavy aquifers into
a value that results in Light aquifers instead.</p>
<p>This script is based on logic revealed by ToadyOne in a FotF answer:
<a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=169696.msg8099138#msg8099138">http://www.bay12forums.com/smf/index.php?topic=169696.msg8099138#msg8099138</a>
Basically the Drainage is used as an “RNG” to cause an aquifer to be heavy
about 5% of the time. The script shifts the matching numbers to a neighboring
one, which does not result in any change of the biome.</p>
<p>Post embark:
Clears the flags that mark aquifer tiles as heavy, converting them to light.</p>
</div>
<div class="section" id="linger">
<span id="id73"></span><h2><a class="toc-backref" href="#id205">linger</a><a class="headerlink" href="#linger" title="Permalink to this headline">¶</a></h2>
<p>Enables the player to take control of their adventurer’s killer.
Run this script after being presented with “You are deceased.”</p>
<p>The killer is identified by examining the historical event
generated when the adventurer died. If this is unsuccessful,
the killer is assumed to be the last unit to have attacked the
adventurer prior to their death.</p>
<p>This will fail if the unit in question is no longer present
on the local map.</p>
<p>(Adventure mode only!)</p>
</div>
<div class="section" id="list-agreements">
<span id="id74"></span><h2><a class="toc-backref" href="#id206">list-agreements</a><a class="headerlink" href="#list-agreements" title="Permalink to this headline">¶</a></h2>
<p>Lists all guildhall and temple agreements in fortress mode.</p>
</div>
<div class="section" id="list-waves">
<span id="id75"></span><h2><a class="toc-backref" href="#id207">list-waves</a><a class="headerlink" href="#list-waves" title="Permalink to this headline">¶</a></h2>
<p>This script displays information about migration waves of the specified citizen(s).</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>list-waves -all -showarrival -granularity days
list-waves -all -showarrival
list-waves -unit -granularity days
list-waves -unit
list-waves -unit -all -showarrival -granularity days
</pre></div>
</div>
<p><strong>Selection options:</strong></p>
<p>These options are used to specify what wave information to display</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span></code>:</dt><dd><p>Displays the highlighted unit’s arrival wave information</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-all</span></code>:</dt><dd><p>Displays all citizens’ arrival wave information</p>
</dd>
</dl>
<p><strong>Other options:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-granularity</span> <span class="pre">&lt;value&gt;</span></code>:</dt><dd><p>Specifies the granularity of wave enumeration: <code class="docutils literal notranslate"><span class="pre">years</span></code>, <code class="docutils literal notranslate"><span class="pre">seasons</span></code>, <code class="docutils literal notranslate"><span class="pre">months</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code>
If omitted, the default granularity is <code class="docutils literal notranslate"><span class="pre">seasons</span></code>, the same as Dwarf Therapist</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-showarrival</span></code>:</dt><dd><p>Shows the arrival information for the selected unit.
If <code class="docutils literal notranslate"><span class="pre">-all</span></code> is specified the info displayed will be relative to the
granularity used. Note: this option is always used when <code class="docutils literal notranslate"><span class="pre">-unit</span></code> is used.</p>
</dd>
</dl>
</div>
<div class="section" id="load-save">
<span id="id76"></span><h2><a class="toc-backref" href="#id208">load-save</a><a class="headerlink" href="#load-save" title="Permalink to this headline">¶</a></h2>
<p>When run on the title screen or “load game” screen, loads the save with the
given folder name without requiring interaction. Note that inactive saves (i.e.
saves under the “start game” menu) are currently not supported.</p>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>load-save region1
</pre></div>
</div>
<p>This can also be run when starting DFHack from the command line. For example,
on Linux/macOS:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>./dfhack +load-save region1
</pre></div>
</div>
</div>
<div class="section" id="locate-ore">
<span id="id77"></span><h2><a class="toc-backref" href="#id209">locate-ore</a><a class="headerlink" href="#locate-ore" title="Permalink to this headline">¶</a></h2>
<p>Scan the map for metal ores.</p>
<p>Finds and designate for digging one tile of a specific metal ore.
Only works for native metal ores, does not handle reaction stuff (eg STEEL).</p>
<p>When invoked with the <code class="docutils literal notranslate"><span class="pre">list</span></code> argument, lists metal ores available on the map.</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>locate-ore list
locate-ore hematite
locate-ore iron
</pre></div>
</div>
</div>
<div class="section" id="lua">
<span id="id78"></span><h2><a class="toc-backref" href="#id210">lua</a><a class="headerlink" href="#lua" title="Permalink to this headline">¶</a></h2>
<p>There are the following ways to invoke this command:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">lua</span></code> (without any parameters)</p>
<p>This starts an interactive lua interpreter.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lua</span> <span class="pre">-f</span> <span class="pre">&quot;filename&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">lua</span> <span class="pre">--file</span> <span class="pre">&quot;filename&quot;</span></code></p>
<p>This loads and runs the file indicated by filename.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lua</span> <span class="pre">-s</span> <span class="pre">[&quot;filename&quot;]</span></code> or <code class="docutils literal notranslate"><span class="pre">lua</span> <span class="pre">--save</span> <span class="pre">[&quot;filename&quot;]</span></code></p>
<p>This loads and runs the file indicated by filename from the save
directory. If the filename is not supplied, it loads “dfhack.lua”.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">:lua</span></code> <em>lua statement…</em></p>
<p>Parses and executes the lua statement like the interactive interpreter would.</p>
</li>
</ol>
</div>
<div class="section" id="make-legendary">
<span id="id79"></span><h2><a class="toc-backref" href="#id211">make-legendary</a><a class="headerlink" href="#make-legendary" title="Permalink to this headline">¶</a></h2>
<p>Makes the selected dwarf legendary in one skill, a group of skills, or all
skills.  View groups with <code class="docutils literal notranslate"><span class="pre">make-legendary</span> <span class="pre">classes</span></code>, or all skills with
<code class="docutils literal notranslate"><span class="pre">make-legendary</span> <span class="pre">list</span></code>.  Use <code class="docutils literal notranslate"><span class="pre">make-legendary</span> <span class="pre">MINING</span></code> when you need something
dug up, or <code class="docutils literal notranslate"><span class="pre">make-legendary</span> <span class="pre">all</span></code> when only perfection will do.</p>
</div>
<div class="section" id="make-monarch">
<span id="id80"></span><h2><a class="toc-backref" href="#id212">make-monarch</a><a class="headerlink" href="#make-monarch" title="Permalink to this headline">¶</a></h2>
<p>Make the selected unit King or Queen of your civilisation.</p>
</div>
<div class="section" id="markdown">
<span id="id81"></span><h2><a class="toc-backref" href="#id213">markdown</a><a class="headerlink" href="#markdown" title="Permalink to this headline">¶</a></h2>
<p>Save a copy of a text screen in markdown (useful for Reddit, among other sites).
See <a class="reference internal" href="#forum-dwarves"><span class="std std-ref">forum-dwarves</span></a> for BBCode export (for e.g. the Bay12 Forums).</p>
<p>This script will attempt to read the current df-screen, and if it is a
text-viewscreen (such as the dwarf ‘thoughts’ screen or an item / creature
‘description’) or an announcement list screen (such as announcements and
combat reports) then append a marked-down version of this text to the
target file (for easy pasting on reddit for example).
Previous entries in the file are not overwritten, so you
may use the``markdown`` command multiple times to create a single
document containing the text from multiple screens (eg: text screens
from several dwarves, or text screens from multiple artifacts/items,
or some combination).</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>markdown [-n] [filename]
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">-n</dt>
<dd class="field-odd"><p>overwrites contents of output file</p>
</dd>
<dt class="field-even">filename</dt>
<dd class="field-even"><p>if provided, save to <code class="file docutils literal notranslate"><span class="pre">md_</span><em><span class="pre">filename</span></em><span class="pre">.md</span></code> instead
of the default <code class="file docutils literal notranslate"><span class="pre">md_export.md</span></code></p>
</dd>
</dl>
<p>The screens which have been tested and known to function properly with
this script are:</p>
<ol class="arabic simple">
<li><p>dwarf/unit ‘thoughts’ screen</p></li>
<li><p>item/art ‘description’ screen</p></li>
<li><p>individual ‘historical item/figure’ screens</p></li>
<li><p>manual</p></li>
<li><p>announements screen</p></li>
<li><p>combat reports screen</p></li>
<li><p>latest news (when meeting with liaison)</p></li>
</ol>
<p>There may be other screens to which the script applies.  It should be
safe to attempt running the script with any screen active, with an
error message to inform you when the selected screen is not appropriate
for this script.</p>
</div>
<div class="section" id="masspit">
<span id="id82"></span><h2><a class="toc-backref" href="#id214">masspit</a><a class="headerlink" href="#masspit" title="Permalink to this headline">¶</a></h2>
<p>Designate all creatures in cages on top of a pit/pond activity zone for pitting.
Works best with an animal stockpile on top of the zone.</p>
<p>Works with a zone number as argument (eg <code class="docutils literal notranslate"><span class="pre">Activity</span> <span class="pre">Zone</span> <span class="pre">#6</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">masspit</span> <span class="pre">6</span></code>)
or with the game cursor on top of the area.</p>
</div>
<div class="section" id="migrants-now">
<span id="id83"></span><h2><a class="toc-backref" href="#id215">migrants-now</a><a class="headerlink" href="#migrants-now" title="Permalink to this headline">¶</a></h2>
<p>Forces an immediate migrant wave. Only works after migrants have
arrived naturally. Roughly equivalent to <a class="reference internal" href="modtools.html#modtools-force"><span class="std std-ref">modtools/force</span></a> with:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>modtools/force -eventType migrants
</pre></div>
</div>
</div>
<div class="section" id="multicmd">
<span id="id84"></span><h2><a class="toc-backref" href="#id216">multicmd</a><a class="headerlink" href="#multicmd" title="Permalink to this headline">¶</a></h2>
<p>Run multiple dfhack commands. The argument is split around the
character ; and all parts are run sequentially as independent
dfhack commands. Useful for hotkeys.</p>
<p>Example:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>multicmd locate-ore IRON ; digv ; digcircle 16
</pre></div>
</div>
</div>
<div class="section" id="names">
<span id="id85"></span><h2><a class="toc-backref" href="#id217">names</a><a class="headerlink" href="#names" title="Permalink to this headline">¶</a></h2>
<p>Rename units or items (including artifacts) with the native interface.
If a first name is desired, press <code class="docutils literal notranslate"><span class="pre">f</span></code>. To clear the current first name,
leave this blank.</p>
</div>
<div class="section" id="on-new-fortress">
<span id="id86"></span><h2><a class="toc-backref" href="#id218">on-new-fortress</a><a class="headerlink" href="#on-new-fortress" title="Permalink to this headline">¶</a></h2>
<p>Runs commands like <a class="reference internal" href="#multicmd"><span class="std std-ref">multicmd</span></a>, but only in a newborn fortress.</p>
<p>Use this in <code class="docutils literal notranslate"><span class="pre">onMapLoad.init</span></code> with f.e. <a class="reference internal" href="#ban-cooking"><span class="std std-ref">ban-cooking</span></a>:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>on-new-fortress ban-cooking tallow; ban-cooking honey; ban-cooking oil; ban-cooking seeds; ban-cooking brew; ban-cooking fruit; ban-cooking mill; ban-cooking thread; ban-cooking milk;
on-new-fortress 3dveins
</pre></div>
</div>
</div>
<div class="section" id="once-per-save">
<span id="id87"></span><h2><a class="toc-backref" href="#id219">once-per-save</a><a class="headerlink" href="#once-per-save" title="Permalink to this headline">¶</a></h2>
<p>Runs commands like <a class="reference internal" href="#multicmd"><span class="std std-ref">multicmd</span></a>, but only unless
not already ran once in current save. You may actually
want <a class="reference internal" href="#on-new-fortress"><span class="std std-ref">on-new-fortress</span></a>.</p>
<p>Only successfully ran commands are saved.</p>
<p>Parameters:</p>
<dl class="option-list">
<dt><kbd><span class="option">--help</span></kbd></dt>
<dd><p>display this help</p>
</dd>
<dt><kbd><span class="option">--rerun <var>commands</var></span></kbd></dt>
<dd><p>ignore saved commands</p>
</dd>
<dt><kbd><span class="option">--reset</span></kbd></dt>
<dd><p>deletes saved commands</p>
</dd>
</dl>
</div>
<div class="section" id="open-legends">
<span id="id88"></span><h2><a class="toc-backref" href="#id220">open-legends</a><a class="headerlink" href="#open-legends" title="Permalink to this headline">¶</a></h2>
<p>Open a legends screen when in fortress mode. Requires a world loaded in fortress
or adventure mode. Compatible with <a class="reference internal" href="#exportlegends"><span class="std std-ref">exportlegends</span></a>.</p>
<p>Note that this script carries a significant risk of save corruption if the game
is saved after exiting legends mode. To avoid this:</p>
<ol class="arabic simple">
<li><p>Pause DF</p></li>
<li><p>Run <a class="reference internal" href="#quicksave"><span class="std std-ref">quicksave</span></a> to save the game</p></li>
<li><p>Run <a class="reference internal" href="#open-legends"><span class="std std-ref">open-legends</span></a> (this script) and browse legends mode as usual</p></li>
<li><p>Immediately after exiting legends mode, run <a class="reference internal" href="../Core.html#die"><span class="std std-ref">die</span></a> to quit DF without saving
(saving at this point instead may corrupt your save)</p></li>
</ol>
<p>Note that it should be safe to run “open-legends” itself multiple times in the
same DF session, as long as DF is killed immediately after the last run.
Unpausing DF or running other commands risks accidentally autosaving the game,
which can lead to save corruption.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">force</span></code> argument will bypass all safety checks, as well as the
save corruption warning.</p>
</div>
<div class="section" id="points">
<span id="id89"></span><h2><a class="toc-backref" href="#id221">points</a><a class="headerlink" href="#points" title="Permalink to this headline">¶</a></h2>
<p>Sets available points at the embark screen to the specified number.  Eg.
<code class="docutils literal notranslate"><span class="pre">points</span> <span class="pre">1000000</span></code> would allow you to buy everything, or <code class="docutils literal notranslate"><span class="pre">points</span> <span class="pre">0</span></code> would
make life quite difficult.</p>
</div>
<div class="section" id="position">
<span id="id90"></span><h2><a class="toc-backref" href="#id222">position</a><a class="headerlink" href="#position" title="Permalink to this headline">¶</a></h2>
<p>Reports the current time:  date, clock time, month, and season.  Also reports
location:  z-level, cursor position, window size, and mouse location.</p>
</div>
<div class="section" id="pref-adjust">
<span id="id91"></span><h2><a class="toc-backref" href="#id223">pref-adjust</a><a class="headerlink" href="#pref-adjust" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">all</span></code> removes/changes preferences from all dwarves, and
<code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">one</span></code> which works for a single currently selected dwarf.
For either, the script inserts an ‘ideal’ set which is easy to satisfy:</p>
<blockquote>
<div><p>… likes iron, steel, weapons, armor, shields/bucklers and plump helmets
for their rounded tops.  When possible, she prefers to consume dwarven
wine, plump helmets, and prepared meals (quarry bush). She absolutely
detests trolls, buzzards, vultures and crundles.</p>
</div></blockquote>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">goth</span></code> will insert a less than ideal set, which
is quite challenging, for a single dwarf:</p>
<blockquote>
<div><p>… likes dwarf skin, corpses, body parts, remains, coffins, the color
black, crosses, glumprongs for their living shadows and snow demons for
their horrifying features.  When possible, she prefers to consume sewer
brew, gutter cruor and bloated tubers.  She absolutely detests elves,
humans and dwarves.</p>
</div></blockquote>
<p>To see what values can be used with each type of preference, use
<code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">list</span></code>.  Optionally, a single dwarf or all dwarves can have
their preferences cleared manually with the use of <code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">clear</span></code>
and <code class="docutils literal notranslate"><span class="pre">pref-adjust</span> <span class="pre">clear_all</span></code>, respectively. Existing preferences are
automatically cleared, normally.</p>
</div>
<div class="section" id="prefchange">
<span id="id92"></span><h2><a class="toc-backref" href="#id224">prefchange</a><a class="headerlink" href="#prefchange" title="Permalink to this headline">¶</a></h2>
<p>Sets preferences for mooding to include a weapon type, equipment type,
and material.  If you also wish to trigger a mood, see
<a class="reference internal" href="../Plugins.html#strangemood"><span class="std std-ref">strangemood</span></a>.</p>
<p>Valid options:</p>
<dl class="field-list simple">
<dt class="field-odd">show</dt>
<dd class="field-odd"><p>show preferences of all units</p>
</dd>
<dt class="field-even">c</dt>
<dd class="field-even"><p>clear preferences of selected unit</p>
</dd>
<dt class="field-odd">all</dt>
<dd class="field-odd"><p>clear preferences of all units</p>
</dd>
<dt class="field-even">axp</dt>
<dd class="field-even"><p>likes axes, breastplates, and steel</p>
</dd>
<dt class="field-odd">has</dt>
<dd class="field-odd"><p>likes hammers, mail shirts, and steel</p>
</dd>
<dt class="field-even">swb</dt>
<dd class="field-even"><p>likes short swords, high boots, and steel</p>
</dd>
<dt class="field-odd">spb</dt>
<dd class="field-odd"><p>likes spears, high boots, and steel</p>
</dd>
<dt class="field-even">mas</dt>
<dd class="field-even"><p>likes maces, shields, and steel</p>
</dd>
<dt class="field-odd">xbh</dt>
<dd class="field-odd"><p>likes crossbows, helms, and steel</p>
</dd>
<dt class="field-even">pig</dt>
<dd class="field-even"><p>likes picks, gauntlets, and steel</p>
</dd>
<dt class="field-odd">log</dt>
<dd class="field-odd"><p>likes long swords, gauntlets, and steel</p>
</dd>
<dt class="field-even">dap</dt>
<dd class="field-even"><p>likes daggers, greaves, and steel</p>
</dd>
</dl>
<p>Feel free to adjust the values as you see fit, change the has steel to
platinum, change the axp axes to great axes, whatnot.</p>
</div>
<div class="section" id="putontable">
<span id="id93"></span><h2><a class="toc-backref" href="#id225">putontable</a><a class="headerlink" href="#putontable" title="Permalink to this headline">¶</a></h2>
<p>Makes item appear on the table, like in adventure mode shops.
Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-a</span></code> or <code class="docutils literal notranslate"><span class="pre">--all</span></code>: apply to all items at the cursor</p></li>
</ul>
</div>
<div class="section" id="questport">
<span id="id94"></span><h2><a class="toc-backref" href="#id226">questport</a><a class="headerlink" href="#questport" title="Permalink to this headline">¶</a></h2>
<p>Sends your adventurer to the location of your quest log map cursor.
Usable from travel mode or on foot.
Can be used in situations where fast travel is normally prohibited.</p>
</div>
<div class="section" id="quickfort">
<span id="id95"></span><h2><a class="toc-backref" href="#id227">quickfort</a><a class="headerlink" href="#quickfort" title="Permalink to this headline">¶</a></h2>
<p>Processes Quickfort-style blueprint files.</p>
<p>Quickfort blueprints record what you want at each map coordinate in a
spreadsheet, storing the keys in a spreadsheet cell that you would press to make
something happen at that spot on the DF map. Quickfort runs in one of five
modes: <code class="docutils literal notranslate"><span class="pre">dig</span></code>, <code class="docutils literal notranslate"><span class="pre">build</span></code>, <code class="docutils literal notranslate"><span class="pre">place</span></code>, <code class="docutils literal notranslate"><span class="pre">zone</span></code>, or <code class="docutils literal notranslate"><span class="pre">query</span></code>. <code class="docutils literal notranslate"><span class="pre">dig</span></code> designates
tiles for digging, <code class="docutils literal notranslate"><span class="pre">build</span></code> builds buildings and constructions, <code class="docutils literal notranslate"><span class="pre">place</span></code>
places stockpiles, <code class="docutils literal notranslate"><span class="pre">zone</span></code> manages activity zones, and <code class="docutils literal notranslate"><span class="pre">query</span></code> changes
building or stockpile settings. The mode is determined by a marker in the
upper-left cell of the spreadsheet (e.g.: <code class="docutils literal notranslate"><span class="pre">#dig</span></code> in cell <code class="docutils literal notranslate"><span class="pre">A1</span></code>).</p>
<p>You can create these blueprints by hand or by using any spreadsheet application,
saving them as <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> or <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files. You can also build your plan “for
real” in Dwarf Fortress, and then export your map using the DFHack
<a class="reference internal" href="../Plugins.html#blueprint"><span class="std std-ref">blueprint</span></a> plugin for later replay. Blueprint files should go in the
<code class="docutils literal notranslate"><span class="pre">blueprints</span></code> subfolder in the main DF folder.</p>
<p>For more details on blueprint file syntax, see the <a class="reference internal" href="../guides/quickfort-user-guide.html#quickfort-blueprint-guide"><span class="std std-ref">Quickfort Blueprint Guide</span></a>
or browse through the ready-to-use examples in the <a class="reference internal" href="../guides/quickfort-library-guide.html#quickfort-library-guide"><span class="std std-ref">Quickfort Library Guide</span></a>.</p>
<p>Usage:</p>
<dl class="simple">
<dt><strong>quickfort set [&lt;key&gt; &lt;value&gt;]</strong></dt><dd><p>Allows you to modify the active quickfort configuration. Just run
<code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">set</span></code> to show current settings. See the Configuration section
below for available keys and values.</p>
</dd>
<dt><strong>quickfort reset</strong></dt><dd><p>Resets quickfort configuration to the defaults in <code class="docutils literal notranslate"><span class="pre">quickfort.txt</span></code>.</p>
</dd>
<dt><strong>quickfort list [-m|--mode &lt;mode&gt;] [-l|--library] [-h|--hidden] [search string]</strong></dt><dd><p>Lists blueprints in the <code class="docutils literal notranslate"><span class="pre">blueprints</span></code> folder. Blueprints are <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files
or sheets within <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> files that contain a <code class="docutils literal notranslate"><span class="pre">#&lt;mode&gt;</span></code> comment in the
upper-left cell. By default, blueprints in the <code class="docutils literal notranslate"><span class="pre">blueprints/library/</span></code>
subfolder or blueprints that contain a <code class="docutils literal notranslate"><span class="pre">hidden()</span></code> marker in their modeline
are not shown. Specify <code class="docutils literal notranslate"><span class="pre">-l</span></code> or <code class="docutils literal notranslate"><span class="pre">-h</span></code> to include library or hidden
blueprints, respectively. The list can be filtered by a specified mode (e.g.
“-m build”) and/or strings to search for in a path, filename, mode, or
comment. The id numbers in the list may not be contiguous if there are
hidden or filtered  blueprints that are not being shown.</p>
</dd>
<dt><strong>quickfort gui [-l|--library] [-h|--hidden] [search string]</strong></dt><dd><p>Starts the quickfort dialog, where you can run blueprints from an
interactive list. The optional arguments have the same meanings as they do
in the list command, and can be used to preset the gui dialog state.</p>
</dd>
<dt><strong>quickfort &lt;command&gt; &lt;list_num&gt; [&lt;options&gt;]</strong></dt><dd><p>Applies the blueprint with the number from the list command.</p>
</dd>
<dt><strong>quickfort &lt;command&gt; &lt;filename&gt; [-n|--name &lt;name&gt;] [&lt;options&gt;]</strong></dt><dd><p>Applies a blueprint in the specified file. The optional <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter
can select a specific blueprint from a file that contains multiple
blueprints with the format “sheetname/label”, or just “/label” for .csv
files. The label is defined in the blueprint modeline, defaulting to its
order in the sheet or file if not defined. If the -n parameter is not
specified, the first blueprint in the first sheet is used.</p>
</dd>
</dl>
<p><strong>&lt;command&gt;</strong> can be one of:</p>
<dl class="field-list simple">
<dt class="field-odd">run</dt>
<dd class="field-odd"><p>Applies the blueprint at your current in-game cursor position.</p>
</dd>
<dt class="field-even">orders</dt>
<dd class="field-even"><p>Uses the manager interface to queue up orders to manufacture items for
the specified build-mode blueprint.</p>
</dd>
<dt class="field-odd">undo</dt>
<dd class="field-odd"><p>Applies the inverse of the specified blueprint. Dig tiles are
undesignated, buildings are canceled or removed (depending on their
construction status), and stockpiles/zones are removed. There is no
effect for query blueprints since they can contain arbitrary key
sequences.</p>
</dd>
</dl>
<p><strong>&lt;options&gt;</strong> can be zero or more of:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-q</span></code>, <code class="docutils literal notranslate"><span class="pre">--quiet</span></code></dt><dd><p>Don’t report on what actions were taken (error messages are still shown).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-v</span></code>, <code class="docutils literal notranslate"><span class="pre">--verbose</span></code></dt><dd><p>Output extra debugging information. This is especially useful if the
blueprint isn’t being applied like you expect.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-d</span></code>, <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></dt><dd><p>Go through all the motions and print statistics on what would be done, but
don’t actually change any game state.</p>
</dd>
</dl>
<p>Example commands:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>quickfort list
quickfort list -l dreamfort help
quickfort run library/dreamfort.csv
quickfort orders library/dreamfort.csv -n /industry2
quickfort run 10 -v
</pre></div>
</div>
<p>Configuration:</p>
<p>The quickfort script reads its startup configuration from the
<code class="docutils literal notranslate"><span class="pre">dfhack-config/quickfort/quickfort.txt</span></code> file, which you can customize. The
settings may be dynamically modified by the <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">set</span></code> command for the
current session, but settings changed with the <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">set</span></code> command will
not change the configuration stored in the file:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blueprints_dir</span></code> (default: ‘blueprints’)</dt><dd><p>Directory tree to search for blueprints. Can be set to an absolute or
relative path. If set to a relative path, resolves to a directory under the
DF folder. Note that if you change this directory, you will not see
blueprints written by the DFHack <a class="reference internal" href="../Plugins.html#blueprint"><span class="std std-ref">blueprint</span></a> plugin (which always writes to
the <code class="docutils literal notranslate"><span class="pre">blueprints</span></code> dir) or blueprints in the quickfort blueprint library.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force_marker_mode</span></code> (default: ‘false’)</dt><dd><p>If true, will designate all dig blueprints in marker mode. If false, only
cells with dig codes explicitly prefixed with <code class="docutils literal notranslate"><span class="pre">m</span></code> will be designated in
marker mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">query_unsafe</span></code> (default: ‘false’)</dt><dd><p>Skip query blueprint sanity checks that detect common blueprint errors and
halt or skip keycode playback. Checks include ensuring a configurable
building exists at the designated cursor position and verifying the active
UI screen is the same before and after sending keys for the cursor
position. Temporarily enable this if you are running a query blueprint that
sends a key sequence that is <em>not</em> related to stockpile or building
configuration. Most players will never need to enable this setting.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stockpiles_max_barrels</span></code>, <code class="docutils literal notranslate"><span class="pre">stockpiles_max_bins</span></code>, and <code class="docutils literal notranslate"><span class="pre">stockpiles_max_wheelbarrows</span></code> (defaults: -1, -1, 0)</dt><dd><p>Set to the maximum number of resources you want assigned to stockpiles of
the relevant types. Set to -1 for DF defaults (number of stockpile tiles
for stockpiles that take barrels and bins, 1 wheelbarrow for stone
stockpiles). The default here for wheelbarrows is 0 since using wheelbarrows
can <em>decrease</em> the efficiency of your fort unless you know how to use them
properly.</p>
</dd>
</dl>
<p>There is one other configuration file in the <code class="docutils literal notranslate"><span class="pre">dfhack-config/quickfort</span></code> folder:
<a class="reference external" href="https://github.com/DFHack/dfhack/tree/develop/dfhack-config/quickfort/aliases.txt">aliases.txt</a>. It defines keycode
shortcuts for query blueprints. The format for this file is described in the
<a class="reference internal" href="../guides/quickfort-alias-guide.html#quickfort-alias-guide"><span class="std std-ref">Quickfort Alias Guide</span></a>, and default aliases that all players can use and build
on are available in the <a class="reference internal" href="../guides/quickfort-alias-guide.html#quickfort-alias-library"><span class="std std-ref">The DFHack standard alias library</span></a>. Some quickfort library
aliases require the <a class="reference internal" href="../Plugins.html#search-plugin"><span class="std std-ref">search</span></a> plugin to be enabled.</p>
</div>
<div class="section" id="quicksave">
<span id="id96"></span><h2><a class="toc-backref" href="#id228">quicksave</a><a class="headerlink" href="#quicksave" title="Permalink to this headline">¶</a></h2>
<p>If called in dwarf mode, makes DF immediately saves the game by setting a flag
normally used in seasonal auto-save.</p>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">Alt</span><span class="kbd">S</span><span> in </span><code class="docutils literal notranslate"><span class="pre">dwarfmode/Default</span></code></p>
</p>
</p>
</div>
<div class="section" id="region-pops">
<span id="id97"></span><h2><a class="toc-backref" href="#id229">region-pops</a><a class="headerlink" href="#region-pops" title="Permalink to this headline">¶</a></h2>
<p>Show or modify the populations of animals in the region.</p>
<p>Usage:</p>
<dl class="field-list simple">
<dt class="field-odd">region-pops list [pattern]</dt>
<dd class="field-odd"><p>Lists encountered populations of the region, possibly restricted by pattern.</p>
</dd>
<dt class="field-even">region-pops list-all [pattern]</dt>
<dd class="field-even"><p>Lists all populations of the region.</p>
</dd>
<dt class="field-odd">region-pops boost &lt;TOKEN&gt; &lt;factor&gt;</dt>
<dd class="field-odd"><p>Multiply all populations of TOKEN by factor.
If the factor is greater than one, increases the
population, otherwise decreases it.</p>
</dd>
<dt class="field-even">region-pops boost-all &lt;pattern&gt; &lt;factor&gt;</dt>
<dd class="field-even"><p>Same as above, but match using a pattern acceptable to list.</p>
</dd>
<dt class="field-odd">region-pops incr &lt;TOKEN&gt; &lt;factor&gt;</dt>
<dd class="field-odd"><p>Augment (or diminish) all populations of TOKEN by factor (additive).</p>
</dd>
<dt class="field-even">region-pops incr-all &lt;pattern&gt; &lt;factor&gt;</dt>
<dd class="field-even"><p>Same as above, but match using a pattern acceptable to list.</p>
</dd>
</dl>
</div>
<div class="section" id="rejuvenate">
<span id="id98"></span><h2><a class="toc-backref" href="#id230">rejuvenate</a><a class="headerlink" href="#rejuvenate" title="Permalink to this headline">¶</a></h2>
<p>Decreases the age of the selected dwarf to 20 years. Useful if valuable citizens
are getting old.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-all</span></code>: applies to all citizens</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-force</span></code>: also applies to units under 20 years old. Useful if there are too many babies around…</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-dry-run</span></code>: only list units that would be changed; don’t actually change ages</p></li>
</ul>
</div>
<div class="section" id="remove-stress">
<span id="id99"></span><h2><a class="toc-backref" href="#id231">remove-stress</a><a class="headerlink" href="#remove-stress" title="Permalink to this headline">¶</a></h2>
<p>Sets stress to -1,000,000; the normal range is 0 to 500,000 with very stable or
very stressed dwarves taking on negative or greater values respectively.
Applies to the selected unit, or use <code class="docutils literal notranslate"><span class="pre">remove-stress</span> <span class="pre">-all</span></code> to apply to all units.</p>
<p>Using the argument <code class="docutils literal notranslate"><span class="pre">-value</span> <span class="pre">0</span></code> will reduce stress to the value 0 instead of -1,000,000.
Negative values must be preceded by a backslash (): <code class="docutils literal notranslate"><span class="pre">-value</span> <span class="pre">\-10000</span></code>.
Note that this can only be used to <em>decrease</em> stress - it cannot be increased
with this argument.</p>
</div>
<div class="section" id="remove-wear">
<span id="id100"></span><h2><a class="toc-backref" href="#id232">remove-wear</a><a class="headerlink" href="#remove-wear" title="Permalink to this headline">¶</a></h2>
<p>Sets the wear on items in your fort to zero.  Usage:</p>
<dl class="field-list simple">
<dt class="field-odd">remove-wear all</dt>
<dd class="field-odd"><p>Removes wear from all items in your fort.</p>
</dd>
<dt class="field-even">remove-wear ID1 ID2 …</dt>
<dd class="field-even"><p>Removes wear from items with the given ID numbers.</p>
</dd>
</dl>
</div>
<div class="section" id="repeat">
<span id="id101"></span><h2><a class="toc-backref" href="#id233">repeat</a><a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h2>
<p>Repeatedly calls a lua script at the specified interval. This can be used from
init files. Note that any time units other than <code class="docutils literal notranslate"><span class="pre">frames</span></code> are unsupported when
a world is not loaded (see <code class="docutils literal notranslate"><span class="pre">dfhack.timeout()</span></code>).</p>
<p>Usage examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>repeat -name jim -time delay -timeUnits units -command [ printArgs 3 1 2 ]
repeat -time 1 -timeUnits months -command [ multicmd cleanowned scattered x; clean all ] -name clean
repeat -list
</pre></div>
</div>
<p>The first example is abstract; the second will regularly remove all contaminants
and worn items from the game.</p>
<p>Arguments:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-name</span></code></dt><dd><p>sets the name for the purposes of cancelling and making sure you
don’t schedule the same repeating event twice.  If not specified,
it’s set to the first argument after <code class="docutils literal notranslate"><span class="pre">-command</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-time</span> <span class="pre">DELAY</span> <span class="pre">-timeUnits</span> <span class="pre">UNITS</span></code></dt><dd><p>DELAY is some positive integer, and UNITS is some valid time
unit for <code class="docutils literal notranslate"><span class="pre">dfhack.timeout</span></code> (default “ticks”).  Units can be
in simulation-time “frames” (raw FPS) or “ticks” (only while
unpaused), while “days”, “months”, and “years” are by in-world time.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-command</span> <span class="pre">[</span> <span class="pre">...</span> <span class="pre">]</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">...</span></code> specifies the command to be run</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-cancel</span> <span class="pre">NAME</span></code></dt><dd><p>cancels the repetition with the name NAME</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-list</span></code></dt><dd><p>prints names of scheduled commands</p>
</dd>
</dl>
</div>
<div class="section" id="resurrect-adv">
<span id="id102"></span><h2><a class="toc-backref" href="#id234">resurrect-adv</a><a class="headerlink" href="#resurrect-adv" title="Permalink to this headline">¶</a></h2>
<p>Brings a dead adventurer back to life, fully healing them
in the process.</p>
<p>This script only targets the current player character in
your party, and should be run after being presented with
the “You are deceased” message. It is not possible to
resurrect the adventurer after the game has been ended.</p>
</div>
<div class="section" id="reveal-hidden-units">
<span id="id103"></span><h2><a class="toc-backref" href="#id235">reveal-hidden-units</a><a class="headerlink" href="#reveal-hidden-units" title="Permalink to this headline">¶</a></h2>
<p>This script exposes all units on the map who
are currently sneaking or waiting in ambush
and thus hidden from the player’s view.</p>
<p>Usable in both fortress and adventure mode.</p>
</div>
<div class="section" id="season-palette">
<span id="id104"></span><h2><a class="toc-backref" href="#id236">season-palette</a><a class="headerlink" href="#season-palette" title="Permalink to this headline">¶</a></h2>
<p>Swap color palettes when the seasons change.</p>
<p>For this script to work you need to add <em>at least</em> one color palette file to
your save raw directory.</p>
<dl class="simple">
<dt>Palette file names:</dt><dd><p>“colors.txt”: The world “default” (worldgen and replacement) palette.
“colors_spring.txt”: The palette displayed during spring.
“colors_summer.txt”: The palette displayed during summer.
“colors_autumn.txt”: The palette displayed during autumn.
“colors_winter.txt”: The palette displayed during winter.</p>
</dd>
</dl>
<p>If you do not provide a world default palette, palette switching will be
disabled for the current world. The seasonal palettes are optional, the default
palette is not! The default palette will be used to replace any missing
seasonal palettes and during worldgen.</p>
<p>When the world is unloaded or this script is disabled, the system default color
palette (“/data/init/colors.txt”) will be loaded. The system default palette
will always be used in the main menu, but your custom palettes should be used
everywhere else.</p>
<p>Usage:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">season-palette</span> <span class="pre">start|enable</span></code> or <code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">season-palette</span></code>:</dt><dd><p>Begin swapping seasonal color palettes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">season-palette</span> <span class="pre">stop|disable</span></code> or <code class="docutils literal notranslate"><span class="pre">disable</span> <span class="pre">season-palette</span></code>:</dt><dd><p>Stop swapping seasonal color palettes and load the default color
palette.</p>
</dd>
</dl>
</div></blockquote>
<p>If loaded as a module this script will export a single Lua function:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">LoadPalette(path)</span></code>:</dt><dd><p>Load a color palette from the text file at “path”. This file must be in
the same format as “/data/init/colors.txt”. If there is an error any
changes will be reverted and this function will return false (returns
true normally).</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="set-orientation">
<span id="id105"></span><h2><a class="toc-backref" href="#id237">set-orientation</a><a class="headerlink" href="#set-orientation" title="Permalink to this headline">¶</a></h2>
<p>Edit a unit’s orientation.
Interest levels are 0 for Uninterested, 1 for Romance, 2 for Marry.</p>
<dl class="field-list simple">
<dt class="field-odd">unit &lt;UNIT ID&gt;</dt>
<dd class="field-odd"><p>The given unit will be affected.
If not found/provided, the script will try defaulting to the currently selected unit.</p>
</dd>
<dt class="field-even">male &lt;INTEREST&gt;</dt>
<dd class="field-even"><p>Set the interest level towards male sexes</p>
</dd>
<dt class="field-odd">female &lt;INTEREST&gt;</dt>
<dd class="field-odd"><p>Set the interest level towards female sexes</p>
</dd>
<dt class="field-even">opposite &lt;INTEREST&gt;</dt>
<dd class="field-even"><p>Set the interest level towards the opposite sex to the unit</p>
</dd>
<dt class="field-odd">same &lt;INTEREST&gt;</dt>
<dd class="field-odd"><p>Set the interest level towards the same sex as the unit</p>
</dd>
<dt class="field-even">random</dt>
<dd class="field-even"><p>Randomise the unit’s interest towards both sexes, respecting their ORIENTATION token odds.</p>
</dd>
</dl>
<p>Other arguments:</p>
<dl class="field-list simple">
<dt class="field-odd">help</dt>
<dd class="field-odd"><p>Shows this help page.</p>
</dd>
<dt class="field-even">view</dt>
<dd class="field-even"><p>Print the unit’s orientation values in the console.</p>
</dd>
</dl>
</div>
<div class="section" id="setfps">
<span id="id106"></span><h2><a class="toc-backref" href="#id238">setfps</a><a class="headerlink" href="#setfps" title="Permalink to this headline">¶</a></h2>
<p>Sets the FPS cap at runtime. Useful in case you want to speed up the game or
watch combat in slow motion.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>setfps &lt;number&gt;
</pre></div>
</div>
</div>
<div class="section" id="show-unit-syndromes">
<span id="id107"></span><h2><a class="toc-backref" href="#id239">show-unit-syndromes</a><a class="headerlink" href="#show-unit-syndromes" title="Permalink to this headline">¶</a></h2>
<p>Show syndromes affecting units and the remaining and maximum duration, along
with (optionally) substantial detail on the effects.</p>
<p>Use one or more of the following options:</p>
<dl class="field-list simple">
<dt class="field-odd">help</dt>
<dd class="field-odd"><p>Show the help message</p>
</dd>
<dt class="field-even">showall</dt>
<dd class="field-even"><p>Show units even if not affected by any syndrome</p>
</dd>
<dt class="field-odd">showeffects</dt>
<dd class="field-odd"><p>Show detailed effects of each syndrome</p>
</dd>
<dt class="field-even">showdisplayeffects</dt>
<dd class="field-even"><p>Show effects that only change the look of the unit</p>
</dd>
<dt class="field-odd">selected</dt>
<dd class="field-odd"><p>Show selected unit</p>
</dd>
<dt class="field-even">dwarves</dt>
<dd class="field-even"><p>Show dwarves</p>
</dd>
<dt class="field-odd">livestock</dt>
<dd class="field-odd"><p>Show livestock</p>
</dd>
<dt class="field-even">wildanimals</dt>
<dd class="field-even"><p>Show wild animals</p>
</dd>
<dt class="field-odd">hostile</dt>
<dd class="field-odd"><p>Show hostiles (e.g. invaders, thieves, forgotten beasts etc)</p>
</dd>
<dt class="field-even">world</dt>
<dd class="field-even"><p>Show all defined syndromes in the world</p>
</dd>
<dt class="field-odd">export</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">export:&lt;filename&gt;</span></code> sends output to the given file, showing all
syndromes affecting each unit with the maximum and present duration.</p>
</dd>
</dl>
</div>
<div class="section" id="siren">
<span id="id108"></span><h2><a class="toc-backref" href="#id240">siren</a><a class="headerlink" href="#siren" title="Permalink to this headline">¶</a></h2>
<p>Wakes up sleeping units and stops parties, either everywhere or in the burrows
given as arguments. In return, adds bad thoughts about noise, tiredness and lack
of protection. The script is intended for emergencies, e.g. when a siege
appears, and all your military is partying.</p>
</div>
<div class="section" id="source">
<span id="id109"></span><h2><a class="toc-backref" href="#id241">source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Create an infinite magma or water source or drain on a tile.
For more complex commands, try the <a class="reference internal" href="../Plugins.html#liquids"><span class="std std-ref">liquids</span></a> plugin.</p>
<p>This script registers a map tile as a liquid source, and every 12 game ticks
that tile receives or remove 1 new unit of flow based on the configuration.</p>
<p>Place the game cursor where you want to create the source (must be a
flow-passable tile, and not too high in the sky) and call:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>source add [magma|water] [0-7]
</pre></div>
</div>
<p>The number argument is the target liquid level (0 = drain, 7 = source).</p>
<p>To add more than 1 unit every time, call the command again on the same spot.</p>
<p>To delete one source, place the cursor over its tile and use <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">delete</span></code>.
To remove all existing sources, call <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">clear</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> argument shows all existing sources.</p>
<p>Examples:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>source add water     - water source
source add magma 7   - magma source
source add water 0   - water drain
</pre></div>
</div>
</div>
<div class="section" id="spawnunit">
<span id="id110"></span><h2><a class="toc-backref" href="#id242">spawnunit</a><a class="headerlink" href="#spawnunit" title="Permalink to this headline">¶</a></h2>
<p>Provides a simpler interface to <a class="reference internal" href="modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>, for creating units.</p>
<p>Usage:  <code class="docutils literal notranslate"><span class="pre">spawnunit</span> <span class="pre">[-command]</span> <span class="pre">RACE</span> <span class="pre">CASTE</span> <span class="pre">[NAME]</span> <span class="pre">[x</span> <span class="pre">y</span> <span class="pre">z]</span> <span class="pre">[...]</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">-command</span></code> flag prints the generated <a class="reference internal" href="modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a> command
instead of running it.  <code class="docutils literal notranslate"><span class="pre">RACE</span></code> and <code class="docutils literal notranslate"><span class="pre">CASTE</span></code> specify the race and caste
of the unit to be created.  The name and coordinates of the unit are optional.
Any further arguments are simply passed on to <a class="reference internal" href="modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>.</p>
</div>
<div class="section" id="startdwarf">
<span id="id111"></span><h2><a class="toc-backref" href="#id243">startdwarf</a><a class="headerlink" href="#startdwarf" title="Permalink to this headline">¶</a></h2>
<p>Use at the embark screen to embark with the specified number of dwarves.  Eg.
<code class="docutils literal notranslate"><span class="pre">startdwarf</span> <span class="pre">500</span></code> would lead to a severe food shortage and FPS issues, while
<code class="docutils literal notranslate"><span class="pre">startdwarf</span> <span class="pre">10</span></code> would just allow a few more warm bodies to dig in.
The number must be 7 or greater.</p>
</div>
<div class="section" id="starvingdead">
<span id="id112"></span><h2><a class="toc-backref" href="#id244">starvingdead</a><a class="headerlink" href="#starvingdead" title="Permalink to this headline">¶</a></h2>
<p>Somewhere between a “mod” and a “fps booster”, with a small impact on
vanilla gameplay. It mostly helps prevent undead cascades in the caverns,
where constant combat leads to hundreds of undead roaming the
caverns and destroying your FPS.</p>
<p>With this script running, all undead that have been on the map for
one month gradually decay, losing strength, speed, and toughness.
After six months, they collapse upon themselves, never to be reanimated.</p>
<p>Usage: <code class="docutils literal notranslate"><span class="pre">starvingdead</span> <span class="pre">(start|stop)</span></code></p>
</div>
<div class="section" id="stripcaged">
<span id="id113"></span><h2><a class="toc-backref" href="#id245">stripcaged</a><a class="headerlink" href="#stripcaged" title="Permalink to this headline">¶</a></h2>
<p>For dumping items inside cages. Will mark selected items for dumping, then
a dwarf may come and actually dump them (or you can use <a class="reference internal" href="../Plugins.html#autodump"><span class="std std-ref">autodump</span></a>).</p>
<p>Arguments:</p>
<dl class="field-list simple">
<dt class="field-odd">list</dt>
<dd class="field-odd"><p>display the list of all cages and their item content on the console</p>
</dd>
<dt class="field-even">items</dt>
<dd class="field-even"><p>dump items in the cage, excluding stuff worn by caged creatures</p>
</dd>
<dt class="field-odd">weapons</dt>
<dd class="field-odd"><p>dump equipped weapons</p>
</dd>
<dt class="field-even">armor</dt>
<dd class="field-even"><p>dump everything worn by caged creatures (including armor and clothing)</p>
</dd>
<dt class="field-odd">all</dt>
<dd class="field-odd"><p>dump everything in the cage, on a creature or not</p>
</dd>
</dl>
<p>Without further arguments, all commands work on all cages and animal traps on
the map. With the <code class="docutils literal notranslate"><span class="pre">here</span></code> argument, considers only the in-game selected cage
(or the cage under the game cursor). To target only specific cages, you can
alternatively pass cage IDs as arguments:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>stripcaged weapons 25321 34228
</pre></div>
</div>
</div>
<div class="section" id="superdwarf">
<span id="id114"></span><h2><a class="toc-backref" href="#id246">superdwarf</a><a class="headerlink" href="#superdwarf" title="Permalink to this headline">¶</a></h2>
<p>Similar to <a class="reference internal" href="../Plugins.html#fastdwarf"><span class="std std-ref">fastdwarf</span></a>, per-creature.</p>
<p>To make any creature superfast, target it ingame using ‘v’ and:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>superdwarf add
</pre></div>
</div>
<p>Other options available: <code class="docutils literal notranslate"><span class="pre">del</span></code>, <code class="docutils literal notranslate"><span class="pre">clear</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>This script also shortens the ‘sleeping’ periods of targets.</p>
</div>
<div class="section" id="tame">
<span id="id115"></span><h2><a class="toc-backref" href="#id247">tame</a><a class="headerlink" href="#tame" title="Permalink to this headline">¶</a></h2>
<p>Tame and train animals.</p>
<p>Usage: <code class="docutils literal notranslate"><span class="pre">tame</span> <span class="pre">-read</span></code> OR <code class="docutils literal notranslate"><span class="pre">tame</span> <span class="pre">-set</span> <span class="pre">&lt;level&gt;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">0</dt>
<dd class="field-odd"><p>semi-wild</p>
</dd>
<dt class="field-even">1</dt>
<dd class="field-even"><p>trained</p>
</dd>
<dt class="field-odd">2</dt>
<dd class="field-odd"><p>well-trained</p>
</dd>
<dt class="field-even">3</dt>
<dd class="field-even"><p>skillfully trained</p>
</dd>
<dt class="field-odd">4</dt>
<dd class="field-odd"><p>expertly trained</p>
</dd>
<dt class="field-even">5</dt>
<dd class="field-even"><p>exceptionally trained</p>
</dd>
<dt class="field-odd">6</dt>
<dd class="field-odd"><p>masterfully trained</p>
</dd>
<dt class="field-even">7</dt>
<dd class="field-even"><p>tame</p>
</dd>
<dt class="field-odd">8</dt>
<dd class="field-odd"><p>wild</p>
</dd>
<dt class="field-even">9</dt>
<dd class="field-even"><p>wild</p>
</dd>
</dl>
</div>
<div class="section" id="teleport">
<span id="id116"></span><h2><a class="toc-backref" href="#id248">teleport</a><a class="headerlink" href="#teleport" title="Permalink to this headline">¶</a></h2>
<p>Teleports a unit to given coordinates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="gui.html#gui-teleport"><span class="std std-ref">gui/teleport</span></a> is an in-game UI for this script.</p>
</div>
<p>Examples:</p>
<ul>
<li><p>prints ID of unit beneath cursor:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>teleport -showunitid
</pre></div>
</div>
</li>
<li><p>prints coordinates beneath cursor:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>teleport -showpos
</pre></div>
</div>
</li>
<li><p>teleports unit <code class="docutils literal notranslate"><span class="pre">1234</span></code> to <code class="docutils literal notranslate"><span class="pre">56,115,26</span></code></p>
<blockquote>
<div><p>teleport -unit 1234 -x 56 -y 115 -z 26</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="tidlers">
<span id="id117"></span><h2><a class="toc-backref" href="#id249">tidlers</a><a class="headerlink" href="#tidlers" title="Permalink to this headline">¶</a></h2>
<p>Toggle between all possible positions where the idlers count can be placed
(see <code class="docutils literal notranslate"><span class="pre">data/init/d_init.txt</span></code> for details).</p>
</div>
<div class="section" id="timestream">
<span id="id118"></span><h2><a class="toc-backref" href="#id250">timestream</a><a class="headerlink" href="#timestream" title="Permalink to this headline">¶</a></h2>
<p>Controls the speed of the calendar and creatures. Fortress mode only. Experimental.</p>
<p>The script is also capable of dynamically speeding up the game based on your current FPS to mitigate the effects of FPS death. See examples below to see how.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>timestream [-rate R] [-fps FPS] [-units [FLAG]] [-debug]
</pre></div>
</div>
<p>Examples:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-rate</span> <span class="pre">2</span></code>:</dt><dd><p>Calendar runs at x2 normal speed, units run at normal speed</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-fps</span> <span class="pre">100</span></code>:</dt><dd><p>Calendar runs at dynamic speed to simulate 100 FPS, units normal</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-fps</span> <span class="pre">100</span> <span class="pre">-units</span></code>:</dt><dd><p>Calendar &amp; units are simulated at 100 FPS</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-rate</span> <span class="pre">1</span></code>:</dt><dd><p>Resets everything back to normal, regardless of other arguments</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-rate</span> <span class="pre">1</span> <span class="pre">-fps</span> <span class="pre">50</span> <span class="pre">-units</span></code>:</dt><dd><p>Same as above</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestream</span> <span class="pre">-fps</span> <span class="pre">100</span> <span class="pre">-units</span> <span class="pre">2</span></code>:</dt><dd><p>Activates a different mode for speeding up units, using the native DF
<code class="docutils literal notranslate"><span class="pre">debug_turbospeed</span></code> flag (similar to <a class="reference internal" href="../Plugins.html#fastdwarf"><span class="std std-ref">fastdwarf</span></a> 2) instead of adjusting
timers of all units. This results in rubberbanding unit motion, so it is not
recommended over the default method.</p>
</dd>
</dl>
</li>
</ul>
<p>Original timestream.lua: <a class="reference external" href="https://gist.github.com/IndigoFenix/cf358b8c994caa0f93d5">https://gist.github.com/IndigoFenix/cf358b8c994caa0f93d5</a></p>
</div>
<div class="section" id="troubleshoot-item">
<span id="id119"></span><h2><a class="toc-backref" href="#id251">troubleshoot-item</a><a class="headerlink" href="#troubleshoot-item" title="Permalink to this headline">¶</a></h2>
<p>Print various properties of the selected item. Sometimes useful for
troubleshooting issues such as why dwarves won’t pick up a certain item.</p>
</div>
<div class="section" id="twaterlvl">
<span id="id120"></span><h2><a class="toc-backref" href="#id252">twaterlvl</a><a class="headerlink" href="#twaterlvl" title="Permalink to this headline">¶</a></h2>
<p>Toggle between displaying/not displaying liquid depth as numbers.</p>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">W</span></p>
</p>
</p>
</div>
<div class="section" id="undump-buildings">
<span id="id121"></span><h2><a class="toc-backref" href="#id253">undump-buildings</a><a class="headerlink" href="#undump-buildings" title="Permalink to this headline">¶</a></h2>
<p>Undesignates building base materials for dumping.</p>
</div>
<div class="section" id="unforbid">
<span id="id122"></span><h2><a class="toc-backref" href="#id254">unforbid</a><a class="headerlink" href="#unforbid" title="Permalink to this headline">¶</a></h2>
<p>Unforbids all items.</p>
<p>Usage:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>unforbid all
unforbid help
</pre></div>
</div>
</div>
<div class="section" id="ungeld">
<span id="id123"></span><h2><a class="toc-backref" href="#id255">ungeld</a><a class="headerlink" href="#ungeld" title="Permalink to this headline">¶</a></h2>
<p>A wrapper around <a class="reference internal" href="#geld"><span class="std std-ref">geld</span></a> that ungelds the specified animal.</p>
<p>Valid options:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-unit</span> <span class="pre">&lt;id&gt;</span></code>: Ungelds the unit with the specified ID.</dt><dd><p>This is optional; if not specified, the selected unit is used instead.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">-help</span></code>:      Shows this help information</p>
</div>
<div class="section" id="uniform-unstick">
<span id="id124"></span><h2><a class="toc-backref" href="#id256">uniform-unstick</a><a class="headerlink" href="#uniform-unstick" title="Permalink to this headline">¶</a></h2>
<p>Prompt units to reevaluate their uniform, by removing/dropping potentially conflicting worn items.</p>
<p>Unlike a “replace clothing” designation, it won’t remove additional clothing
if it’s coexisting with a uniform item already on that body part.
It also won’t remove clothing (e.g. shoes, trousers) if the unit has yet to claim an
armor item for that bodypart. (e.g. if you’re still manufacturing them.)</p>
<p>By default it simply prints info about the currently selected unit,
to actually drop items, you need to provide it the -drop option.</p>
<p>The default algorithm assumes that there’s only one armor item assigned per body part,
which means that it may miss cases where one piece of armor is blocked but the other
is present. The -multi option can possibly get around this, but at the cost of ignoring
left/right distinctions when dropping items.</p>
<p>In some cases, an assigned armor item can’t be put on because someone else is wearing/holding it.
The -free option will cause the assigned item to be removed from the container/dwarven inventory
and placed onto the ground, ready for pickup.</p>
<p>In no cases should the command cause a uniform item that is being properly worn to be removed/dropped.</p>
<p>Targets:</p>
<dl class="field-list simple">
<dt class="field-odd">(no target)</dt>
<dd class="field-odd"><p>Force the selected dwarf to put on their uniform.</p>
</dd>
<dt class="field-even">-all</dt>
<dd class="field-even"><p>Force the uniform on all military dwarves.</p>
</dd>
</dl>
<p>Options:</p>
<dl class="field-list simple">
<dt class="field-odd">(none)</dt>
<dd class="field-odd"><p>Simply show identified issues (dry-run).</p>
</dd>
<dt class="field-even">-drop</dt>
<dd class="field-even"><p>Cause offending worn items to be placed on ground under unit.</p>
</dd>
<dt class="field-odd">-free</dt>
<dd class="field-odd"><p>Remove to-equip items from containers or other’s inventories, and place on ground.</p>
</dd>
<dt class="field-even">-multi</dt>
<dd class="field-even"><p>Be more agressive in removing items, best for when uniforms have muliple items per body part.</p>
</dd>
</dl>
</div>
<div class="section" id="unretire-anyone">
<span id="id125"></span><h2><a class="toc-backref" href="#id257">unretire-anyone</a><a class="headerlink" href="#unretire-anyone" title="Permalink to this headline">¶</a></h2>
<p>This script allows the user to play as any living (or undead)
historical figure (except for deities) in adventure mode.</p>
<p>To use, simply enter “unretire-anyone” in the DFHack console
at the start of adventure mode character creation. You will be
presented with a searchable list from which you may choose
your desired historical figure.</p>
<p>This figure will be added to the ‘Specific Person’ list at the
bottom of the creature selection page. They can then be picked
for use as a player character, as if regaining control of a
retired adventurer.</p>
</div>
<div class="section" id="unsuspend">
<span id="id126"></span><h2><a class="toc-backref" href="#id258">unsuspend</a><a class="headerlink" href="#unsuspend" title="Permalink to this headline">¶</a></h2>
<p>Unsuspends building construction jobs, except for jobs managed by <a class="reference internal" href="../Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>
and those where water flow &gt; 1. See <a class="reference internal" href="#autounsuspend"><span class="std std-ref">autounsuspend</span></a> for keeping new jobs
unsuspended.</p>
</div>
<div class="section" id="view-item-info">
<span id="id127"></span><h2><a class="toc-backref" href="#id259">view-item-info</a><a class="headerlink" href="#view-item-info" title="Permalink to this headline">¶</a></h2>
<p>A script to extend the item or unit viewscreen with additional information
including a custom description of each item (when available), and properties
such as material statistics, weapon attacks, armor effectiveness, and more.</p>
<p>The associated script <a class="reference internal" href="#item-descriptions"><span class="std std-ref">item-descriptions</span></a> supplies custom descriptions
of items.  Individual descriptions can be added or overridden by a similar
script <code class="file docutils literal notranslate"><span class="pre">raw/scripts/more-item-descriptions.lua</span></code>.  Both work as sparse lists,
so missing items simply go undescribed if not defined in the fallback.</p>
</div>
<div class="section" id="view-unit-reports">
<span id="id128"></span><h2><a class="toc-backref" href="#id260">view-unit-reports</a><a class="headerlink" href="#view-unit-reports" title="Permalink to this headline">¶</a></h2>
<p>Show combat reports for the current unit.</p>
<p>Current unit is unit near cursor in ‘v’, selected in ‘u’ list,
unit/corpse/splatter at cursor in ‘k’. And newest unit with race when
‘k’ at race-specific blood spatter.</p>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Ctrl</span><span class="kbd">Shift</span><span class="kbd">R</span></p>
</p>
</p>
</div>
<div class="section" id="warn-starving">
<span id="id129"></span><h2><a class="toc-backref" href="#id261">warn-starving</a><a class="headerlink" href="#warn-starving" title="Permalink to this headline">¶</a></h2>
<p>If any (live) units are starving, very thirsty, or very drowsy, the game will
be paused and a warning shown and logged to the console.  Use with the
<a class="reference internal" href="#repeat"><span class="std std-ref">repeat</span></a> command for regular checks.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">warn-starving</span> <span class="pre">all</span></code> to display a list of all problematic units.</p>
</div>
<div class="section" id="weather">
<span id="id130"></span><h2><a class="toc-backref" href="#id262">weather</a><a class="headerlink" href="#weather" title="Permalink to this headline">¶</a></h2>
<p>Prints a map of the local weather, or with arguments <code class="docutils literal notranslate"><span class="pre">clear</span></code>,
<code class="docutils literal notranslate"><span class="pre">rain</span></code>, and <code class="docutils literal notranslate"><span class="pre">snow</span></code> changes the weather.</p>
</div>
<div class="section" id="workorder">
<span id="id131"></span><h2><a class="toc-backref" href="#id263">workorder</a><a class="headerlink" href="#workorder" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">workorder</span></code> is a script to queue work orders as in <code class="docutils literal notranslate"><span class="pre">j-m-q</span></code> menu.
It can automatically count how many creatures can be milked or sheared.</p>
<p>The most simple and obvious usage is automating shearing and milking of creatures
using <code class="docutils literal notranslate"><span class="pre">repeat</span></code>:</p>
<div class="highlight-dfhack notranslate"><div class="highlight"><pre><span></span>repeat -time 14 -timeUnits days -command [ workorder ShearCreature ] -name autoShearCreature
repeat -time 14 -timeUnits days -command [ workorder MilkCreature ] -name autoMilkCreature
</pre></div>
</div>
<p>It is also possible to define complete work orders using <code class="docutils literal notranslate"><span class="pre">json</span></code>. It is very similar to
what <code class="docutils literal notranslate"><span class="pre">orders</span> <span class="pre">import</span> <span class="pre">filename</span></code> does, with a few key differences. <code class="docutils literal notranslate"><span class="pre">workorder</span></code> is a planning
tool aiming to provide scripting support for vanilla manager. As such it will ignore work order
state like <code class="docutils literal notranslate"><span class="pre">amount_left</span></code> or <code class="docutils literal notranslate"><span class="pre">is_active</span></code> and can optionally take current orders into account.
See description of <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code>-parameter for more details.</p>
<p><strong>Examples</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">ShearCreature</span> <span class="pre">10</span></code> add an order to “Shear Animal” 10 times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">ShearCreature</span></code> same, but calculate amount automatically (can be 0).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">MilkCreature</span></code> same, but “Milk Animal”.</p></li>
</ul>
</div></blockquote>
<p><strong>Advanced examples</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">&quot;{\&quot;job\&quot;:\&quot;EncrustWithGems\&quot;,\&quot;item_category\&quot;:[\&quot;finished_goods\&quot;],\&quot;amount_total\&quot;:5}&quot;</span></code></dt><dd><p>add an order to <code class="docutils literal notranslate"><span class="pre">EncrustWithGems</span></code> <code class="docutils literal notranslate"><span class="pre">finished_goods</span></code> using any material (since not specified).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">&quot;{\&quot;job\&quot;:\&quot;MilkCreature\&quot;,\&quot;item_conditions\&quot;:[{\&quot;condition\&quot;:\&quot;AtLeast\&quot;,\&quot;value\&quot;:2,\&quot;flags\&quot;:[\&quot;empty\&quot;],\&quot;item_type\&quot;:\&quot;BUCKET\&quot;}]}&quot;</span></code></dt><dd><p>same as <code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">MilkCreature</span></code> but with an item condition (“at least 2 empty buckets”).</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><strong>Usage</strong>:</p>
<p><code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">[</span> <span class="pre">--&lt;command&gt;</span> <span class="pre">|</span> <span class="pre">&lt;jobtype&gt;</span> <span class="pre">[&lt;amount&gt;]</span> <span class="pre">|</span> <span class="pre">&lt;json&gt;</span> <span class="pre">|</span> <span class="pre">--file</span> <span class="pre">&lt;file&gt;</span> <span class="pre">]</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">&lt;command&gt;</dt>
<dd class="field-odd"><p>one of <code class="docutils literal notranslate"><span class="pre">help</span></code>, <code class="docutils literal notranslate"><span class="pre">listtypes</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span></code>, <code class="docutils literal notranslate"><span class="pre">very-verbose</span></code></p>
</dd>
</dl>
<dl class="option-list">
<dt><kbd><span class="option">--help</span></kbd></dt>
<dd><p>this help.</p>
</dd>
<dt><kbd><span class="option">--listtypes <var>filter</var></span></kbd></dt>
<dd><p>print all values for all used DF types (<code class="docutils literal notranslate"><span class="pre">job_type</span></code>, <code class="docutils literal notranslate"><span class="pre">item_type</span></code> etc.).
<code class="docutils literal notranslate"><span class="pre">&lt;filter&gt;</span></code> is optional and is applied to type name (using <code class="docutils literal notranslate"><span class="pre">Lua</span></code>’s <code class="docutils literal notranslate"><span class="pre">string.find</span></code>),
f.e. <code class="docutils literal notranslate"><span class="pre">workorder</span> <span class="pre">-l</span> <span class="pre">&quot;manager&quot;</span></code> is useful.</p>
</dd>
</dl>
<dl class="field-list">
<dt class="field-odd">&lt;jobtype&gt;</dt>
<dd class="field-odd"><p>number or name from <code class="docutils literal notranslate"><span class="pre">df.job_type</span></code>.</p>
</dd>
<dt class="field-even">&lt;amount&gt;</dt>
<dd class="field-even"><p>optional number; if omitted, the script will try to determine amount automatically
for some jobs. Currently supported are <code class="docutils literal notranslate"><span class="pre">MilkCreature</span></code> and <code class="docutils literal notranslate"><span class="pre">ShearCreature</span></code> jobs.</p>
</dd>
<dt class="field-odd">&lt;json&gt;</dt>
<dd class="field-odd"><p>json-representation of a workorder. Must be a valid Lua string literal
(see advanced examples: note usage of <code class="docutils literal notranslate"><span class="pre">\</span></code>).
Use <code class="docutils literal notranslate"><span class="pre">orders</span> <span class="pre">export</span> <span class="pre">some_file_name</span></code> to get an idea how does the <code class="docutils literal notranslate"><span class="pre">json</span></code>-structure
look like.</p>
<p>It’s important to note this script behaves differently compared to
<code class="docutils literal notranslate"><span class="pre">orders</span> <span class="pre">import</span> <span class="pre">some_file_name</span></code>: <code class="docutils literal notranslate"><span class="pre">workorder</span></code> is meant as a planning
tool and as such it <strong>will ignore</strong> some fields like <code class="docutils literal notranslate"><span class="pre">amount_left</span></code>,
<code class="docutils literal notranslate"><span class="pre">is_active</span></code> or <code class="docutils literal notranslate"><span class="pre">is_validated</span></code>.</p>
<dl class="simple">
<dt>This script doesn’t need values in all fields:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> is only used for order conditions;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frequency</span></code> is set to <code class="docutils literal notranslate"><span class="pre">OneTime</span></code> by default;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">amount_total</span></code> can be missing, a function name from this script (one of
<code class="docutils literal notranslate"><span class="pre">calcAmountFor_MilkCreature</span></code> or <code class="docutils literal notranslate"><span class="pre">calcAmountFor_ShearCreature</span></code>) or <code class="docutils literal notranslate"><span class="pre">Lua</span></code>
code called as <code class="docutils literal notranslate"><span class="pre">load(code)(order,</span> <span class="pre">orders)</span></code>. Missing <code class="docutils literal notranslate"><span class="pre">amount_total</span></code> is
equivalent to <code class="docutils literal notranslate"><span class="pre">calcAmountFor_&lt;order.job&gt;</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>A custom field <code class="docutils literal notranslate"><span class="pre">__reduce_amount</span></code> can be set if existing open orders should
be taken into account reducing new order’s <code class="docutils literal notranslate"><span class="pre">total_amount</span></code> (possibly all the
way to <code class="docutils literal notranslate"><span class="pre">0</span></code>). An empty <code class="docutils literal notranslate"><span class="pre">amount_total</span></code> implies <code class="docutils literal notranslate"><span class="pre">&quot;__reduce_amount&quot;:</span> <span class="pre">true</span></code>.</p>
</dd>
</dl>
<dl class="option-list">
<dt><kbd><span class="option">--file <var>filename</var></span></kbd></dt>
<dd><p>loads the json-representation of a workorder from a file in <code class="docutils literal notranslate"><span class="pre">dfhack-config/workorder/</span></code>.</p>
</dd>
</dl>
<p><strong>Debugging</strong>:</p>
<dl class="option-list">
<dt><kbd><span class="option">--verbose</span></kbd></dt>
<dd><p>toggle script’s verbosity.</p>
</dd>
<dt><kbd><span class="option">--very-verbose</span></kbd></dt>
<dd><p>toggle script’s very verbose mode.</p>
</dd>
<dt><kbd><span class="option">--reset</span></kbd></dt>
<dd><p>reset script environment for next execution.</p>
</dd>
</dl>
</div>
<div class="section" id="workorder-recheck">
<span id="id132"></span><h2><a class="toc-backref" href="#id264">workorder-recheck</a><a class="headerlink" href="#workorder-recheck" title="Permalink to this headline">¶</a></h2>
<p>Sets the status to <code class="docutils literal notranslate"><span class="pre">Checking</span></code> (from <code class="docutils literal notranslate"><span class="pre">Active</span></code>) of the selected work order (in the <code class="docutils literal notranslate"><span class="pre">j-m</span></code> or <code class="docutils literal notranslate"><span class="pre">u-m</span></code> screens).
This makes the manager reevaluate its conditions.</p>
<p><p><p><strong>Keybinding: </strong><span class="kbd">Alt</span><span class="kbd">R</span><span> in </span><code class="docutils literal notranslate"><span class="pre">jobmanagement/Main</span></code></p>
</p>
</p>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2015-2021, The DFHack Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/docs/_auto/base.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>