
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Changelog &#8212; DFHack 0.47.05-r1 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/dfhack.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/dfhack-icon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="List of Authors" href="Authors.html" />
    <link rel="prev" title="About DFHack" href="index-about.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/dfhack-logo.png" alt="Logo"/>
    <h3 class="logo logo-name">Home</h3>
  </a>
</p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index-about.html">About DFHack</a><ul>
      <li>Previous: <a href="index-about.html" title="previous chapter">About DFHack</a></li>
      <li>Next: <a href="Authors.html" title="next chapter">List of Authors</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#dfhack-0-47-05-r1">DFHack 0.47.05-r1</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
<li><a class="reference internal" href="#misc-improvements">Misc Improvements</a></li>
<li><a class="reference internal" href="#structures">Structures</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-47-04-r5">DFHack 0.47.04-r5</a><ul>
<li><a class="reference internal" href="#new-scripts">New Scripts</a></li>
<li><a class="reference internal" href="#id2">Fixes</a></li>
<li><a class="reference internal" href="#id3">Misc Improvements</a></li>
<li><a class="reference internal" href="#lua">Lua</a></li>
<li><a class="reference internal" href="#id4">Structures</a></li>
<li><a class="reference internal" href="#id5">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-47-04-r4">DFHack 0.47.04-r4</a><ul>
<li><a class="reference internal" href="#id6">New Scripts</a></li>
<li><a class="reference internal" href="#id7">Fixes</a></li>
<li><a class="reference internal" href="#id8">Misc Improvements</a></li>
<li><a class="reference internal" href="#api">API</a></li>
<li><a class="reference internal" href="#id9">Lua</a></li>
<li><a class="reference internal" href="#id10">Structures</a></li>
<li><a class="reference internal" href="#id11">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-47-04-r3">DFHack 0.47.04-r3</a><ul>
<li><a class="reference internal" href="#new-plugins">New Plugins</a></li>
<li><a class="reference internal" href="#id12">New Scripts</a></li>
<li><a class="reference internal" href="#id13">Fixes</a></li>
<li><a class="reference internal" href="#id14">Misc Improvements</a></li>
<li><a class="reference internal" href="#id15">API</a></li>
<li><a class="reference internal" href="#id16">Structures</a></li>
<li><a class="reference internal" href="#id17">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-47-04-r2">DFHack 0.47.04-r2</a><ul>
<li><a class="reference internal" href="#id18">New Scripts</a></li>
<li><a class="reference internal" href="#new-tweaks">New Tweaks</a></li>
<li><a class="reference internal" href="#id19">Fixes</a></li>
<li><a class="reference internal" href="#id20">Misc Improvements</a></li>
<li><a class="reference internal" href="#id21">API</a></li>
<li><a class="reference internal" href="#internals">Internals</a></li>
<li><a class="reference internal" href="#id22">Lua</a></li>
<li><a class="reference internal" href="#ruby">Ruby</a></li>
<li><a class="reference internal" href="#id23">Structures</a></li>
<li><a class="reference internal" href="#id24">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-47-04-r1">DFHack 0.47.04-r1</a><ul>
<li><a class="reference internal" href="#id25">New Scripts</a></li>
<li><a class="reference internal" href="#id26">Fixes</a></li>
<li><a class="reference internal" href="#id27">Misc Improvements</a></li>
<li><a class="reference internal" href="#id28">API</a></li>
<li><a class="reference internal" href="#id29">Internals</a></li>
<li><a class="reference internal" href="#id30">Lua</a></li>
<li><a class="reference internal" href="#id31">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-12-r3">DFHack 0.44.12-r3</a><ul>
<li><a class="reference internal" href="#id32">New Plugins</a></li>
<li><a class="reference internal" href="#id33">New Scripts</a></li>
<li><a class="reference internal" href="#id34">Fixes</a></li>
<li><a class="reference internal" href="#id35">Misc Improvements</a></li>
<li><a class="reference internal" href="#id36">API</a></li>
<li><a class="reference internal" href="#id37">Internals</a></li>
<li><a class="reference internal" href="#id38">Lua</a></li>
<li><a class="reference internal" href="#id39">Ruby</a></li>
<li><a class="reference internal" href="#id40">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-12-r2">DFHack 0.44.12-r2</a><ul>
<li><a class="reference internal" href="#id41">New Plugins</a></li>
<li><a class="reference internal" href="#id42">New Scripts</a></li>
<li><a class="reference internal" href="#id43">Fixes</a></li>
<li><a class="reference internal" href="#id44">Misc Improvements</a></li>
<li><a class="reference internal" href="#id45">API</a></li>
<li><a class="reference internal" href="#id46">Internals</a></li>
<li><a class="reference internal" href="#id47">Lua</a></li>
<li><a class="reference internal" href="#id48">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-12-r1">DFHack 0.44.12-r1</a><ul>
<li><a class="reference internal" href="#id49">Fixes</a></li>
<li><a class="reference internal" href="#id50">Misc Improvements</a></li>
<li><a class="reference internal" href="#id51">API</a></li>
<li><a class="reference internal" href="#id52">Internals</a></li>
<li><a class="reference internal" href="#id53">Lua</a></li>
<li><a class="reference internal" href="#id54">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-10-r2">DFHack 0.44.10-r2</a><ul>
<li><a class="reference internal" href="#id55">New Plugins</a></li>
<li><a class="reference internal" href="#id56">New Scripts</a></li>
<li><a class="reference internal" href="#id57">Fixes</a></li>
<li><a class="reference internal" href="#id58">Misc Improvements</a></li>
<li><a class="reference internal" href="#id59">API</a></li>
<li><a class="reference internal" href="#id60">Internals</a></li>
<li><a class="reference internal" href="#id61">Lua</a></li>
<li><a class="reference internal" href="#id62">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-10-r1">DFHack 0.44.10-r1</a><ul>
<li><a class="reference internal" href="#id63">New Scripts</a></li>
<li><a class="reference internal" href="#id64">New Tweaks</a></li>
<li><a class="reference internal" href="#id65">Fixes</a></li>
<li><a class="reference internal" href="#id66">Misc Improvements</a></li>
<li><a class="reference internal" href="#id67">API</a></li>
<li><a class="reference internal" href="#id68">Internals</a></li>
<li><a class="reference internal" href="#id69">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-09-r1">DFHack 0.44.09-r1</a><ul>
<li><a class="reference internal" href="#id70">Fixes</a></li>
<li><a class="reference internal" href="#id71">Misc Improvements</a></li>
<li><a class="reference internal" href="#id72">Internals</a></li>
<li><a class="reference internal" href="#id73">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-05-r2">DFHack 0.44.05-r2</a><ul>
<li><a class="reference internal" href="#id74">New Plugins</a></li>
<li><a class="reference internal" href="#id75">New Scripts</a></li>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#id76">Fixes</a></li>
<li><a class="reference internal" href="#id77">Misc Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dfhack-0-44-05-r1">DFHack 0.44.05-r1</a><ul>
<li><a class="reference internal" href="#id78">New Scripts</a></li>
<li><a class="reference internal" href="#id79">Fixes</a></li>
<li><a class="reference internal" href="#id80">Misc Improvements</a></li>
<li><a class="reference internal" href="#removed">Removed</a></li>
<li><a class="reference internal" href="#id81">Internals</a></li>
<li><a class="reference internal" href="#id82">Lua</a></li>
<li><a class="reference internal" href="#id83">Structures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#older-changelogs">Older Changelogs</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="changelog">
<span id="id1"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<p>This file contains changes grouped by the stable release in which they first
appeared. See <a class="reference internal" href="Documentation.html#build-changelog"><span class="std std-ref">Building the changelogs</span></a> for more information.</p>
<p>See <a class="reference internal" href="NEWS-dev.html#dev-changelog"><span class="std std-ref">Development Changelog</span></a> for a list of changes grouped by development releases.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dfhack-0-47-05-r1" id="id84">DFHack 0.47.05-r1</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-47-04-r5" id="id85">DFHack 0.47.04-r5</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-47-04-r4" id="id86">DFHack 0.47.04-r4</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-47-04-r3" id="id87">DFHack 0.47.04-r3</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-47-04-r2" id="id88">DFHack 0.47.04-r2</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-47-04-r1" id="id89">DFHack 0.47.04-r1</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-12-r3" id="id90">DFHack 0.44.12-r3</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-12-r2" id="id91">DFHack 0.44.12-r2</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-12-r1" id="id92">DFHack 0.44.12-r1</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-10-r2" id="id93">DFHack 0.44.10-r2</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-10-r1" id="id94">DFHack 0.44.10-r1</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-09-r1" id="id95">DFHack 0.44.09-r1</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-05-r2" id="id96">DFHack 0.44.05-r2</a></p></li>
<li><p><a class="reference internal" href="#dfhack-0-44-05-r1" id="id97">DFHack 0.44.05-r1</a></p></li>
<li><p><a class="reference internal" href="#older-changelogs" id="id98">Older Changelogs</a></p></li>
</ul>
</div>
<div class="section" id="dfhack-0-47-05-r1">
<h2><a class="toc-backref" href="#id84">DFHack 0.47.05-r1</a><a class="headerlink" href="#dfhack-0-47-05-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fixes">
<h3>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#confirm"><span class="std std-ref">confirm</span></a>: stopped exposing alternate names when convicting units</p></li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: fixed bug in soil depth determination for ocean tiles</p></li>
<li><p><a class="reference internal" href="Plugins.html#orders"><span class="std std-ref">orders</span></a>: don’t crash when importing orders with malformed JSON</p></li>
<li><p><a class="reference internal" href="Plugins.html#prospector"><span class="std std-ref">prospect</span></a>: improved pre embark rough estimates, particularly for small clusters</p></li>
<li><p><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>: raw numeric <a class="reference internal" href="guides/quickfort-user-guide.html#quickfort-dig-priorities"><span class="std std-ref">Dig priorities</span></a> (e.g. <code class="docutils literal notranslate"><span class="pre">3</span></code>, which is a valid shorthand for <code class="docutils literal notranslate"><span class="pre">d3</span></code>) now works when used in .xlsx blueprints</p></li>
</ul>
</div>
<div class="section" id="misc-improvements">
<h3>Misc Improvements<a class="headerlink" href="#misc-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#autohauler"><span class="std std-ref">autohauler</span></a>: allowed the <code class="docutils literal notranslate"><span class="pre">Alchemist</span></code> labor to be enabled in <a class="reference internal" href="Plugins.html#manipulator"><span class="std std-ref">manipulator</span></a> and other labor screens so it can be used for its intended purpose of flagging that no hauling labors should be assigned to a dwarf. Before, the only way to set the flag was to use an external program like Dwarf Therapist.</p></li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: slightly improved performance of surveying</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-no-dfhack-init"><span class="std std-ref">gui/no-dfhack-init</span></a>: clarified how to dismiss dialog that displays when no <code class="docutils literal notranslate"><span class="pre">dfhack.init</span></code> file is found</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>:</dt><dd><ul>
<li><p>Dreamfort blueprint set improvements: <a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=176889.msg8239017#msg8239017">significant</a> refinements across the entire blueprint set. Dreamfort is now much faster, much more efficient, and much easier to use. The <a class="reference external" href="https://docs.google.com/spreadsheets/d/13PVZ2h3Mm3x_G1OXQvwKd7oIR2lK4A1Ahf6Om1kFigw/edit#gid=1459509569">checklist</a> now includes a mini-walkthrough for quick reference. The spreadsheet now also includes <a class="reference external" href="https://docs.google.com/spreadsheets/d/13PVZ2h3Mm3x_G1OXQvwKd7oIR2lK4A1Ahf6Om1kFigw/edit#gid=149144025">embark profile suggestions</a></p></li>
<li><p>added aliases for configuring masterwork and artifact core quality for all stockpile categories that have them; made it possible to take from multiple stockpiles in the <code class="docutils literal notranslate"><span class="pre">quantumstop</span></code> alias</p></li>
<li><p>an active cursor is no longer required for running #notes blueprints (like the dreamfort walkthrough)</p></li>
<li><p>you can now be in any mode with an active cursor when running <code class="docutils literal notranslate"><span class="pre">#query</span></code> blueprints (before you could only be in a few “approved” modes, like look, query, or place)</p></li>
<li><p>refined <code class="docutils literal notranslate"><span class="pre">#query</span></code> blueprint sanity checks: cursor should still be on target tile at end of configuration, and it’s ok for the screen ID to change if you are destroying (or canceling destruction of) a building</p></li>
<li><p>now reports how many work orders were added when generating manager orders from blueprints in the gui dialog</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> option to process blueprints but not change any game state</p></li>
<li><p>you can now specify the number of desired barrels, bins, and wheelbarrows for individual stockpiles when placing them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">orders</span></code> on a <code class="docutils literal notranslate"><span class="pre">#place</span></code> blueprint will now enqueue manager orders for barrels, bins, or wheelbarrows that are explicitly set in the blueprint.</p></li>
<li><p>you can now add alias definitions directly to your blueprint files instead of having to put them in a separate aliases.txt file. makes sharing blueprints with custom alias definitions much easier.</p></li>
<li><p>new commandline options for setting the initial state of the gui dialog. for example: <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">gui</span> <span class="pre">-l</span> <span class="pre">dreamfort</span> <span class="pre">notes</span></code> will start the dialog filtered for the dreamfort walkthrough blueprints</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Dropped support for 0.47.03-0.47.04</p></li>
<li><p>Identified scattered enum values (some rhythm beats, a couple of corruption unit thoughts, and a few language name categories)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_loadgamest</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">cur_step</span></code> enumeration to match style of <code class="docutils literal notranslate"><span class="pre">viewscreen_adopt_regionst</span></code> and <code class="docutils literal notranslate"><span class="pre">viewscreen_savegamest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_savegamest</span></code>: identified <code class="docutils literal notranslate"><span class="pre">cur_step</span></code> enumeration</p></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#digfort"><span class="std std-ref">digfort</span></a>: added deprecation warnings - digfort has been replaced by <a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a></p></li>
<li><p><a class="reference internal" href="Plugins.html#fortplan"><span class="std std-ref">fortplan</span></a>: added deprecation warnings - fortplan has been replaced by <a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-47-04-r5">
<h2><a class="toc-backref" href="#id85">DFHack 0.47.04-r5</a><a class="headerlink" href="#dfhack-0-47-04-r5" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-scripts">
<h3>New Scripts<a class="headerlink" href="#new-scripts" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/gui.html#gui-quickfort"><span class="std std-ref">gui/quickfort</span></a>: fast access to the quickfort interactive dialog</p></li>
<li><p><a class="reference internal" href="_auto/base.html#workorder-recheck"><span class="std std-ref">workorder-recheck</span></a>: resets the selected work order to the <code class="docutils literal notranslate"><span class="pre">Checking</span></code> state</p></li>
</ul>
</div>
<div class="section" id="id2">
<h3>Fixes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>fixed order of factors when calculating min temperature</p></li>
<li><p>improved performance of surveying</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>:</dt><dd><ul>
<li><p>fixed eventual crashes when creating zones</p></li>
<li><p>fixed library aliases for tallow and iron, copper, and steel weapons</p></li>
<li><p>zones are now created in the active state by default</p></li>
<li><p>solve rare crash when changing UI modes</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: fixed crash when searching the <code class="docutils literal notranslate"><span class="pre">k</span></code> sidebar and navigating to another tile with certain keys, like <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></li>
<li><p><a class="reference internal" href="Plugins.html#seedwatch"><span class="std std-ref">seedwatch</span></a>: fixed an issue where the plugin would disable itself on map load</p></li>
<li><p><a class="reference internal" href="Plugins.html#stockflow"><span class="std std-ref">stockflow</span></a>: fixed <code class="docutils literal notranslate"><span class="pre">j</span></code> character being intercepted when naming stockpiles</p></li>
<li><p><a class="reference internal" href="Plugins.html#stockpiles"><span class="std std-ref">stockpiles</span></a>: no longer outputs hotkey help text beneath <a class="reference internal" href="Plugins.html#stockflow"><span class="std std-ref">stockflow</span></a> hotkey help text</p></li>
</ul>
</div>
<div class="section" id="id3">
<h3>Misc Improvements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Lua label widgets (used in all standard message boxes) are now scrollable with Up/Down/PgUp/PgDn keys</p></li>
<li><p><a class="reference internal" href="Plugins.html#autofarm"><span class="std std-ref">autofarm</span></a>: now fallows farms if all plants have reached the desired count</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>:</dt><dd><ul>
<li><p>added ability to set global settings from the console, e.g.  <code class="docutils literal notranslate"><span class="pre">buildingplan</span> <span class="pre">set</span> <span class="pre">boulders</span> <span class="pre">false</span></code></p></li>
<li><p>added “enable all” option for buildingplan (so you don’t have to enable all building types individually). This setting is not persisted (just like quickfort_mode is not persisted), but it can be set from onMapLoad.init</p></li>
<li><p>modified <code class="docutils literal notranslate"><span class="pre">Planning</span> <span class="pre">Mode</span></code> status in the UI to show whether the plugin is in quickfort mode, “enable all” mode, or whether just the building type is enabled.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>:</dt><dd><ul>
<li><p>Dreamfort blueprint set improvements: added a streamlined checklist for all required dreamfort commands and gave names to stockpiles, levers, bridges, and zones</p></li>
<li><p>added aliases for bronze weapons and armor</p></li>
<li><p>added alias for tradeable crafts</p></li>
<li><p>new blueprint mode: <code class="docutils literal notranslate"><span class="pre">#ignore</span></code>, useful for scratch space or personal notes</p></li>
<li><p>implement <code class="docutils literal notranslate"><span class="pre">{Empty}</span></code> keycode for use in quickfort aliases; useful for defining blank-by-default alias values</p></li>
<li><p>more flexible commandline parsing allowing for more natural parameter ordering (e.g. where you used to have to write <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">list</span> <span class="pre">dreamfort</span> <span class="pre">-l</span></code> you can now write <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">list</span> <span class="pre">-l</span> <span class="pre">dreamfort</span></code>)</p></li>
<li><p>print out blueprint names that a <code class="docutils literal notranslate"><span class="pre">#meta</span></code> blueprint is applying so it’s easier to understand what meta blueprints are doing</p></li>
<li><p>whitespace is now allowed between a marker name and the opening parenthesis in blueprint modelines. for example, <code class="docutils literal notranslate"><span class="pre">#dig</span> <span class="pre">start</span> <span class="pre">(5;</span> <span class="pre">5)</span></code> is now valid (you used to be required to write <code class="docutils literal notranslate"><span class="pre">#dig</span> <span class="pre">start(5;</span> <span class="pre">5)</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="lua">
<h3>Lua<a class="headerlink" href="#lua" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack.run_command()</span></code>: changed to interface directly with the console when possible, which allows interactive commands and commands that detect the console encoding to work properly</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">processArgsGetopt()</span></code> added to utils.lua, providing a callback interface for parameter parsing and getopt-like flexibility for parameter ordering and combination (see docs in <code class="docutils literal notranslate"><span class="pre">library/lua/utils.lua</span></code> and <code class="docutils literal notranslate"><span class="pre">library/lua/3rdparty/alt_getopt.lua</span></code> for details).</p></li>
</ul>
</div>
<div class="section" id="id4">
<h3>Structures<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">job</span></code>: identified <code class="docutils literal notranslate"><span class="pre">order_id</span></code> field</p></li>
</ul>
</div>
<div class="section" id="id5">
<h3>Documentation<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added documentation for Lua’s <code class="docutils literal notranslate"><span class="pre">dfhack.run_command()</span></code> and variants</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-47-04-r4">
<h2><a class="toc-backref" href="#id86">DFHack 0.47.04-r4</a><a class="headerlink" href="#dfhack-0-47-04-r4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>New Scripts<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/fix.html#fix-corrupt-equipment"><span class="std std-ref">fix/corrupt-equipment</span></a>: fixes some military equipment-related corruption issues that can cause DF crashes</p></li>
</ul>
</div>
<div class="section" id="id7">
<h3>Fixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue on some Linux systems where DFHack installed through a package manager would attempt to write files to a non-writable folder (notably when running <a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a> or <a class="reference internal" href="_auto/gui.html#gui-autogems"><span class="std std-ref">gui/autogems</span></a>)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#adaptation"><span class="std std-ref">adaptation</span></a>: fixed handling of units with no cave adaptation suffered yet</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-goals"><span class="std std-ref">assign-goals</span></a>: fixed error preventing new goals from being created</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-preferences"><span class="std std-ref">assign-preferences</span></a>: fixed handling of preferences for flour</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>:</dt><dd><ul>
<li><p>fixed an issue preventing artifacts from being matched when the maximum item quality is set to <code class="docutils literal notranslate"><span class="pre">artifacts</span></code></p></li>
<li><p>stopped erroneously matching items to buildings while the game is paused</p></li>
<li><p>fixed a crash when pressing 0 while having a noble room selected</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#deathcause"><span class="std std-ref">deathcause</span></a>: fixed an error when inspecting certain corpses</p></li>
<li><p><a class="reference internal" href="Plugins.html#dwarfmonitor"><span class="std std-ref">dwarfmonitor</span></a>: fixed a crash when opening the <code class="docutils literal notranslate"><span class="pre">prefs</span></code> screen if units have vague preferences</p></li>
<li><p><a class="reference internal" href="Plugins.html#dwarfvet"><span class="std std-ref">dwarfvet</span></a>: fixed a crash that could occur when discharging patients</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>fixed an issue causing incursion resource matching (e.g. sand/clay) to skip some tiles if those resources were provided only through incursions</p></li>
<li><p>corrected river size determination by performing it at the MLT level rather than the world tile level</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>:</dt><dd><ul>
<li><p>fixed handling of modifier keys (e.g. <code class="docutils literal notranslate"><span class="pre">{Ctrl}</span></code> or <code class="docutils literal notranslate"><span class="pre">{Alt}</span></code>) in query blueprints</p></li>
<li><p>fixed misconfiguration of nest boxes, hives, and slabs that were preventing them from being built from build blueprints</p></li>
<li><p>fixed valid placement detection for floor hatches, floor grates, and floor bars (they were erroneously being rejected from open spaces and staircase tops)</p></li>
<li><p>fixed query blueprint statistics being added to the wrong metric when both a query and a zone blueprint are run by the same meta blueprint</p></li>
<li><p>added missing blueprint labels in gui dialog list</p></li>
<li><p>fixed occupancy settings for extent-based structures so that stockpiles can be placed within other stockpiles (e.g. in a checkerboard or bullseye pattern)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: fixed an issue where search options might not display if screens were destroyed and recreated programmatically (e.g. with <a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#unsuspend"><span class="std std-ref">unsuspend</span></a>: now leaves buildingplan-managed buildings alone and doesn’t unsuspend underwater tasks</p></li>
<li><p><a class="reference internal" href="Plugins.html#workflow"><span class="std std-ref">workflow</span></a>: fixed an error when creating constraints on “mill plants” jobs and some other plant-related jobs</p></li>
<li><p><a class="reference internal" href="Plugins.html#zone"><span class="std std-ref">zone</span></a>: fixed an issue causing the <code class="docutils literal notranslate"><span class="pre">enumnick</span></code> subcommand to run when attempting to run <code class="docutils literal notranslate"><span class="pre">assign</span></code>, <code class="docutils literal notranslate"><span class="pre">unassign</span></code>, or <code class="docutils literal notranslate"><span class="pre">slaughter</span></code></p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>Misc Improvements<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>:</dt><dd><ul>
<li><p>added support for all buildings, furniture, and constructions (except for instruments)</p></li>
<li><p>added support for respecting building job_item filters when matching items, so you can set your own programmatic filters for buildings before submitting them to buildingplan</p></li>
<li><p>changed default filter setting for max quality from <code class="docutils literal notranslate"><span class="pre">artifact</span></code> to <code class="docutils literal notranslate"><span class="pre">masterwork</span></code></p></li>
<li><p>changed min quality adjustment hotkeys from ‘qw’ to ‘QW’ to avoid conflict with existing hotkeys for setting roller speed - also changed max quality adjustment hotkeys from ‘QW’ to ‘AS’ to make room for the min quality hotkey changes</p></li>
<li><p>added a new global settings page accessible via the <code class="docutils literal notranslate"><span class="pre">G</span></code> hotkey when on any building build screen; <code class="docutils literal notranslate"><span class="pre">Quickfort</span> <span class="pre">Mode</span></code> toggle for legacy Python Quickfort has been moved to this page</p></li>
<li><p>added new global settings for whether generic building materials should match blocks, boulders, logs, and/or bars - defaults are everything but bars</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: updated for Dwarf Therapist 41.2.0</p></li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: split the lair types displayed on the local map into mound, burrow, and lair</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-advfort"><span class="std std-ref">gui/advfort</span></a>: added support for linking to hatches and pressure plates with mechanisms</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-add-syndrome"><span class="std std-ref">modtools/add-syndrome</span></a>: added support for specifying syndrome IDs instead of names</p></li>
<li><p><a class="reference internal" href="Plugins.html#probe"><span class="std std-ref">probe</span></a>: added more output for designations and tile occupancy</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>:</dt><dd><ul>
<li><p>The Dreamfort sample blueprints now have complete walkthroughs for each fort level and importable orders that automate basic fort stock management</p></li>
<li><p>added more blueprints to the blueprints library: several bedroom layouts, the Saracen Crypts, and the complete fortress example from Python Quickfort: TheQuickFortress</p></li>
<li><p>query blueprint aliases can now accept parameters for dynamic expansion - see dfhack-config/quickfort/aliases.txt for details</p></li>
<li><p>alias names can now include dashes and underscores (in addition to letters and numbers)</p></li>
<li><p>improved speed of first call to <code class="docutils literal notranslate"><span class="pre">quickfort</span> <span class="pre">list</span></code> significantly, especially for large blueprint libraries</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">query_unsafe</span></code> setting to disable query blueprint error checking - useful for query blueprints that send unusual key sequences</p></li>
<li><p>added support for bookcases, display cases, and offering places (altars)</p></li>
<li><p>added configuration support for zone pit/pond, gather, and hospital sub-menus in zone blueprints</p></li>
<li><p>removed <code class="docutils literal notranslate"><span class="pre">buildings_use_blocks</span></code> setting and replaced it with more flexible functionality in <a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a></p></li>
<li><p>added support for creating uninitialized stockpiles with <kbd class="kbd docutils literal notranslate">c</kbd></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>: added Lua interface API</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Buildings::setSize()</span></code>: changed to reuse existing extents when possible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack.job.isSuitableMaterial()</span></code>: added an item type parameter so the <code class="docutils literal notranslate"><span class="pre">non_economic</span></code> flag can be properly handled (it was being matched for all item types instead of just boulders)</p></li>
</ul>
</div>
<div class="section" id="id9">
<h3>Lua<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">utils.addressof()</span></code>: fixed for raw userdata</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3>Structures<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">building_extents_type</span></code>: new enum, used for <code class="docutils literal notranslate"><span class="pre">building_extents.extents</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_mountain_peak</span></code>: new struct (was previously inline) - used in <code class="docutils literal notranslate"><span class="pre">world_data.mountain_peaks</span></code></p></li>
</ul>
</div>
<div class="section" id="id11">
<h3>Documentation<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="guides/quickfort-alias-guide.html#quickfort-alias-guide"><span class="std std-ref">Quickfort Alias Guide</span></a>: alias syntax and alias standard library documentation for <a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a> blueprints</p></li>
<li><p><a class="reference internal" href="guides/quickfort-library-guide.html#quickfort-library-guide"><span class="std std-ref">Quickfort Library Guide</span></a>: overview of the quickfort blueprint library</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-47-04-r3">
<h2><a class="toc-backref" href="#id87">DFHack 0.47.04-r3</a><a class="headerlink" href="#dfhack-0-47-04-r3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-plugins">
<h3>New Plugins<a class="headerlink" href="#new-plugins" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Lua%20API.html#xlsxreader"><span class="std std-ref">xlsxreader</span></a>: provides an API for Lua scripts to read Excel spreadsheets</p></li>
</ul>
</div>
<div class="section" id="id12">
<h3>New Scripts<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#quickfort"><span class="std std-ref">quickfort</span></a>: DFHack-native implementation of quickfort with many new features and integrations - see the <a class="reference internal" href="guides/quickfort-user-guide.html#quickfort-user-guide"><span class="std std-ref">Quickfort Blueprint Guide</span></a> for details</p></li>
<li><p><a class="reference internal" href="_auto/base.html#timestream"><span class="std std-ref">timestream</span></a>: controls the speed of the calendar and creatures</p></li>
<li><p><a class="reference internal" href="_auto/base.html#uniform-unstick"><span class="std std-ref">uniform-unstick</span></a>: prompts units to reevaluate their uniform, by removing/dropping potentially conflicting worn items</p></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Fixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#ban-cooking"><span class="std std-ref">ban-cooking</span></a>: fixed an error in several subcommands</p></li>
<li><p><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>: fixed handling of buildings that require buckets</p></li>
<li><p><a class="reference internal" href="Plugins.html#getplants"><span class="std std-ref">getplants</span></a>: fixed a crash that could occur on some maps</p></li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: fixed an issue causing item counts on the trade screen to display inconsistently when searching</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#stockpiles"><span class="std std-ref">stockpiles</span></a>:</dt><dd><ul>
<li><p>fixed a crash when loading food stockpiles</p></li>
<li><p>fixed an error when saving furniture stockpiles</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Misc Improvements<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#createitem"><span class="std std-ref">createitem</span></a>:</dt><dd><ul>
<li><p>added support for plant growths (fruit, berries, leaves, etc.)</p></li>
<li><p>added an <code class="docutils literal notranslate"><span class="pre">inspect</span></code> subcommand to print the item and material tokens of existing items, which can be used to create additional matching items</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: added support for searching for taller waterfalls (up to 50 z-levels tall)</p></li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: added support for searching for names containing non-ASCII characters using their ASCII equivalents</p></li>
<li><p><a class="reference internal" href="Plugins.html#stocks"><span class="std std-ref">stocks</span></a>: added support for searching for items containing non-ASCII characters using their ASCII equivalents</p></li>
<li><p><a class="reference internal" href="_auto/base.html#unretire-anyone"><span class="std std-ref">unretire-anyone</span></a>: made undead creature names appear in the historical figure list</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#zone"><span class="std std-ref">zone</span></a>:</dt><dd><ul>
<li><p>added an <code class="docutils literal notranslate"><span class="pre">enumnick</span></code> subcommand to assign enumerated nicknames (e.g “Hen 1”, “Hen 2”…)</p></li>
<li><p>added slaughter indication to <code class="docutils literal notranslate"><span class="pre">uinfo</span></code> output</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id15">
<h3>API<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">DFHack::to_search_normalized()</span></code> (Lua: <code class="docutils literal notranslate"><span class="pre">dfhack.toSearchNormalized()</span></code>) to convert non-ASCII alphabetic characters to their ASCII equivalents</p></li>
</ul>
</div>
<div class="section" id="id16">
<h3>Structures<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_masterpiece_createdst</span></code>: fixed alignment, including subclasses, and identified <code class="docutils literal notranslate"><span class="pre">skill_at_time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item_body_component</span></code>: fixed some alignment issues and identified some fields (also applies to subclasses like <code class="docutils literal notranslate"><span class="pre">item_corpsest</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stockpile_settings</span></code>: removed <code class="docutils literal notranslate"><span class="pre">furniture.sand_bags</span></code> (no longer present)</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>Documentation<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed syntax highlighting of most code blocks to use the appropriate language (or no language) instead of Python</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-47-04-r2">
<h2><a class="toc-backref" href="#id88">DFHack 0.47.04-r2</a><a class="headerlink" href="#dfhack-0-47-04-r2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id18">
<h3>New Scripts<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#animal-control"><span class="std std-ref">animal-control</span></a>: helps manage the butchery and gelding of animals</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-kill-hf"><span class="std std-ref">devel/kill-hf</span></a>: kills a historical figure</p></li>
<li><p><a class="reference internal" href="_auto/base.html#geld"><span class="std std-ref">geld</span></a>: gelds or ungelds animals</p></li>
<li><p><a class="reference internal" href="_auto/base.html#list-agreements"><span class="std std-ref">list-agreements</span></a>: lists all guildhall and temple agreements</p></li>
<li><p><a class="reference internal" href="_auto/base.html#list-waves"><span class="std std-ref">list-waves</span></a>: displays migration wave information for citizens/units</p></li>
<li><p><a class="reference internal" href="_auto/base.html#ungeld"><span class="std std-ref">ungeld</span></a>: ungelds animals (wrapper around <a class="reference internal" href="_auto/base.html#geld"><span class="std std-ref">geld</span></a>)</p></li>
</ul>
</div>
<div class="section" id="new-tweaks">
<h3>New Tweaks<a class="headerlink" href="#new-tweaks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> do-job-now: adds a job priority toggle to the jobs list</p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> reaction-gloves: adds an option to make reactions produce gloves in sets with correct handedness</p></li>
</ul>
</div>
<div class="section" id="id19">
<h3>Fixes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a segfault when attempting to start a headless session with a graphical PRINT_MODE setting</p></li>
<li><p>Fixed an issue with the macOS launcher failing to un-quarantine some files</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">Units::isEggLayer</span></code>, <code class="docutils literal notranslate"><span class="pre">Units::isGrazer</span></code>, <code class="docutils literal notranslate"><span class="pre">Units::isMilkable</span></code>, <code class="docutils literal notranslate"><span class="pre">Units::isTrainableHunting</span></code>, <code class="docutils literal notranslate"><span class="pre">Units::isTrainableWar</span></code>, and <code class="docutils literal notranslate"><span class="pre">Units::isTamable</span></code> ignoring the unit’s caste</p></li>
<li><p>Linux: fixed <code class="docutils literal notranslate"><span class="pre">dfhack.getDFPath()</span></code> (Lua) and <code class="docutils literal notranslate"><span class="pre">Process::getPath()</span></code> (C++) to always return the DF root path, even if the working directory has changed</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#digfort"><span class="std std-ref">digfort</span></a>:</dt><dd><ul>
<li><p>fixed y-line tracking when .csv files contain lines with only commas</p></li>
<li><p>fixed an issue causing blueprints touching the southern or eastern edges of the map to be rejected (northern and western edges were already allowed). This allows blueprints that span the entire embark area.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: fixed a couple of incursion handling bugs.</p></li>
<li><p><a class="reference internal" href="_auto/base.html#embark-skills"><span class="std std-ref">embark-skills</span></a>: fixed an issue with structures causing the <code class="docutils literal notranslate"><span class="pre">points</span></code> option to do nothing</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>:</dt><dd><ul>
<li><p>fixed an issue where two different <code class="docutils literal notranslate"><span class="pre">&lt;reason&gt;</span></code> tags could be included in a <code class="docutils literal notranslate"><span class="pre">&lt;historical_event&gt;</span></code></p></li>
<li><p>stopped including some tags with <code class="docutils literal notranslate"><span class="pre">-1</span></code> values which don’t provide useful information</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#getplants"><span class="std std-ref">getplants</span></a>: fixed issues causing plants to be collected even if they have no growths (or unripe growths)</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-advfort"><span class="std std-ref">gui/advfort</span></a>: fixed “operate pump” job</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-load-screen"><span class="std std-ref">gui/load-screen</span></a>: fixed an issue causing longer timezones to be cut off</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>:</dt><dd><ul>
<li><p>fixed handling of new jobs in 0.47</p></li>
<li><p>fixed an issue preventing custom furnaces from being built</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-moddable-gods"><span class="std std-ref">modtools/moddable-gods</span></a>:</dt><dd><ul>
<li><p>fixed an error when creating the historical figure</p></li>
<li><p>removed unused <code class="docutils literal notranslate"><span class="pre">-domain</span></code> and <code class="docutils literal notranslate"><span class="pre">-description</span></code> arguments</p></li>
<li><p>made <code class="docutils literal notranslate"><span class="pre">-depictedAs</span></code> argument work</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#names"><span class="std std-ref">names</span></a>:</dt><dd><ul>
<li><p>fixed an error preventing the script from working</p></li>
<li><p>fixed an issue causing renamed units to display their old name in legends mode and some other places</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#pref-adjust"><span class="std std-ref">pref-adjust</span></a>: fixed some compatibility issues and a potential crash</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>:</dt><dd><ul>
<li><p>fixed a couple crashes that could result from decoding invalid enum items (<code class="docutils literal notranslate"><span class="pre">site_realization_building_type</span></code> and <code class="docutils literal notranslate"><span class="pre">improvement_type</span></code>)</p></li>
<li><p>fixed an issue that could cause block coordinates to be incorrect</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#rendermax"><span class="std std-ref">rendermax</span></a>: fixed a hang that could occur when enabling some renderers, notably on Linux</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="../plugins/stonesense/docs/Stonesense.html#stonesense"><span class="std std-ref">Stonesense</span></a>:</dt><dd><ul>
<li><p>fixed a crash when launching Stonesense</p></li>
<li><p>fixed some issues that could cause the splash screen to hang</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id20">
<h3>Misc Improvements<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Linux/macOS: Added console keybindings for deleting words (Alt+Backspace and Alt+d in most terminals)</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#add-recipe"><span class="std std-ref">add-recipe</span></a>:</dt><dd><ul>
<li><p>added tool recipes (minecarts, wheelbarrows, stepladders, etc.)</p></li>
<li><p>added a command explanation or error message when entering an invalid command</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#armoks-blessing"><span class="std std-ref">armoks-blessing</span></a>: added adjustments to values and needs</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#blueprint"><span class="std std-ref">blueprint</span></a>:</dt><dd><ul>
<li><p>now writes blueprints to the <code class="docutils literal notranslate"><span class="pre">blueprints/</span></code> subfolder instead of the df root folder</p></li>
<li><p>now automatically creates folder trees when organizing blueprints into subfolders (e.g. <code class="docutils literal notranslate"><span class="pre">blueprint</span> <span class="pre">30</span> <span class="pre">30</span> <span class="pre">1</span> <span class="pre">rooms/dining</span> <span class="pre">dig</span></code> will create the file <code class="docutils literal notranslate"><span class="pre">blueprints/rooms/dining-dig.csv</span></code>); previously it would fail if the <code class="docutils literal notranslate"><span class="pre">blueprints/rooms/</span></code> directory didn’t already exist</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#confirm"><span class="std std-ref">confirm</span></a>: added a confirmation dialog for convicting dwarves of crimes</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-query"><span class="std std-ref">devel/query</span></a>: added many new query options</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#digfort"><span class="std std-ref">digfort</span></a>:</dt><dd><ul>
<li><p>handled double quotes (“) at the start of a string, allowing .csv files exported from spreadsheets to work without manual modification</p></li>
<li><p>documented that removing ramps, cutting trees, and gathering plants are indeed supported</p></li>
<li><p>added a <code class="docutils literal notranslate"><span class="pre">force</span></code> option to truncate blueprints if the full blueprint would extend off the edge of the map</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#dwarf-op"><span class="std std-ref">dwarf-op</span></a>:</dt><dd><ul>
<li><p>added ability to select dwarves based on migration wave</p></li>
<li><p>added ability to protect dwarves based on symbols in their custom professions</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>:</dt><dd><ul>
<li><p>changed some flags to be represented by self-closing tags instead of true/false strings (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;is_volcano/&gt;</span></code>) - note that this may require changes to other XML-parsing utilities</p></li>
<li><p>changed some enum values from numbers to their string representations</p></li>
<li><p>added ability to save all files to a subfolder, named after the region folder and date by default</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-advfort"><span class="std std-ref">gui/advfort</span></a>: added support for specifying the entity used to determine available resources</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-gm-editor"><span class="std std-ref">gui/gm-editor</span></a>: added support for automatically following ref-targets when pressing the <code class="docutils literal notranslate"><span class="pre">i</span></code> key</p></li>
<li><p><a class="reference internal" href="Plugins.html#manipulator"><span class="std std-ref">manipulator</span></a>: added a new column option to display units’ goals</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-moddable-gods"><span class="std std-ref">modtools/moddable-gods</span></a>: added support for <code class="docutils literal notranslate"><span class="pre">neuter</span></code> gender</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#pref-adjust"><span class="std std-ref">pref-adjust</span></a>:</dt><dd><ul>
<li><p>added support for adjusting just the selected dwarf</p></li>
<li><p>added a new <code class="docutils literal notranslate"><span class="pre">goth</span></code> profile</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#remove-stress"><span class="std std-ref">remove-stress</span></a>: added a <code class="docutils literal notranslate"><span class="pre">-value</span></code> argument to enable setting stress level directly</p></li>
<li><p><a class="reference internal" href="_auto/base.html#workorder"><span class="std std-ref">workorder</span></a>: changed default frequency from “Daily” to “OneTime”</p></li>
</ul>
</div>
<div class="section" id="id21">
<h3>API<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Filesystem::mkdir_recursive</span></code></p></li>
<li><p>Extended <code class="docutils literal notranslate"><span class="pre">Filesystem::listdir_recursive</span></code> to optionally make returned filenames relative to the start directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Units</span></code>: added goal-related functions: <code class="docutils literal notranslate"><span class="pre">getGoalType()</span></code>, <code class="docutils literal notranslate"><span class="pre">getGoalName()</span></code>, <code class="docutils literal notranslate"><span class="pre">isGoalAchieved()</span></code></p></li>
</ul>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added support for splitting scripts into multiple files in the <code class="docutils literal notranslate"><span class="pre">scripts/internal</span></code> folder without polluting the output of <a class="reference internal" href="Core.html#ls"><span class="std std-ref">ls</span></a></p></li>
</ul>
</div>
<div class="section" id="id22">
<h3>Lua<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">ref_target</span></code> field to primitive field references, corresponding to the <code class="docutils literal notranslate"><span class="pre">ref-target</span></code> XML attribute</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">dfhack.units.getRaceNameById()</span></code>, <code class="docutils literal notranslate"><span class="pre">dfhack.units.getRaceBabyNameById()</span></code>, and <code class="docutils literal notranslate"><span class="pre">dfhack.units.getRaceChildNameById()</span></code> available to Lua</p></li>
</ul>
</div>
<div class="section" id="ruby">
<h3>Ruby<a class="headerlink" href="#ruby" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">item_find</span></code> and <code class="docutils literal notranslate"><span class="pre">building_find</span></code> to use centralized logic that works on more screens</p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Structures<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">&lt;df-other-vectors-type&gt;</span></code>, which allows <code class="docutils literal notranslate"><span class="pre">world.*.other</span></code> collections of vectors to use the correct subtypes for items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">creature_raw</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">gender</span></code> to <code class="docutils literal notranslate"><span class="pre">sex</span></code> to match the field in <code class="docutils literal notranslate"><span class="pre">unit</span></code>, which is more frequently used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crime</span></code>: identified <code class="docutils literal notranslate"><span class="pre">witnesses</span></code>, which contains the data held by the old field named <code class="docutils literal notranslate"><span class="pre">reports</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intrigue</span></code>: new type (split out from <code class="docutils literal notranslate"><span class="pre">historical_figure_relationships</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">items_other_id</span></code>: removed <code class="docutils literal notranslate"><span class="pre">BAD</span></code>, and by extension, <code class="docutils literal notranslate"><span class="pre">world.items.other.BAD</span></code>, which was overlapping with <code class="docutils literal notranslate"><span class="pre">world.items.bad</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">job_type</span></code>: added job types new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plant_raw</span></code>: material_defs now contains arrays rather than loose fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pronoun_type</span></code>: new enum (previously documented in field comments)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_character_info</span></code>: fixed a couple alignment issues (needed by <a class="reference internal" href="_auto/base.html#embark-skills"><span class="std std-ref">embark-skills</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui_advmode_menu</span></code>: identified some new enum items</p></li>
</ul>
</div>
<div class="section" id="id24">
<h3>Documentation<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added some new dev-facing pages, including dedicated pages about the remote API, memory research, and documentation</p></li>
<li><p>Expanded the installation guide</p></li>
<li><p>Made a couple theme adjustments</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-47-04-r1">
<h2><a class="toc-backref" href="#id89">DFHack 0.47.04-r1</a><a class="headerlink" href="#dfhack-0-47-04-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>New Scripts<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#color-schemes"><span class="std std-ref">color-schemes</span></a>: manages color schemes</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-print-event"><span class="std std-ref">devel/print-event</span></a>: prints the description of an event by ID or index</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-sc"><span class="std std-ref">devel/sc</span></a>: checks size of structures</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-visualize-structure"><span class="std std-ref">devel/visualize-structure</span></a>: displays the raw memory of a structure</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-color-schemes"><span class="std std-ref">gui/color-schemes</span></a>: an in-game interface for <a class="reference internal" href="_auto/base.html#color-schemes"><span class="std std-ref">color-schemes</span></a></p></li>
<li><p><a class="reference internal" href="_auto/base.html#light-aquifers-only"><span class="std std-ref">light-aquifers-only</span></a>: changes heavy aquifers to light aquifers</p></li>
<li><p><a class="reference internal" href="_auto/base.html#on-new-fortress"><span class="std std-ref">on-new-fortress</span></a>: runs DFHack commands only in a new fortress</p></li>
<li><p><a class="reference internal" href="_auto/base.html#once-per-save"><span class="std std-ref">once-per-save</span></a>: runs DFHack commands unless already run in the current save</p></li>
<li><p><a class="reference internal" href="_auto/base.html#resurrect-adv"><span class="std std-ref">resurrect-adv</span></a>: brings your adventurer back to life</p></li>
<li><p><a class="reference internal" href="_auto/base.html#reveal-hidden-units"><span class="std std-ref">reveal-hidden-units</span></a>: exposes all sneaking units</p></li>
<li><p><a class="reference internal" href="_auto/base.html#workorder"><span class="std std-ref">workorder</span></a>: allows queuing manager jobs; smart about shear and milk creature jobs</p></li>
</ul>
</div>
<div class="section" id="id26">
<h3>Fixes<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a crash in <code class="docutils literal notranslate"><span class="pre">find()</span></code> for some types when no world is loaded</p></li>
<li><p>Fixed a crash when starting DFHack in headless mode with no terminal</p></li>
<li><p>Fixed translation of certain types of in-game names</p></li>
<li><p><a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a>: fixed an issue with binned gems being ignored in linked stockpiles</p></li>
<li><p><a class="reference internal" href="_auto/base.html#catsplosion"><span class="std std-ref">catsplosion</span></a>: fixed error when handling races with only one caste (e.g. harpies)</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#deep-embark"><span class="std std-ref">deep-embark</span></a>:</dt><dd><ul>
<li><p>prevented running in non-fortress modes</p></li>
<li><p>ensured that only the newest wagon is deconstructed</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-visualize-structure"><span class="std std-ref">devel/visualize-structure</span></a>: fixed padding detection for globals</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>:</dt><dd><ul>
<li><p>added UTF-8 encoding and XML escaping for more fields</p></li>
<li><p>added checking for unhandled structures to avoid generating invalid XML</p></li>
<li><p>fixed missing fields in <code class="docutils literal notranslate"><span class="pre">history_event_assume_identityst</span></code> export</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>fixed issues with removing corpses</p></li>
<li><p>fixed resurrection for non-historical figures</p></li>
<li><p>when resurrected by specifying a corpse, units now appear at the location of the corpse rather than their location of death</p></li>
<li><p>resurrected units now have their tile occupancy set (and are placed in the prone position to facilitate this)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#spawnunit"><span class="std std-ref">spawnunit</span></a>: fixed an error when forwarding some arguments but not a location to <a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a></p></li>
<li><p><a class="reference internal" href="Plugins.html#stocks"><span class="std std-ref">stocks</span></a>: fixed display of book titles</p></li>
<li><p><a class="reference internal" href="_auto/base.html#teleport"><span class="std std-ref">teleport</span></a>: fixed setting new tile occupancy</p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> embark-profile-name: fixed handling of the native shift+space key</p></li>
</ul>
</div>
<div class="section" id="id27">
<h3>Misc Improvements<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added “bit” suffix to downloads (e.g. 64-bit)</p></li>
<li><dl class="simple">
<dt>Tests:</dt><dd><ul>
<li><p>moved from DF folder to hack/scripts folder, and disabled installation by default</p></li>
<li><p>made test runner script more flexible</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#deep-embark"><span class="std std-ref">deep-embark</span></a>:</dt><dd><ul>
<li><p>improved support for using directly from the DFHack console</p></li>
<li><p>added a <code class="docutils literal notranslate"><span class="pre">-clear</span></code> option to cancel</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: updated some field names for DT for 0.47</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-visualize-structure"><span class="std std-ref">devel/visualize-structure</span></a>: added human-readable lengths to containers</p></li>
<li><p><a class="reference internal" href="Core.html#dfhack-run"><span class="std std-ref">dfhack-run</span></a>: added color output support</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>updated embark aquifer info to show all aquifer kinds present</p></li>
<li><p>added neighbor display, including kobolds (SKULKING) and necro tower count</p></li>
<li><p>updated aquifer search criteria to handle the new variation</p></li>
<li><p>added search criteria for embark initial tree cover</p></li>
<li><p>added search criteria for necro tower count, neighbor civ count, and specific neighbors. Should handle additional entities, but not tested</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>:</dt><dd><ul>
<li><p>added identity information</p></li>
<li><p>added creature raw names and flags</p></li>
<li><p>made interaction export more robust and human-readable</p></li>
<li><p>removed empty <code class="docutils literal notranslate"><span class="pre">&lt;item_subtype&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;claims&gt;</span></code> tags</p></li>
<li><p>added evilness and force IDs to regions</p></li>
<li><p>added profession and weapon info to relevant entities</p></li>
<li><p>added support for many new history events in 0.47</p></li>
<li><p>added historical event relationships and supplementary data</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>made resurrection produce a historical event viewable in Legends mode</p></li>
<li><p>made error messages more explanatory</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#getplants"><span class="std std-ref">getplants</span></a>: added switches for designations for farming seeds and for max number designated per plant</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-prerelease-warning"><span class="std std-ref">gui/prerelease-warning</span></a>: updated links and information about nightly builds</p></li>
<li><p><a class="reference internal" href="_auto/base.html#install-info"><span class="std std-ref">install-info</span></a>: added DFHack build ID to report</p></li>
<li><p><a class="reference internal" href="Plugins.html#manipulator"><span class="std std-ref">manipulator</span></a>: added intrigue to displayed skills</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-create-item"><span class="std std-ref">modtools/create-item</span></a>: added <code class="docutils literal notranslate"><span class="pre">-matchingGloves</span></code> and <code class="docutils literal notranslate"><span class="pre">-matchingShoes</span></code> arguments</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>:</dt><dd><ul>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-equip</span></code> option to equip created units</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-skills</span></code> option to give skills to units</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-profession</span></code> and <code class="docutils literal notranslate"><span class="pre">-customProfession</span></code> options to adjust unit professions</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-duration</span></code> argument to make the unit vanish after some time</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-locationRange</span></code> argument to allow spawning in a random position within a defined area</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-locationType</span></code> argument to specify the type of location to spawn in</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-syndrome-trigger"><span class="std std-ref">modtools/syndrome-trigger</span></a>: enabled simultaneous use of <code class="docutils literal notranslate"><span class="pre">-synclass</span></code> and <code class="docutils literal notranslate"><span class="pre">-syndrome</span></code></p></li>
<li><p><a class="reference internal" href="_auto/base.html#repeat"><span class="std std-ref">repeat</span></a>: added <code class="docutils literal notranslate"><span class="pre">-list</span></code> option</p></li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: added support for the fortress mode justice screen</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack.init-example</span></code>: enabled <a class="reference internal" href="Plugins.html#autodump"><span class="std std-ref">autodump</span></a></p></li>
</ul>
</div>
<div class="section" id="id28">
<h3>API<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Items::getBookTitle</span></code> to get titles of books. Catches titles buried in improvements, unlike getDescription.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h3>Internals<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added separate changelogs in the scripts and df-structures repos</p></li>
<li><p>Improved support for tagged unions, allowing tools to access union fields more safely</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">reversing</span></code> scripts to df_misc repo</p></li>
</ul>
</div>
<div class="section" id="id30">
<h3>Lua<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pairs()</span></code> now returns available class methods for DF types</p></li>
</ul>
</div>
<div class="section" id="id31">
<h3>Structures<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added an XML schema for validating df-structures syntax</p></li>
<li><p>Added globals: <code class="docutils literal notranslate"><span class="pre">cur_rain</span></code>, <code class="docutils literal notranslate"><span class="pre">cur_rain_counter</span></code>, <code class="docutils literal notranslate"><span class="pre">cur_snow</span></code>, <code class="docutils literal notranslate"><span class="pre">cur_snow_counter</span></code>, <code class="docutils literal notranslate"><span class="pre">weathertimer</span></code>, <code class="docutils literal notranslate"><span class="pre">jobvalue</span></code>, <code class="docutils literal notranslate"><span class="pre">jobvalue_setter</span></code>, <code class="docutils literal notranslate"><span class="pre">interactitem</span></code>, <code class="docutils literal notranslate"><span class="pre">interactinvslot</span></code>, <code class="docutils literal notranslate"><span class="pre">handleannounce</span></code>, <code class="docutils literal notranslate"><span class="pre">preserveannounce</span></code>, <code class="docutils literal notranslate"><span class="pre">updatelightstate</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">divination_set_next_id</span></code> and <code class="docutils literal notranslate"><span class="pre">image_set_next_id</span></code> globals</p></li>
<li><p>Dropped support for 0.44.12-0.47.02</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abstract_building_type</span></code>: added types (and subclasses) new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activity_entry_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">adventure_optionst</span></code>: identified many vmethods</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agreement_details_data_plot_sabotage</span></code>: new struct type, along with related <code class="docutils literal notranslate"><span class="pre">agreement_details_type.PlotSabotage</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agreement_details_type</span></code>: added enum</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">agreement_details</span></code>:</dt><dd><ul>
<li><p>added struct type (and many associated data types)</p></li>
<li><p>identified most fields of most sub-structs</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">agreement_party</span></code>: added struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">announcement_type</span></code>: added types new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">architectural_element</span></code>: new enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">artifact_claim_type</span></code>: added enum</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">artifact_claim</span></code>:</dt><dd><ul>
<li><p>added struct type</p></li>
<li><p>identified several fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">artifact_record</span></code>: identified several fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">battlefield</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">breath_attack_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">SHARP_ROCK</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">breed</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">building_offering_placest</span></code>: new class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">building_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">OfferingPlace</span></code></p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caste_raw_flags</span></code>:</dt><dd><ul>
<li><p>renamed many items to match DF names</p></li>
<li><p>renamed and identified many flags to match information from Toady</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">creature_handler</span></code>: identified vmethods</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">creature_interaction_effect</span></code>: added subclasses new to 0.47</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">creature_raw_flags</span></code>:</dt><dd><ul>
<li><p>identified several more items</p></li>
<li><p>renamed many items to match DF names</p></li>
<li><p>renamed and identified many flags to match information from Toady</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">crime_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crime</span></code>: removed fields of <code class="docutils literal notranslate"><span class="pre">reports</span></code> that are no longer present</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dance_form</span></code>: identified most fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack_room_quality_level</span></code>: added enum attributes for names of rooms of each quality</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d_init</span></code>: added settings new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entity_name_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">MERCHANT_COMPANY</span></code>, <code class="docutils literal notranslate"><span class="pre">CRAFT_GUILD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entity_position_responsibility</span></code>: added values new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entity_site_link_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_map_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fortress_type</span></code>: added enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">general_ref_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">UNIT_INTERROGATEE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ghost_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">None</span></code> value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">goal_type</span></code>: added goals types new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">histfig_site_link</span></code>: added subclasses new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_entity.flags</span></code>: identified several flags</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_entity.relations</span></code>: renamed from <code class="docutils literal notranslate"><span class="pre">unknown1b</span></code> and identified several fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_figure.vague_relationships</span></code>: identified</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_figure_info.known_info</span></code>: renamed from <code class="docutils literal notranslate"><span class="pre">secret</span></code>, identified some fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_figure</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">unit_id2</span></code> to <code class="docutils literal notranslate"><span class="pre">nemesis_id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_circumstance_info</span></code>: new struct type (and changed several <code class="docutils literal notranslate"><span class="pre">history_event</span></code> subclasses to use this)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_collection</span></code>: added subtypes new to 0.47</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">history_event_context</span></code>:</dt><dd><ul>
<li><p>added lots of new fields</p></li>
<li><p>identified fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_reason_info</span></code>: new struct type (and changed several <code class="docutils literal notranslate"><span class="pre">history_event</span></code> subclasses to use this)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">history_event_reason</span></code>:</dt><dd><ul>
<li><p>added captions for all items</p></li>
<li><p>added items new to 0.47</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_type</span></code>: added types for events new to 0.47, as well as corresponding <code class="docutils literal notranslate"><span class="pre">history_event</span></code> subclasses (too many to list here)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">honors_type</span></code>:</dt><dd><ul>
<li><p>added struct type</p></li>
<li><p>identified several fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity_type</span></code>: new enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">civ</span></code> to <code class="docutils literal notranslate"><span class="pre">entity_id</span></code>, identified <code class="docutils literal notranslate"><span class="pre">type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image_set</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_effect_create_itemst</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_effect_summon_unitst</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_effect</span></code>: added subtypes new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_source_experimentst</span></code>: added class type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_source_usage_hint</span></code>: added values new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interface_key</span></code>: added items for keys new to 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interrogation_report</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">itemdef_flags</span></code>: new enum, with <code class="docutils literal notranslate"><span class="pre">GENERATED</span></code> flag</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item</span></code>: identified several vmethods</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">job_skill</span></code>: added <code class="docutils literal notranslate"><span class="pre">INTRIGUE</span></code>, <code class="docutils literal notranslate"><span class="pre">RIDING</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">justification</span></code>: new enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lair_type</span></code>: added enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lever_target_type</span></code>: identified <code class="docutils literal notranslate"><span class="pre">LeverMechanism</span></code> and <code class="docutils literal notranslate"><span class="pre">TargetMechanism</span></code> values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monument_type</span></code>: added enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form</span></code>: identified fields, including some renames. Also identified fields in <code class="docutils literal notranslate"><span class="pre">scale</span></code> and <code class="docutils literal notranslate"><span class="pre">rhythm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next_global_id</span></code>: added enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plant.damage_flags</span></code>: added <code class="docutils literal notranslate"><span class="pre">is_dead</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_role_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_strategy_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poetic_form_action</span></code>: added <code class="docutils literal notranslate"><span class="pre">Beseech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region_weather</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relationship_event_supplement</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relationship_event</span></code>: new struct type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_character_info</span></code>: expanded significantly in 0.47</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specific_ref</span></code>: moved union data to <code class="docutils literal notranslate"><span class="pre">data</span></code> field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">squad_order_cause_trouble_for_entityst</span></code>: identified fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text_system</span></code>: added layout for struct</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tile_occupancy</span></code>: added <code class="docutils literal notranslate"><span class="pre">varied_heavy_aquifer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tool_uses</span></code>: added items: <code class="docutils literal notranslate"><span class="pre">PLACE_OFFERING</span></code>, <code class="docutils literal notranslate"><span class="pre">DIVINATION</span></code>, <code class="docutils literal notranslate"><span class="pre">GAMES_OF_CHANCE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui_look_list</span></code>: moved union fields to <code class="docutils literal notranslate"><span class="pre">data</span></code> and renamed to match <code class="docutils literal notranslate"><span class="pre">type</span></code> enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui_sidebar_menus.location</span></code>: added new profession-related fields, renamed and fixed types of deity-related fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui_sidebar_mode</span></code>: added <code class="docutils literal notranslate"><span class="pre">ZonesLocationInfo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_action</span></code>: rearranged as tagged union with new sub-types; existing code should be compatible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_thought_type</span></code>: added several new thought types</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vague_relationship_type</span></code>: new enum type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vermin_flags</span></code>: identified <code class="docutils literal notranslate"><span class="pre">is_roaming_colony</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_counterintelligencest</span></code>: new class (only layout identified so far)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_justicest</span></code>: identified interrogation-related fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_workquota_detailsst</span></code>: identified fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_data.field_battles</span></code>: identified and named several fields</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-12-r3">
<h2><a class="toc-backref" href="#id90">DFHack 0.44.12-r3</a><a class="headerlink" href="#dfhack-0-44-12-r3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>New Plugins<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#autoclothing"><span class="std std-ref">autoclothing</span></a>: automatically manage clothing work orders</p></li>
<li><p><a class="reference internal" href="Plugins.html#autofarm"><span class="std std-ref">autofarm</span></a>: replaces the previous Ruby script of the same name, with some fixes</p></li>
<li><p><a class="reference internal" href="Lua%20API.html#map-render"><span class="std std-ref">map-render</span></a>: allows programmatically rendering sections of the map that are off-screen</p></li>
<li><p><a class="reference internal" href="Plugins.html#tailor"><span class="std std-ref">tailor</span></a>: automatically manages keeping your dorfs clothed</p></li>
</ul>
</div>
<div class="section" id="id33">
<h3>New Scripts<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#assign-attributes"><span class="std std-ref">assign-attributes</span></a>: changes the attributes of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-beliefs"><span class="std std-ref">assign-beliefs</span></a>: changes the beliefs of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-facets"><span class="std std-ref">assign-facets</span></a>: changes the facets (traits) of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-goals"><span class="std std-ref">assign-goals</span></a>: changes the goals of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-preferences"><span class="std std-ref">assign-preferences</span></a>: changes the preferences of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-profile"><span class="std std-ref">assign-profile</span></a>: sets a dwarf’s characteristics according to a predefined profile</p></li>
<li><p><a class="reference internal" href="_auto/base.html#assign-skills"><span class="std std-ref">assign-skills</span></a>: changes the skills of a unit</p></li>
<li><p><a class="reference internal" href="_auto/base.html#combat-harden"><span class="std std-ref">combat-harden</span></a>: sets a unit’s combat-hardened value to a given percent</p></li>
<li><p><a class="reference internal" href="_auto/base.html#deep-embark"><span class="std std-ref">deep-embark</span></a>: allows embarking underground</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-find-twbt"><span class="std std-ref">devel/find-twbt</span></a>: finds a TWBT-related offset needed by the new <a class="reference internal" href="Lua%20API.html#map-render"><span class="std std-ref">map-render</span></a> plugin</p></li>
<li><p><a class="reference internal" href="_auto/base.html#dwarf-op"><span class="std std-ref">dwarf-op</span></a>: optimizes dwarves for fort-mode work; makes managing labors easier</p></li>
<li><p><a class="reference internal" href="_auto/base.html#forget-dead-body"><span class="std std-ref">forget-dead-body</span></a>: removes emotions associated with seeing a dead body</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-create-tree"><span class="std std-ref">gui/create-tree</span></a>: creates a tree at the selected tile</p></li>
<li><p><a class="reference internal" href="_auto/base.html#linger"><span class="std std-ref">linger</span></a>: takes over your killer in adventure mode</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-create-tree"><span class="std std-ref">modtools/create-tree</span></a>: creates a tree</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-pref-edit"><span class="std std-ref">modtools/pref-edit</span></a>: add, remove, or edit the preferences of a unit</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-set-belief"><span class="std std-ref">modtools/set-belief</span></a>: changes the beliefs (values) of units</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-set-need"><span class="std std-ref">modtools/set-need</span></a>: sets and edits unit needs</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-set-personality"><span class="std std-ref">modtools/set-personality</span></a>: changes the personality of units</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-spawn-liquid"><span class="std std-ref">modtools/spawn-liquid</span></a>: spawns water or lava at the specified coordinates</p></li>
<li><p><a class="reference internal" href="_auto/base.html#set-orientation"><span class="std std-ref">set-orientation</span></a>: edits a unit’s orientation</p></li>
<li><p><a class="reference internal" href="_auto/base.html#unretire-anyone"><span class="std std-ref">unretire-anyone</span></a>: turns any historical figure into a playable adventurer</p></li>
</ul>
</div>
<div class="section" id="id34">
<h3>Fixes<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a crash in the macOS/Linux console when the prompt was wider than the screen width</p></li>
<li><p>Fixed inconsistent results from <code class="docutils literal notranslate"><span class="pre">Units::isGay</span></code> for asexual units</p></li>
<li><p>Fixed some cases where Lua filtered lists would not properly intercept keys, potentially triggering other actions on the same screen</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#autofarm"><span class="std std-ref">autofarm</span></a>:</dt><dd><ul>
<li><p>fixed biome detection to properly determine crop assignments on surface farms</p></li>
<li><p>reimplemented as a C++ plugin to make proper biome detection possible</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#bodyswap"><span class="std std-ref">bodyswap</span></a>: fixed companion list not being updated often enough</p></li>
<li><p><a class="reference internal" href="Lua%20API.html#cxxrandom"><span class="std std-ref">cxxrandom</span></a>: removed some extraneous debug information</p></li>
<li><p><a class="reference internal" href="_auto/base.html#digfort"><span class="std std-ref">digfort</span></a>: now accounts for z-level changes when calculating maximum y dimension</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>fixed bug causing crash on worlds without generated metals (as well as pruning vectors as originally intended).</p></li>
<li><p>fixed bug causing mineral matching to fail to cut off at the magma sea, reporting presence of things that aren’t (like DF does currently).</p></li>
<li><p>fixed bug causing half of the river tiles not to be recognized.</p></li>
<li><p>added logic to detect some river tiles DF doesn’t generate data for (but are definitely present).</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Lua%20API.html#eventful"><span class="std std-ref">eventful</span></a>: fixed invalid building ID in some building events</p></li>
<li><p><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>: now escapes special characters in names properly</p></li>
<li><p><a class="reference internal" href="Plugins.html#getplants"><span class="std std-ref">getplants</span></a>: fixed designation of plants out of season (note that picked plants are still designated incorrectly)</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-autogems"><span class="std std-ref">gui/autogems</span></a>: fixed error when no world is loaded</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/gui.html#gui-companion-order"><span class="std std-ref">gui/companion-order</span></a>:</dt><dd><ul>
<li><p>fixed error when resetting group leaders</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">leave</span></code> now properly removes companion links</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-create-item"><span class="std std-ref">gui/create-item</span></a>: fixed module support - can now be used from other scripts</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/gui.html#gui-stamper"><span class="std std-ref">gui/stamper</span></a>:</dt><dd><ul>
<li><p>stopped “invert” from resetting the designation type</p></li>
<li><p>switched to using DF’s designation keybindings instead of custom bindings</p></li>
<li><p>fixed some typos and text overlapping</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>:</dt><dd><ul>
<li><p>fixed an error associating historical entities with units</p></li>
<li><p>stopped recalculating health to avoid newly-created citizens triggering a “recover wounded” job</p></li>
<li><p>fixed units created in arena mode having blank names</p></li>
<li><p>fixed units created in arena mode having the wrong race and/or interaction effects applied after creating units manually in-game</p></li>
<li><p>stopped units from spawning with extra items or skills previously selected in the arena</p></li>
<li><p>stopped setting some unneeded flags that could result in glowing creature tiles</p></li>
<li><p>set units created in adventure mode to have no family, instead of being related to the first creature in the world</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-reaction-product-trigger"><span class="std std-ref">modtools/reaction-product-trigger</span></a>:</dt><dd><ul>
<li><p>fixed an error dealing with reactions in adventure mode</p></li>
<li><p>blocked <code class="docutils literal notranslate"><span class="pre">\\BUILDING_ID</span></code> for adventure mode reactions</p></li>
<li><p>fixed <code class="docutils literal notranslate"><span class="pre">-clear</span></code> to work without passing other unneeded arguments</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-reaction-trigger"><span class="std std-ref">modtools/reaction-trigger</span></a>:</dt><dd><ul>
<li><p>fixed a bug when determining whether a command was run</p></li>
<li><p>fixed handling of <code class="docutils literal notranslate"><span class="pre">-resetPolicy</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#mousequery"><span class="std std-ref">mousequery</span></a>: fixed calculation of map dimensions, which was sometimes preventing scrolling the map with the mouse when TWBT was enabled</p></li>
<li><p><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>: fixed a crash when a unit’s path has a length of 0</p></li>
<li><p><a class="reference internal" href="../plugins/stonesense/docs/Stonesense.html#stonesense"><span class="std std-ref">Stonesense</span></a>: fixed crash due to wagons and other soul-less creatures</p></li>
<li><p><a class="reference internal" href="_auto/base.html#tame"><span class="std std-ref">tame</span></a>: now sets the civ ID of tamed animals (fixes compatibility with <a class="reference internal" href="Plugins.html#autobutcher"><span class="std std-ref">autobutcher</span></a>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#title-folder"><span class="std std-ref">title-folder</span></a>: silenced error when <code class="docutils literal notranslate"><span class="pre">PRINT_MODE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></li>
</ul>
</div>
<div class="section" id="id35">
<h3>Misc Improvements<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added a note to <a class="reference internal" href="Core.html#dfhack-run"><span class="std std-ref">dfhack-run</span></a> when called with no arguments (which is usually unintentional)</p></li>
<li><p>On macOS, the launcher now attempts to un-quarantine the rest of DFHack</p></li>
<li><p><a class="reference internal" href="_auto/base.html#bodyswap"><span class="std std-ref">bodyswap</span></a>: added arena mode support</p></li>
<li><p><a class="reference internal" href="_auto/base.html#combine-drinks"><span class="std std-ref">combine-drinks</span></a>: added more default output, similar to <a class="reference internal" href="_auto/base.html#combine-plants"><span class="std std-ref">combine-plants</span></a></p></li>
<li><p><a class="reference internal" href="Plugins.html#createitem"><span class="std std-ref">createitem</span></a>: added a list of valid castes to the “invalid caste” error message, for convenience</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: added more size information needed by newer Dwarf Therapist versions</p></li>
<li><p><a class="reference internal" href="Plugins.html#dwarfmonitor"><span class="std std-ref">dwarfmonitor</span></a>: enabled widgets to access other scripts and plugins by switching to the core Lua context</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>added an in-game option to activate on the embark screen</p></li>
<li><p>changed waterfall detection to look for level drop rather than just presence</p></li>
<li><p>changed matching to take incursions, i.e. parts of other biomes, into consideration when evaluating tiles. This allows for e.g. finding multiple biomes on single tile embarks.</p></li>
<li><p>changed overlay display to show when incursion surveying is incomplete</p></li>
<li><p>changed overlay display to show evil weather</p></li>
<li><p>added optional parameter “fileresult” for crude external harness automated match support</p></li>
<li><p>improved focus movement logic to go to only required world tiles, increasing speed of subsequent searches considerably</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>: added rivers to custom XML export</p></li>
<li><p><a class="reference internal" href="_auto/base.html#exterminate"><span class="std std-ref">exterminate</span></a>: added support for a special <code class="docutils literal notranslate"><span class="pre">enemy</span></code> caste</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/gui.html#gui-gm-unit"><span class="std std-ref">gui/gm-unit</span></a>:</dt><dd><ul>
<li><p>added support for editing:</p></li>
<li><p>added attribute editor</p></li>
<li><p>added orientation editor</p></li>
<li><p>added editor for bodies and body parts</p></li>
<li><p>added color editor</p></li>
<li><p>added belief editor</p></li>
<li><p>added personality editor</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-create-item"><span class="std std-ref">modtools/create-item</span></a>: documented already-existing <code class="docutils literal notranslate"><span class="pre">-quality</span></code> option</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>:</dt><dd><ul>
<li><p>added the ability to specify <code class="docutils literal notranslate"><span class="pre">\\LOCAL</span></code> for the fort group entity</p></li>
<li><p>now enables the default labours for adult units with CAN_LEARN.</p></li>
<li><p>now sets historical figure orientation.</p></li>
<li><p>improved speed of creating multiple units at once</p></li>
<li><p>made the script usable as a module (from other scripts)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-reaction-trigger"><span class="std std-ref">modtools/reaction-trigger</span></a>:</dt><dd><ul>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-ignoreWorker</span></code>: ignores the worker when selecting the targets</p></li>
<li><p>changed the default behavior to skip inactive/dead units; added <code class="docutils literal notranslate"><span class="pre">-dontSkipInactive</span></code> to include creatures that are inactive</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-range</span></code>: controls how far elligible targets can be from the workshop</p></li>
<li><p>syndromes now are applied before commands are run, not after</p></li>
<li><p>if both a command and a syndrome are given, the command only runs if the syndrome could be applied</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#mousequery"><span class="std std-ref">mousequery</span></a>: made it more clear when features are enabled</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>:</dt><dd><ul>
<li><p>added a basic framework for controlling and reading the menus in DF (currently only supports the building menu)</p></li>
<li><p>added support for reading item raws</p></li>
<li><p>added a check for whether or not the game is currently saving or loading, for utilities to check if it’s safe to read from DF</p></li>
<li><p>added unit facing direction estimate and position within tiles</p></li>
<li><p>added unit age</p></li>
<li><p>added unit wounds</p></li>
<li><p>added tree information</p></li>
<li><p>added check for units’ current jobs when calculating the direction they are facing</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id36">
<h3>API<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">plugin_load_data</span></code> and <code class="docutils literal notranslate"><span class="pre">plugin_save_data</span></code> events for plugins to load/save persistent data</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Maps::GetBiomeType</span></code> and <code class="docutils literal notranslate"><span class="pre">Maps::GetBiomeTypeByRef</span></code> to infer biome types properly</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Units::getPhysicalDescription</span></code> (note that this depends on the <code class="docutils literal notranslate"><span class="pre">unit_get_physical_description</span></code> offset, which is not yet available for all DF builds)</p></li>
</ul>
</div>
<div class="section" id="id37">
<h3>Internals<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added new Persistence module</p></li>
<li><p>Cut down on internal DFHack dependencies to improve build times</p></li>
<li><p>Improved concurrency in event and server handlers</p></li>
<li><p>Persistent data is now stored in JSON files instead of historical figures - existing data will be migrated when saving</p></li>
<li><p><a class="reference internal" href="../plugins/stonesense/docs/Stonesense.html#stonesense"><span class="std std-ref">Stonesense</span></a>: fixed some OpenGL build issues on Linux</p></li>
</ul>
</div>
<div class="section" id="id38">
<h3>Lua<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Exposed <code class="docutils literal notranslate"><span class="pre">gui.dwarfmode.get_movement_delta</span></code> and <code class="docutils literal notranslate"><span class="pre">gui.dwarfmode.get_hotkey_target</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack.run_command</span></code> now returns the command’s return code</p></li>
</ul>
</div>
<div class="section" id="id39">
<h3>Ruby<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Made <code class="docutils literal notranslate"><span class="pre">unit_ishostile</span></code> consistently return a boolean</p></li>
</ul>
</div>
<div class="section" id="id40">
<h3>Structures<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">unit_get_physical_description</span></code> function offset on some platforms</p></li>
<li><dl class="simple">
<dt>Added/identified types:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">assume_identity_mode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_purpose</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_style</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_pitch_style</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_feature</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_vocals</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_melodies</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_interval</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_emotion_memory</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">need_type</span></code>: fixed <code class="docutils literal notranslate"><span class="pre">PrayOrMeditate</span></code> typo</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">personality_facet_type</span></code>, <code class="docutils literal notranslate"><span class="pre">value_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">NONE</span></code> values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">twbt_render_map</span></code>: added for 64-bit 0.44.12 (for <a class="reference internal" href="Lua%20API.html#map-render"><span class="std std-ref">map-render</span></a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-12-r2">
<h2><a class="toc-backref" href="#id91">DFHack 0.44.12-r2</a><a class="headerlink" href="#dfhack-0-44-12-r2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id41">
<h3>New Plugins<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#debug"><span class="std std-ref">debug</span></a>: manages runtime debug print category filtering</p></li>
<li><p><a class="reference internal" href="Plugins.html#nestboxes"><span class="std std-ref">nestboxes</span></a>: automatically scan for and forbid fertile eggs incubating in a nestbox</p></li>
</ul>
</div>
<div class="section" id="id42">
<h3>New Scripts<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/devel.html#devel-query"><span class="std std-ref">devel/query</span></a>: searches for field names in DF objects</p></li>
<li><p><a class="reference internal" href="_auto/base.html#extinguish"><span class="std std-ref">extinguish</span></a>: puts out fires</p></li>
<li><p><a class="reference internal" href="_auto/base.html#tame"><span class="std std-ref">tame</span></a>: sets tamed/trained status of animals</p></li>
</ul>
</div>
<div class="section" id="id43">
<h3>Fixes<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Lua%20API.html#building-hacks"><span class="std std-ref">building-hacks</span></a>: fixed error when dealing with custom animation tables</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-test-perlin"><span class="std std-ref">devel/test-perlin</span></a>: fixed Lua error (<code class="docutils literal notranslate"><span class="pre">math.pow()</span></code>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: fixed crash when entering finder with a 16x16 embark selected, and added 16 to dimension choices</p></li>
<li><p><a class="reference internal" href="_auto/base.html#embark-skills"><span class="std std-ref">embark-skills</span></a>: fixed missing <code class="docutils literal notranslate"><span class="pre">skill_points_remaining</span></code> field</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>stopped wagon resurrection</p></li>
<li><p>fixed a minor issue with post-resurrection hostility</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/gui.html#gui-companion-order"><span class="std std-ref">gui/companion-order</span></a>:</dt><dd><ul>
<li><p>fixed issues with printing coordinates</p></li>
<li><p>fixed issues with move command</p></li>
<li><p>fixed cheat commands (and removed “Power up”, which was broken)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-gm-editor"><span class="std std-ref">gui/gm-editor</span></a>: fixed reinterpret cast (<code class="docutils literal notranslate"><span class="pre">r</span></code>)</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-pathable"><span class="std std-ref">gui/pathable</span></a>: fixed error when sidebar is hidden with <code class="docutils literal notranslate"><span class="pre">Tab</span></code></p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>:</dt><dd><ul>
<li><p>stopped assigning labors to ineligible dwarves, pets, etc.</p></li>
<li><p>stopped assigning invalid labors</p></li>
<li><p>added support for crafting jobs that use pearl</p></li>
<li><p>fixed issues causing cleaning jobs to not be assigned</p></li>
<li><p>added support for disabling management of specific labors</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#prospector"><span class="std std-ref">prospect</span></a>: (also affected <a class="reference internal" href="Plugins.html#embark-tools"><span class="std std-ref">embark-tools</span></a>) - fixed a crash when prospecting an unusable site (ocean, mountains, etc.) with a large default embark size in d_init.txt (e.g. 16x16)</p></li>
<li><p><a class="reference internal" href="Plugins.html#siege-engine"><span class="std std-ref">siege-engine</span></a>: fixed a few Lua errors (<code class="docutils literal notranslate"><span class="pre">math.pow()</span></code>, <code class="docutils literal notranslate"><span class="pre">unit.relationship_ids</span></code>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a>: fixed <code class="docutils literal notranslate"><span class="pre">hotkey-clear</span></code></p></li>
</ul>
</div>
<div class="section" id="id44">
<h3>Misc Improvements<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#armoks-blessing"><span class="std std-ref">armoks-blessing</span></a>: improved documentation to list all available arguments</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>:</dt><dd><ul>
<li><p>added viewscreen offsets for DT 40.1.2</p></li>
<li><p>added item base flags offset</p></li>
<li><p>added needs offsets</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>added match indicator display on the right (“World”) map</p></li>
<li><p>changed ‘c’ancel to abort find if it’s under way and clear results if not, allowing use of partial surveys.</p></li>
<li><p>added Coal as a search criterion, as well as a coal indication as current embark selection info.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-all</span></code>, <code class="docutils literal notranslate"><span class="pre">-all_civ</span></code> and <code class="docutils literal notranslate"><span class="pre">-all_citizens</span></code> arguments</p></li>
<li><p>added module support</p></li>
<li><p>now removes historical figure death dates and ghost data</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#growcrops"><span class="std std-ref">growcrops</span></a>: added <code class="docutils literal notranslate"><span class="pre">all</span></code> argument to grow all crops</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-load-screen"><span class="std std-ref">gui/load-screen</span></a>: improved documentation</p></li>
<li><p><a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>: now takes nature value into account when assigning jobs</p></li>
<li><p><a class="reference internal" href="_auto/base.html#open-legends"><span class="std std-ref">open-legends</span></a>: added warning about risk of save corruption and improved related documentation</p></li>
<li><p><a class="reference internal" href="_auto/base.html#points"><span class="std std-ref">points</span></a>: added support when in <code class="docutils literal notranslate"><span class="pre">viewscreen_setupdwarfgamest</span></code> and improved error messages</p></li>
<li><p><a class="reference internal" href="_auto/base.html#siren"><span class="std std-ref">siren</span></a>: removed break handling (relevant <code class="docutils literal notranslate"><span class="pre">misc_trait_type</span></code> was no longer used - see “Structures” section)</p></li>
</ul>
</div>
<div class="section" id="id45">
<h3>API<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>New debug features related to <a class="reference internal" href="Plugins.html#debug"><span class="std std-ref">debug</span></a> plugin:</dt><dd><ul>
<li><p>Classes (C++ only): <code class="docutils literal notranslate"><span class="pre">Signal&lt;Signature,</span> <span class="pre">type_tag&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">DebugCategory</span></code>, <code class="docutils literal notranslate"><span class="pre">DebugManager</span></code></p></li>
<li><p>Macros: <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>, <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code>, <code class="docutils literal notranslate"><span class="pre">ERR</span></code>, <code class="docutils literal notranslate"><span class="pre">DBG_DECLARE</span></code>, <code class="docutils literal notranslate"><span class="pre">DBG_EXTERN</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id46">
<h3>Internals<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added a usable unit test framework for basic tests, and a few basic tests</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">CMakeSettings.json</span></code> with intellisense support</p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">plugins/CMakeLists.custom.txt</span></code> to be ignored by git and created (if needed) at build time instead</p></li>
<li><p>Core: various thread safety and memory management improvements</p></li>
<li><p>Fixed CMake build dependencies for generated header files</p></li>
<li><p>Fixed custom <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code> not being passed to plugins</p></li>
<li><p>Linux/macOS: changed recommended build backend from Make to Ninja (Make builds will be significantly slower now)</p></li>
</ul>
</div>
<div class="section" id="id47">
<h3>Lua<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">utils</span></code>: new <code class="docutils literal notranslate"><span class="pre">OrderedTable</span></code> class</p></li>
</ul>
</div>
<div class="section" id="id48">
<h3>Structures<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Win32: added missing vtables for <code class="docutils literal notranslate"><span class="pre">viewscreen_storesst</span></code> and <code class="docutils literal notranslate"><span class="pre">squad_order_rescue_hfst</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activity_event_performancest</span></code>: renamed poem as written_content_id</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">body_part_status</span></code>: identified <code class="docutils literal notranslate"><span class="pre">gelded</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dance_form</span></code>: named musical_form_id and musical_written_content_id</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">incident_sub6_performance.participants</span></code>: named performance_event and role_index</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">incident_sub6_performance</span></code>:</dt><dd><ul>
<li><p>made performance_event an enum</p></li>
<li><p>named poetic_form_id, musical_form_id, and dance_form_id</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">misc_trait_type</span></code>: removed <code class="docutils literal notranslate"><span class="pre">LikesOutdoors</span></code>, <code class="docutils literal notranslate"><span class="pre">Hardened</span></code>, <code class="docutils literal notranslate"><span class="pre">TimeSinceBreak</span></code>, <code class="docutils literal notranslate"><span class="pre">OnBreak</span></code> (all unused by DF)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form_instruments</span></code>: named minimum_required and maximum_permitted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">musical_form</span></code>: named voices field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plant_tree_info</span></code>: identified <code class="docutils literal notranslate"><span class="pre">extent_east</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plant_tree_tile</span></code>: gave connection bits more meaningful names (e.g. <code class="docutils literal notranslate"><span class="pre">connection_east</span></code> instead of <code class="docutils literal notranslate"><span class="pre">thick_branches_1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poetic_form</span></code>: identified many fields and related enum/bitfield types</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup_character_info</span></code>: identified <code class="docutils literal notranslate"><span class="pre">skill_points_remaining</span></code> (for <a class="reference internal" href="_auto/base.html#embark-skills"><span class="std std-ref">embark-skills</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui.main</span></code>: identified <code class="docutils literal notranslate"><span class="pre">fortress_site</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui.squads</span></code>: identified <code class="docutils literal notranslate"><span class="pre">kill_rect_targets_scroll</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui</span></code>: fixed alignment of <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">squads</span></code> (fixes <a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> hotkey-clear and DF-AI)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">unit_action.attack</span></code>:</dt><dd><ul>
<li><p>identified <code class="docutils literal notranslate"><span class="pre">attack_skill</span></code></p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">lightly_tap</span></code> and <code class="docutils literal notranslate"><span class="pre">spar_report</span></code> flags</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_flags3</span></code>: identified <code class="docutils literal notranslate"><span class="pre">marked_for_gelding</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_personality</span></code>: identified <code class="docutils literal notranslate"><span class="pre">stress_drain</span></code>, <code class="docutils literal notranslate"><span class="pre">stress_boost</span></code>, <code class="docutils literal notranslate"><span class="pre">likes_outdoors</span></code>, <code class="docutils literal notranslate"><span class="pre">combat_hardened</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_storage_status</span></code>: newly identified type, stores noble holdings information (used in <code class="docutils literal notranslate"><span class="pre">viewscreen_layer_noblelistst</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_thought_type</span></code>: added new expulsion thoughts from 0.44.12</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_layer_arena_creaturest</span></code>: identified item- and name-related fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_layer_militaryst</span></code>: identified <code class="docutils literal notranslate"><span class="pre">equip.assigned.assigned_items</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_layer_noblelistst</span></code>: identified <code class="docutils literal notranslate"><span class="pre">storage_status</span></code> (see <code class="docutils literal notranslate"><span class="pre">unit_storage_status</span></code> type)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">viewscreen_new_regionst</span></code>:</dt><dd><ul>
<li><p>identified <code class="docutils literal notranslate"><span class="pre">rejection_msg</span></code>, <code class="docutils literal notranslate"><span class="pre">raw_folder</span></code>, <code class="docutils literal notranslate"><span class="pre">load_world_params</span></code></p></li>
<li><p>changed many <code class="docutils literal notranslate"><span class="pre">int8_t</span></code> fields to <code class="docutils literal notranslate"><span class="pre">bool</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_setupadventurest</span></code>: identified some nemesis and personality fields, and <code class="docutils literal notranslate"><span class="pre">page.ChooseHistfig</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_data</span></code>: added <code class="docutils literal notranslate"><span class="pre">mountain_peak_flags</span></code> type, including <code class="docutils literal notranslate"><span class="pre">is_volcano</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_history</span></code>: identified names and/or types of some fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_site</span></code>: identified names and/or types of some fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">written_content</span></code>: named poetic_form</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-12-r1">
<h2><a class="toc-backref" href="#id92">DFHack 0.44.12-r1</a><a class="headerlink" href="#dfhack-0-44-12-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id49">
<h3>Fixes<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed displayed names (from <code class="docutils literal notranslate"><span class="pre">Units::getVisibleName</span></code>) for units with identities</p></li>
<li><p>Fixed potential memory leak in <code class="docutils literal notranslate"><span class="pre">Screen::show()</span></code></p></li>
<li><p>Fixed special characters in <a class="reference internal" href="Plugins.html#command-prompt"><span class="std std-ref">command-prompt</span></a> and other non-console in-game outputs on Linux/macOS (in tools using <code class="docutils literal notranslate"><span class="pre">df2console</span></code>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#command-prompt"><span class="std std-ref">command-prompt</span></a>: added support for commands that require a specific screen to be visible, e.g. <a class="reference internal" href="Plugins.html#spotclean"><span class="std std-ref">spotclean</span></a></p></li>
<li><p><a class="reference internal" href="Core.html#die"><span class="std std-ref">die</span></a>: fixed Windows crash in exit handling</p></li>
<li><p><a class="reference internal" href="Plugins.html#dwarfmonitor"><span class="std std-ref">dwarfmonitor</span></a>, <a class="reference internal" href="Plugins.html#manipulator"><span class="std std-ref">manipulator</span></a>: fixed stress cutoffs</p></li>
<li><p><a class="reference internal" href="_auto/fix.html#fix-dead-units"><span class="std std-ref">fix/dead-units</span></a>: fixed script trying to use missing isDiplomat function</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-workflow"><span class="std std-ref">gui/workflow</span></a>: fixed advanced constraint menu for crafts</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-force"><span class="std std-ref">modtools/force</span></a>: fixed a bug where the help text would always be displayed and nothing useful would happen</p></li>
<li><p><a class="reference internal" href="Plugins.html#ruby"><span class="std std-ref">ruby</span></a>: fixed calling conventions for vmethods that return strings (currently <code class="docutils literal notranslate"><span class="pre">enabler.GetKeyDisplay()</span></code>)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#startdwarf"><span class="std std-ref">startdwarf</span></a>: fixed on 64-bit Linux</p></li>
<li><p><a class="reference internal" href="../plugins/stonesense/docs/Stonesense.html#stonesense"><span class="std std-ref">Stonesense</span></a>: fixed <code class="docutils literal notranslate"><span class="pre">PLANT:DESERT_LIME:LEAF</span></code> typo</p></li>
</ul>
</div>
<div class="section" id="id50">
<h3>Misc Improvements<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Console:</dt><dd><ul>
<li><p>added support for multibyte characters on Linux/macOS</p></li>
<li><p>made the console exit properly when an interactive command is active (<a class="reference internal" href="Plugins.html#liquids"><span class="std std-ref">liquids</span></a>, <a class="reference internal" href="Plugins.html#mode"><span class="std std-ref">mode</span></a>, <a class="reference internal" href="Plugins.html#tiletypes"><span class="std std-ref">tiletypes</span></a>)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Linux: added automatic support for GCC sanitizers in <code class="docutils literal notranslate"><span class="pre">dfhack</span></code> script</p></li>
<li><p>Made the <code class="docutils literal notranslate"><span class="pre">DFHACK_PORT</span></code> environment variable take priority over <code class="docutils literal notranslate"><span class="pre">remote-server.json</span></code></p></li>
<li><p>Reduced time for designation jobs from tools like <a class="reference internal" href="Plugins.html#digv"><span class="std std-ref">dig</span></a> to be assigned workers</p></li>
<li><p><a class="reference internal" href="Core.html#dfhack-run"><span class="std std-ref">dfhack-run</span></a>: added support for port specified in <code class="docutils literal notranslate"><span class="pre">remote-server.json</span></code>, to match DFHack’s behavior</p></li>
<li><p><a class="reference internal" href="_auto/base.html#digfort"><span class="std std-ref">digfort</span></a>: added better map bounds checking</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>Switched to standard scrolling keys, improved spacing slightly</p></li>
<li><p>Introduced scrolling of Finder search criteria, removing requirement for 46 lines to work properly (Help/Info still formatted for 46 lines).</p></li>
<li><p>Added Freezing search criterion, allowing searches for NA/Frozen/At_Least_Partial/Partial/At_Most_Partial/Never Freezing embarks.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#rejuvenate"><span class="std std-ref">rejuvenate</span></a>:</dt><dd><ul>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-all</span></code> argument to apply to all citizens</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-force</span></code> to include units under 20 years old</p></li>
<li><p>Clarified documentation</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#remove-stress"><span class="std std-ref">remove-stress</span></a>:</dt><dd><ul>
<li><p>added support for <code class="docutils literal notranslate"><span class="pre">-all</span></code> as an alternative to the existing <code class="docutils literal notranslate"><span class="pre">all</span></code> argument for consistency</p></li>
<li><p>sped up significantly</p></li>
<li><p>improved output/error messages</p></li>
<li><p>now removes tantrums, depression, and obliviousness</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#ruby"><span class="std std-ref">ruby</span></a>: sped up handling of onupdate events</p></li>
</ul>
</div>
<div class="section" id="id51">
<h3>API<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added C++-style linked list interface for DF linked lists</p></li>
<li><dl class="simple">
<dt>Added to <code class="docutils literal notranslate"><span class="pre">Units</span></code> module:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">getStressCategory(unit)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getStressCategoryRaw(level)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stress_cutoffs</span></code> (Lua: <code class="docutils literal notranslate"><span class="pre">getStressCutoffs()</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Screen::Hide</span></code> to temporarily hide screens, like <a class="reference internal" href="Plugins.html#command-prompt"><span class="std std-ref">command-prompt</span></a></p></li>
<li><p>Exposed <code class="docutils literal notranslate"><span class="pre">Screen::zoom()</span></code> to C++ (was Lua-only)</p></li>
<li><p>New functions: <code class="docutils literal notranslate"><span class="pre">Units::isDiplomat(unit)</span></code></p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Internals<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added documentation for all RPC functions and a build-time check</p></li>
<li><p>Added support for build IDs to development builds</p></li>
<li><p>Changed default build architecture to 64-bit</p></li>
<li><p>jsoncpp: updated to version 1.8.4 and switched to using a git submodule</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">dlsym(3)</span></code> to find vtables from libgraphics.so</p></li>
</ul>
</div>
<div class="section" id="id53">
<h3>Lua<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">printall_recurse</span></code> to print tables and DF references recursively. It can be also used with <code class="docutils literal notranslate"><span class="pre">^</span></code> from the <a class="reference internal" href="_auto/base.html#lua"><span class="std std-ref">lua</span></a> interpreter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gui.widgets</span></code>: <code class="docutils literal notranslate"><span class="pre">List:setChoices</span></code> clones <code class="docutils literal notranslate"><span class="pre">choices</span></code> for internal table changes</p></li>
</ul>
</div>
<div class="section" id="id54">
<h3>Structures<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added support for automatically sizing arrays indexed with an enum</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">start_dwarf_count</span></code> on 64-bit Linux again and fixed scanning script</p></li>
<li><p>Dropped 0.44.10 support</p></li>
<li><p>Dropped 0.44.11 support</p></li>
<li><p>Removed stale generated CSV files and DT layouts from pre-0.43.05</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">announcement_type</span></code>: new in 0.44.11: <code class="docutils literal notranslate"><span class="pre">NEW_HOLDING</span></code>, <code class="docutils literal notranslate"><span class="pre">NEW_MARKET_LINK</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">army_controller</span></code>: added new vector from 0.44.11</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">belief_system</span></code>: new type, few fields identified</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">breath_attack_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">OTHER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">historical_figure_info.relationships.list</span></code>: added <code class="docutils literal notranslate"><span class="pre">unk_3a</span></code>-<code class="docutils literal notranslate"><span class="pre">unk_3c</span></code> fields at end</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_entity_expels_hfst</span></code>: added (new in 0.44.11)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_site_surrenderedst</span></code>: added (new in 0.44.11)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_event_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">SITE_SURRENDERED</span></code>, <code class="docutils literal notranslate"><span class="pre">ENTITY_EXPELS_HF</span></code> (new in 0.44.11)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interface_key</span></code>: added bindings new in 0.44.11</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mental_picture</span></code>: new type, some fields identified</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mission_report</span></code>:</dt><dd><ul>
<li><p>new type (renamed, was <code class="docutils literal notranslate"><span class="pre">mission</span></code> before)</p></li>
<li><p>identified some fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">mission</span></code>: new type (used in <code class="docutils literal notranslate"><span class="pre">viewscreen_civlistst</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">occupation_type</span></code>: new in 0.44.11: <code class="docutils literal notranslate"><span class="pre">MESSENGER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">profession</span></code>: new in 0.44.11: <code class="docutils literal notranslate"><span class="pre">MESSENGER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spoils_report</span></code>: new type, most fields identified</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">syndrome</span></code>: identified a few fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui.squads</span></code>: Added fields new in 0.44.12</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ui_sidebar_menus</span></code>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unit.in_squad</span></code>: renamed to <code class="docutils literal notranslate"><span class="pre">unit.squad_list_opened</span></code>, fixed location</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code>: added <code class="docutils literal notranslate"><span class="pre">expel_error</span></code> and other unknown fields new in 0.44.11</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hospital</span></code>: added, new in 0.44.11</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_speech_tokens</span></code>, <code class="docutils literal notranslate"><span class="pre">unk_17d8</span></code>: moved out of <code class="docutils literal notranslate"><span class="pre">command_line</span></code> to fix layout on x64</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">viewscreen_civlistst</span></code>:</dt><dd><ul>
<li><p>identified new pages</p></li>
<li><p>identified new messenger-related fields</p></li>
<li><p>fixed layout and identified many fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">viewscreen_image_creatorst</span></code>:</dt><dd><ul>
<li><p>fixed layout</p></li>
<li><p>identified many fields</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_locationsst</span></code>: identified <code class="docutils literal notranslate"><span class="pre">edit_input</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_reportlistst</span></code>: added new mission and spoils report-related fields (fixed layout)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.languages</span></code>: identified (minimal information; whole languages stored elsewhere)</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">world.status</span></code>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">mission_reports</span></code>: renamed, was <code class="docutils literal notranslate"><span class="pre">missions</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spoils_reports</span></code>: identified</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.unk_131ec0</span></code>, <code class="docutils literal notranslate"><span class="pre">world.unk_131ef0</span></code>: researched layout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.worldgen_status</span></code>: identified many fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world</span></code>: <code class="docutils literal notranslate"><span class="pre">belief_systems</span></code>: identified</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-10-r2">
<h2><a class="toc-backref" href="#id93">DFHack 0.44.10-r2</a><a class="headerlink" href="#dfhack-0-44-10-r2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id55">
<h3>New Plugins<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Lua%20API.html#cxxrandom"><span class="std std-ref">cxxrandom</span></a>: exposes some features of the C++11 random number library to Lua</p></li>
</ul>
</div>
<div class="section" id="id56">
<h3>New Scripts<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#add-recipe"><span class="std std-ref">add-recipe</span></a>: adds unknown crafting recipes to the player’s civ</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-stamper"><span class="std std-ref">gui/stamper</span></a>: allows manipulation of designations by transforms such as translations, reflections, rotations, and inversion</p></li>
</ul>
</div>
<div class="section" id="id57">
<h3>Fixes<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed many tools incorrectly using the <code class="docutils literal notranslate"><span class="pre">dead</span></code> unit flag (they should generally check <code class="docutils literal notranslate"><span class="pre">flags2.killed</span></code> instead)</p></li>
<li><p>Fixed many tools passing incorrect arguments to printf-style functions, including a few possible crashes (<a class="reference internal" href="Plugins.html#changelayer"><span class="std std-ref">changelayer</span></a>, <a class="reference internal" href="Plugins.html#follow"><span class="std std-ref">follow</span></a>, <a class="reference internal" href="Plugins.html#forceequip"><span class="std std-ref">forceequip</span></a>, <a class="reference internal" href="Plugins.html#generated-creature-renamer"><span class="std std-ref">generated-creature-renamer</span></a>)</p></li>
<li><p>Fixed several bugs in Lua scripts found by static analysis (df-luacheck)</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">-g</span></code> flag (GDB) in Linux <code class="docutils literal notranslate"><span class="pre">dfhack</span></code> script (particularly on x64)</p></li>
<li><p><a class="reference internal" href="Plugins.html#autochop"><span class="std std-ref">autochop</span></a>, <a class="reference internal" href="Plugins.html#autodump"><span class="std std-ref">autodump</span></a>, <a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a>, <a class="reference internal" href="Plugins.html#automelt"><span class="std std-ref">automelt</span></a>, <a class="reference internal" href="Plugins.html#autotrade"><span class="std std-ref">autotrade</span></a>, <a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>, <a class="reference internal" href="Plugins.html#dwarfmonitor"><span class="std std-ref">dwarfmonitor</span></a>, <a class="reference internal" href="Plugins.html#fix-unit-occupancy"><span class="std std-ref">fix-unit-occupancy</span></a>, <a class="reference internal" href="Plugins.html#fortplan"><span class="std std-ref">fortplan</span></a>, <a class="reference internal" href="Plugins.html#stockflow"><span class="std std-ref">stockflow</span></a>: fix issues with periodic tasks not working for some time after save/load cycles</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a>:</dt><dd><ul>
<li><p>stop running repeatedly when paused</p></li>
<li><p>fixed crash when furnaces are linked to same stockpiles as jeweler’s workshops</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a>, <a class="reference internal" href="Plugins.html#fix-unit-occupancy"><span class="std std-ref">fix-unit-occupancy</span></a>: stopped running when a fort isn’t loaded (e.g. while embarking)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#autounsuspend"><span class="std std-ref">autounsuspend</span></a>: now skips planned buildings</p></li>
<li><p><a class="reference internal" href="_auto/base.html#ban-cooking"><span class="std std-ref">ban-cooking</span></a>: fixed errors introduced by kitchen structure changes in 0.44.10-r1</p></li>
<li><p><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>, <a class="reference internal" href="Plugins.html#fortplan"><span class="std std-ref">fortplan</span></a>: stopped running before a world has fully loaded</p></li>
<li><p><a class="reference internal" href="Plugins.html#deramp"><span class="std std-ref">deramp</span></a>: fixed deramp to find designations that already have jobs posted</p></li>
<li><p><a class="reference internal" href="Plugins.html#dig"><span class="std std-ref">dig</span></a>: fixed “Inappropriate dig square” announcements if digging job has been posted</p></li>
<li><p><a class="reference internal" href="_auto/base.html#fixnaked"><span class="std std-ref">fixnaked</span></a>: fixed errors due to emotion changes in 0.44</p></li>
<li><p><a class="reference internal" href="_auto/base.html#remove-stress"><span class="std std-ref">remove-stress</span></a>: fixed an error when running on soul-less units (e.g. with <code class="docutils literal notranslate"><span class="pre">-all</span></code>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#revflood"><span class="std std-ref">reveal</span></a>: stopped revealing tiles adjacent to tiles above open space inappropriately</p></li>
<li><p><a class="reference internal" href="Plugins.html#stockpiles"><span class="std std-ref">stockpiles</span></a>: <code class="docutils literal notranslate"><span class="pre">loadstock</span></code> now sets usable and unusable weapon and armor settings</p></li>
<li><p><a class="reference internal" href="Plugins.html#stocks"><span class="std std-ref">stocks</span></a>: stopped listing carried items under stockpiles where they were picked up from</p></li>
</ul>
</div>
<div class="section" id="id58">
<h3>Misc Improvements<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added script name to messages produced by <code class="docutils literal notranslate"><span class="pre">qerror()</span></code> in Lua scripts</p></li>
<li><p>Fixed an issue in around 30 scripts that could prevent edits to the files (adding valid arguments) from taking effect</p></li>
<li><p>Linux: Added several new options to <code class="docutils literal notranslate"><span class="pre">dfhack</span></code> script: <code class="docutils literal notranslate"><span class="pre">--remotegdb</span></code>, <code class="docutils literal notranslate"><span class="pre">--gdbserver</span></code>, <code class="docutils literal notranslate"><span class="pre">--strace</span></code></p></li>
<li><p><a class="reference internal" href="_auto/base.html#bodyswap"><span class="std std-ref">bodyswap</span></a>: improved error handling</p></li>
<li><p><a class="reference internal" href="Plugins.html#buildingplan"><span class="std std-ref">buildingplan</span></a>: added max quality setting</p></li>
<li><p><a class="reference internal" href="_auto/base.html#caravan"><span class="std std-ref">caravan</span></a>: documented (new in 0.44.10-alpha1)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#deathcause"><span class="std std-ref">deathcause</span></a>: added “slaughtered” to descriptions</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>changed region interaction matching to search for evil rain, syndrome rain, and reanimation rather than interaction presence (misleadingly called evil weather), reanimation, and thralling</p></li>
<li><p>gave syndrome rain and reanimation wider ranges of criterion values</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/fix.html#fix-dead-units"><span class="std std-ref">fix/dead-units</span></a>: added a delay of around 1 month before removing units</p></li>
<li><p><a class="reference internal" href="_auto/fix.html#fix-retrieve-units"><span class="std std-ref">fix/retrieve-units</span></a>: now re-adds units to active list to counteract <a class="reference internal" href="_auto/fix.html#fix-dead-units"><span class="std std-ref">fix/dead-units</span></a></p></li>
<li><p><a class="reference internal" href="_auto/base.html#item-descriptions"><span class="std std-ref">item-descriptions</span></a>: fixed several grammatical errors</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>:</dt><dd><ul>
<li><p>added quantity argument</p></li>
<li><p>now selects a caste at random if none is specified</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#mousequery"><span class="std std-ref">mousequery</span></a>:</dt><dd><ul>
<li><p>migrated several features from TWBT’s fork</p></li>
<li><p>added ability to drag with left/right buttons</p></li>
<li><p>added depth display for TWBT (when multilevel is enabled)</p></li>
<li><p>made shift+click jump to lower levels visible with TWBT</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#title-version"><span class="std std-ref">title-version</span></a>: added version to options screen too</p></li>
</ul>
</div>
<div class="section" id="id59">
<h3>API<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>New functions (also exposed to Lua):</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Units::isKilled()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Units::isActive()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Units::isGhost()</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Removed Vermin module (unused and obsolete)</p></li>
</ul>
</div>
<div class="section" id="id60">
<h3>Internals<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added build option to generate symbols for large generated files containing df-structures metadata</p></li>
<li><p>Added fallback for YouCompleteMe database lookup failures (e.g. for newly-created files)</p></li>
<li><p>Improved efficiency and error handling in <code class="docutils literal notranslate"><span class="pre">stl_vsprintf</span></code> and related functions</p></li>
<li><p>jsoncpp: fixed constructor with <code class="docutils literal notranslate"><span class="pre">long</span></code> on Linux</p></li>
</ul>
</div>
<div class="section" id="id61">
<h3>Lua<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">profiler</span></code> module to measure lua performance</p></li>
<li><p>Enabled shift+cursor movement in WorkshopOverlay-derived screens</p></li>
</ul>
</div>
<div class="section" id="id62">
<h3>Structures<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">incident_sub6_performance</span></code>: identified some fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item_body_component</span></code>: fixed location of <code class="docutils literal notranslate"><span class="pre">corpse_flags</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">job_handler</span></code>: fixed static array layout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">job_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">is_designation</span></code> attribute</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_flags1</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">dead</span></code> to <code class="docutils literal notranslate"><span class="pre">inactive</span></code> to better reflect its use</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_personality</span></code>: fixed location of <code class="docutils literal notranslate"><span class="pre">current_focus</span></code> and <code class="docutils literal notranslate"><span class="pre">undistracted_focus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_thought_type</span></code>: added <code class="docutils literal notranslate"><span class="pre">SawDeadBody</span></code> (new in 0.44.10)</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-10-r1">
<h2><a class="toc-backref" href="#id94">DFHack 0.44.10-r1</a><a class="headerlink" href="#dfhack-0-44-10-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id63">
<h3>New Scripts<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#bodyswap"><span class="std std-ref">bodyswap</span></a>: shifts player control over to another unit in adventure mode</p></li>
<li><p><a class="reference internal" href="_auto/base.html#caravan"><span class="std std-ref">caravan</span></a>: adjusts properties of caravans</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-find-primitive"><span class="std std-ref">devel/find-primitive</span></a>: finds a primitive variable in memory</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-autogems"><span class="std std-ref">gui/autogems</span></a>: a configuration UI for the <a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a> plugin</p></li>
</ul>
</div>
<div class="section" id="id64">
<h3>New Tweaks<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> kitchen-prefs-all: adds an option to toggle cook/brew for all visible items in kitchen preferences</p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> stone-status-all: adds an option to toggle the economic status of all stones</p></li>
</ul>
</div>
<div class="section" id="id65">
<h3>Fixes<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed uninitialized pointer being returned from <code class="docutils literal notranslate"><span class="pre">Gui::getAnyUnit()</span></code> in rare cases</p></li>
<li><p>Lua: registered <code class="docutils literal notranslate"><span class="pre">dfhack.constructions.designateRemove()</span></code> correctly</p></li>
<li><p>Units::getAnyUnit(): fixed a couple problematic conditions and potential segfaults if global addresses are missing</p></li>
<li><p><a class="reference internal" href="Plugins.html#autohauler"><span class="std std-ref">autohauler</span></a>, <a class="reference internal" href="Plugins.html#autolabor"><span class="std std-ref">autolabor</span></a>, <a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>: fixed fencepost error and potential crash</p></li>
<li><p><a class="reference internal" href="Plugins.html#dwarfvet"><span class="std std-ref">dwarfvet</span></a>: fixed infinite loop if an animal is not accepted at a hospital</p></li>
<li><p><a class="reference internal" href="_auto/base.html#exterminate"><span class="std std-ref">exterminate</span></a>: fixed documentation of <code class="docutils literal notranslate"><span class="pre">this</span></code> option</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>units no longer have a tendency to melt after being healed</p></li>
<li><p>healed units are no longer treated as patients by hospital staff</p></li>
<li><p>healed units no longer attempt to clean themselves unsuccessfully</p></li>
<li><p>wounded fliers now regain the ability to fly upon being healing</p></li>
<li><p>now heals suffocation, numbness, infection, spilled guts and gelding</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#liquids"><span class="std std-ref">liquids</span></a>: fixed “range” command to default to 1 for dimensions consistently</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>:</dt><dd><ul>
<li><p>creatures of the appropriate age are now spawned as babies or children where applicable</p></li>
<li><p>fix: civ_id is now properly assigned to historical_figure, resolving several hostility issues (spawned pets are no longer attacked by fortress military!)</p></li>
<li><p>fix: unnamed creatures are no longer spawned with a string of numbers as a first name</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#prospector"><span class="std std-ref">prospect</span></a>: fixed crash due to invalid vein materials</p></li>
<li><p><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>: fixed 4/6 keys in unit screen search</p></li>
<li><p><a class="reference internal" href="Plugins.html#stockpiles"><span class="std std-ref">stockpiles</span></a>: stopped sidebar option from overlapping with <a class="reference internal" href="Plugins.html#autodump"><span class="std std-ref">autodump</span></a></p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> block-labors: fixed two causes of crashes related in the v-p-l menu</p></li>
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a> max-wheelbarrow: fixed conflict with building renaming</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#view-item-info"><span class="std std-ref">view-item-info</span></a>:</dt><dd><ul>
<li><p>stopped appending extra newlines permanently to descriptions</p></li>
<li><p>fixed an error with some armor</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id66">
<h3>Misc Improvements<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added logo to documentation</p></li>
<li><p>Documented several missing <code class="docutils literal notranslate"><span class="pre">dfhack.gui</span></code> Lua functions</p></li>
<li><p><a class="reference internal" href="_auto/base.html#adv-rumors"><span class="std std-ref">adv-rumors</span></a>: bound to Ctrl-A</p></li>
<li><p><a class="reference internal" href="Plugins.html#autogems"><span class="std std-ref">autogems</span></a>: can now blacklist arbitrary gem types (see <a class="reference internal" href="_auto/gui.html#gui-autogems"><span class="std std-ref">gui/autogems</span></a>)</p></li>
<li><p><a class="reference internal" href="Plugins.html#blueprint"><span class="std std-ref">blueprint</span></a>: added a basic Lua API</p></li>
<li><p><a class="reference internal" href="Plugins.html#command-prompt"><span class="std std-ref">command-prompt</span></a>: added support for <code class="docutils literal notranslate"><span class="pre">Gui::getSelectedPlant()</span></code></p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: added tool offsets for DT 40</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-save-version"><span class="std std-ref">devel/save-version</span></a>: added current DF version to output</p></li>
<li><p><a class="reference internal" href="_auto/base.html#exterminate"><span class="std std-ref">exterminate</span></a>: added more words for current unit, removed warning</p></li>
<li><p><a class="reference internal" href="Core.html#fpause"><span class="std std-ref">fpause</span></a>: now pauses worldgen as well</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-advfort"><span class="std std-ref">gui/advfort</span></a>: bound to Ctrl-T</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-room-list"><span class="std std-ref">gui/room-list</span></a>: added support for <code class="docutils literal notranslate"><span class="pre">Gui::getSelectedBuilding()</span></code></p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-unit-info-viewer"><span class="std std-ref">gui/unit-info-viewer</span></a>: bound to Alt-I</p></li>
<li><p><a class="reference internal" href="_auto/base.html#install-info"><span class="std std-ref">install-info</span></a>: added information on tweaks</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>: made functions available to other scripts</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#search-plugin"><span class="std std-ref">search</span></a>:</dt><dd><ul>
<li><p>added support for stone restrictions screen (under <code class="docutils literal notranslate"><span class="pre">z</span></code>: Status)</p></li>
<li><p>added support for kitchen preferences (also under <code class="docutils literal notranslate"><span class="pre">z</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id67">
<h3>API<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>New functions (all available to Lua as well):</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Buildings::getRoomDescription()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Items::checkMandates()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Items::canTrade()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Items::canTradeWithContents()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Items::isRouteVehicle()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Items::isSquadEquipment()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Kitchen::addExclusion()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Kitchen::findExclusion()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Kitchen::removeExclusion()</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>syndrome-util: added <code class="docutils literal notranslate"><span class="pre">eraseSyndromeData()</span></code></p></li>
</ul>
</div>
<div class="section" id="id68">
<h3>Internals<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added function names to DFHack’s NullPointer and InvalidArgument exceptions</p></li>
<li><p>Added some build scripts for Sublime Text</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Gui::inRenameBuilding()</span></code></p></li>
<li><p>Changed submodule URLs to relative URLs so that they can be cloned consistently over different protocols (e.g. SSH)</p></li>
<li><p>Fixed compiler warnings on all supported build configurations</p></li>
<li><p>Linux: required plugins to have symbols resolved at link time, for consistency with other platforms</p></li>
<li><p>Windows build scripts now work with non-C system drives</p></li>
</ul>
</div>
<div class="section" id="id69">
<h3>Structures<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dfhack_room_quality_level</span></code>: new enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glowing_barrier</span></code>: identified <code class="docutils literal notranslate"><span class="pre">triggered</span></code>, added comments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item_flags2</span></code>: renamed <code class="docutils literal notranslate"><span class="pre">has_written_content</span></code> to <code class="docutils literal notranslate"><span class="pre">unk_book</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kitchen_exc_type</span></code>: new enum (for <code class="docutils literal notranslate"><span class="pre">ui.kitchen</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mandate.mode</span></code>: now an enum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_personality.emotions.flags.memory</span></code>: identified</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_kitchenprefst.forbidden</span></code>, <code class="docutils literal notranslate"><span class="pre">possible</span></code>: now a bitfield, <code class="docutils literal notranslate"><span class="pre">kitchen_pref_flag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world_data.feature_map</span></code>: added extensive documentation (in XML)</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-09-r1">
<h2><a class="toc-backref" href="#id95">DFHack 0.44.09-r1</a><a class="headerlink" href="#dfhack-0-44-09-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id70">
<h3>Fixes<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed some CMake warnings (CMP0022)</p></li>
<li><p>Support for building on Ubuntu 18.04</p></li>
<li><p><a class="reference internal" href="Plugins.html#digtype"><span class="std std-ref">digtype</span></a>: stopped designating non-vein tiles (open space, trees, etc.)</p></li>
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: fixed detection of reanimating biomes</p></li>
<li><p><a class="reference internal" href="_auto/fix.html#fix-dead-units"><span class="std std-ref">fix/dead-units</span></a>: fixed a bug that could remove some arriving (not dead) units</p></li>
<li><p><a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>: fixed crash due to dig jobs targeting some unrevealed map blocks</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-item-trigger"><span class="std std-ref">modtools/item-trigger</span></a>: fixed token format in help text</p></li>
</ul>
</div>
<div class="section" id="id71">
<h3>Misc Improvements<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Reorganized changelogs and improved changelog editing process</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>:</dt><dd><ul>
<li><p>Added search for adamantine</p></li>
<li><p>Now supports saving/loading profiles</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#fillneeds"><span class="std std-ref">fillneeds</span></a>: added <code class="docutils literal notranslate"><span class="pre">-all</span></code> option to apply to all units</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-item-trigger"><span class="std std-ref">modtools/item-trigger</span></a>:</dt><dd><ul>
<li><p>added support for multiple type/material/contaminant conditions</p></li>
<li><p>added the ability to specify inventory mode(s) to trigger on</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>: added flows, instruments, tool names, campfires, ocean waves, spiderwebs</p></li>
</ul>
</div>
<div class="section" id="id72">
<h3>Internals<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>OS X: Can now build with GCC 7 (or older)</p></li>
</ul>
</div>
<div class="section" id="id73">
<h3>Structures<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Several new names in instrument raw structures</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">army</span></code>: added vector new in 0.44.07</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">building_type</span></code>: added human-readable <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">furnace_type</span></code>: added human-readable <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code>: identified <code class="docutils literal notranslate"><span class="pre">profession</span></code>, <code class="docutils literal notranslate"><span class="pre">civ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manager_order_template</span></code>: fixed last field type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">site_reputation_report</span></code>: named <code class="docutils literal notranslate"><span class="pre">reports</span></code> vector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_createquotast</span></code>: fixed layout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workshop_type</span></code>: added human-readable <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.language</span></code>: moved <code class="docutils literal notranslate"><span class="pre">colors</span></code>, <code class="docutils literal notranslate"><span class="pre">shapes</span></code>, <code class="docutils literal notranslate"><span class="pre">patterns</span></code> to <code class="docutils literal notranslate"><span class="pre">world.descriptors</span></code></p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">world.reactions</span></code>, <code class="docutils literal notranslate"><span class="pre">world.reaction_categories</span></code>: moved to new compound, <code class="docutils literal notranslate"><span class="pre">world.reactions</span></code>. Requires renaming:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">world.reactions</span></code> to <code class="docutils literal notranslate"><span class="pre">world.reactions.reactions</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.reaction_categories</span></code> to <code class="docutils literal notranslate"><span class="pre">world.reactions.reaction_categories</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-05-r2">
<h2><a class="toc-backref" href="#id96">DFHack 0.44.05-r2</a><a class="headerlink" href="#dfhack-0-44-05-r2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id74">
<h3>New Plugins<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#embark-assistant"><span class="std std-ref">embark-assistant</span></a>: adds more information and features to embark screen</p></li>
</ul>
</div>
<div class="section" id="id75">
<h3>New Scripts<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#adv-fix-sleepers"><span class="std std-ref">adv-fix-sleepers</span></a>: fixes units in adventure mode who refuse to wake up (<a class="reference external" href="https://www.bay12games.com/dwarves/mantisbt/view.php?id=6798">Bug 6798</a>)</p></li>
<li><p><a class="reference internal" href="_auto/base.html#hermit"><span class="std std-ref">hermit</span></a>: blocks caravans, migrants, diplomats (for hermit challenge)</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>With <code class="docutils literal notranslate"><span class="pre">PRINT_MODE:TEXT</span></code>, setting the <code class="docutils literal notranslate"><span class="pre">DFHACK_HEADLESS</span></code> environment variable will hide DF’s display and allow the console to be used normally. (Note that this is intended for testing and is not very useful for actual gameplay.)</p></li>
</ul>
</div>
<div class="section" id="id76">
<h3>Fixes<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: fix language_name offsets for DT 39.2+</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-inject-raws"><span class="std std-ref">devel/inject-raws</span></a>: fixed gloves and shoes (old typo causing errors)</p></li>
<li><p><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>: fixed an issue with not all engravings being included</p></li>
<li><p><a class="reference internal" href="_auto/base.html#view-item-info"><span class="std std-ref">view-item-info</span></a>: fixed an error with some shields</p></li>
</ul>
</div>
<div class="section" id="id77">
<h3>Misc Improvements<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#adv-rumors"><span class="std std-ref">adv-rumors</span></a>: added more keywords, including names</p></li>
<li><p><a class="reference internal" href="Plugins.html#autochop"><span class="std std-ref">autochop</span></a>: can now exclude trees that produce fruit, food, or cookable items</p></li>
<li><p><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>: added plant type support</p></li>
</ul>
</div>
</div>
<div class="section" id="dfhack-0-44-05-r1">
<h2><a class="toc-backref" href="#id97">DFHack 0.44.05-r1</a><a class="headerlink" href="#dfhack-0-44-05-r1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id78">
<h3>New Scripts<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="_auto/base.html#break-dance"><span class="std std-ref">break-dance</span></a>: Breaks up a stuck dance activity</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-check-other-ids"><span class="std std-ref">devel/check-other-ids</span></a>: Checks the validity of “other” vectors in the <code class="docutils literal notranslate"><span class="pre">world</span></code> global</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-dump-offsets"><span class="std std-ref">devel/dump-offsets</span></a>: prints an XML version of the global table included in in DF</p></li>
<li><p><a class="reference internal" href="_auto/base.html#fillneeds"><span class="std std-ref">fillneeds</span></a>: Use with a unit selected to make them focused and unstressed</p></li>
<li><p><a class="reference internal" href="_auto/base.html#firestarter"><span class="std std-ref">firestarter</span></a>: Lights things on fire: items, locations, entire inventories even!</p></li>
<li><p><a class="reference internal" href="_auto/base.html#flashstep"><span class="std std-ref">flashstep</span></a>: Teleports adventurer to cursor</p></li>
<li><p><a class="reference internal" href="_auto/base.html#ghostly"><span class="std std-ref">ghostly</span></a>: Turns an adventurer into a ghost or back</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-cp437-table"><span class="std std-ref">gui/cp437-table</span></a>: An in-game CP437 table</p></li>
<li><p><a class="reference internal" href="_auto/base.html#questport"><span class="std std-ref">questport</span></a>: Sends your adventurer to the location of your quest log cursor</p></li>
<li><p><a class="reference internal" href="_auto/base.html#view-unit-reports"><span class="std std-ref">view-unit-reports</span></a>: opens the reports screen with combat reports for the selected unit</p></li>
</ul>
</div>
<div class="section" id="id79">
<h3>Fixes<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a crash that could occur if a symbol table in symbols.xml had no content</p></li>
<li><p>Fixed issues with the console output color affecting the prompt on Windows</p></li>
<li><p><a class="reference internal" href="Plugins.html#autolabor"><span class="std std-ref">autolabor</span></a>, <a class="reference internal" href="Plugins.html#autohauler"><span class="std std-ref">autohauler</span></a>, <a class="reference internal" href="Plugins.html#labormanager"><span class="std std-ref">labormanager</span></a>: added support for “put item on display” jobs and building/destroying display furniture</p></li>
<li><p><a class="reference internal" href="Plugins.html#createitem"><span class="std std-ref">createitem</span></a>: stopped items from teleporting away in some forts</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/devel.html#devel-inject-raws"><span class="std std-ref">devel/inject-raws</span></a>:</dt><dd><ul>
<li><p>now recognizes spaces in reaction names</p></li>
<li><p>now recognizes spaces in reaction names</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="Plugins.html#dig"><span class="std std-ref">dig</span></a>: added support for designation priorities - fixes issues with designations from <code class="docutils literal notranslate"><span class="pre">digv</span></code> and related commands having extremely high priority</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#dwarfmonitor"><span class="std std-ref">dwarfmonitor</span></a>:</dt><dd><ul>
<li><p>fixed display of creatures and poetic/music/dance forms on <code class="docutils literal notranslate"><span class="pre">prefs</span></code> screen</p></li>
<li><p>added “view unit” option</p></li>
<li><p>now exposes the selected unit to other tools</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>: fixed an error that could occur when exporting empty lists</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-gm-editor"><span class="std std-ref">gui/gm-editor</span></a>: fixed an error when editing primitives in Lua tables</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-gm-unit"><span class="std std-ref">gui/gm-unit</span></a>: can now edit mining skill</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-quickcmd"><span class="std std-ref">gui/quickcmd</span></a>: stopped error from adding too many commands</p></li>
<li><p><a class="reference internal" href="_auto/modtools.html#modtools-create-unit"><span class="std std-ref">modtools/create-unit</span></a>: fixed error when domesticating units</p></li>
<li><p><a class="reference internal" href="_auto/base.html#names"><span class="std std-ref">names</span></a>: fixed many errors</p></li>
<li><p><a class="reference internal" href="_auto/base.html#quicksave"><span class="std std-ref">quicksave</span></a>: fixed an issue where the “Saving…” indicator often wouldn’t appear</p></li>
</ul>
</div>
<div class="section" id="id80">
<h3>Misc Improvements<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The console now provides suggestions for built-in commands</p></li>
<li><p><a class="reference internal" href="_auto/base.html#binpatch"><span class="std std-ref">binpatch</span></a>: now reports errors for empty patch files</p></li>
<li><p><a class="reference internal" href="_auto/devel.html#devel-export-dt-ini"><span class="std std-ref">devel/export-dt-ini</span></a>: avoid hardcoding flags</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#exportlegends"><span class="std std-ref">exportlegends</span></a>:</dt><dd><ul>
<li><p>reordered some tags to match DF’s order</p></li>
<li><p>added progress indicators for exporting long lists</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#force"><span class="std std-ref">force</span></a>: now provides useful help</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/base.html#full-heal"><span class="std std-ref">full-heal</span></a>:</dt><dd><ul>
<li><p>can now select corpses to resurrect</p></li>
<li><p>now resets body part temperatures upon resurrection to prevent creatures from freezing/melting again</p></li>
<li><p>now resets units’ vanish countdown to reverse effects of <a class="reference internal" href="_auto/base.html#exterminate"><span class="std std-ref">exterminate</span></a></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-gm-editor"><span class="std std-ref">gui/gm-editor</span></a>: added enum names to enum edit dialogs</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/gui.html#gui-gm-unit"><span class="std std-ref">gui/gm-unit</span></a>:</dt><dd><ul>
<li><p>added a profession editor</p></li>
<li><p>misc. layout improvements</p></li>
<li><p>made skill search case-insensitive</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-liquids"><span class="std std-ref">gui/liquids</span></a>: added more keybindings: 0-7 to change liquid level, P/B to cycle backwards</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-pathable"><span class="std std-ref">gui/pathable</span></a>: added tile types to sidebar</p></li>
<li><p><a class="reference internal" href="_auto/gui.html#gui-rename"><span class="std std-ref">gui/rename</span></a>: added “clear” and “special characters” options</p></li>
<li><p><a class="reference internal" href="_auto/base.html#launch"><span class="std std-ref">launch</span></a>: can now ride creatures</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="_auto/modtools.html#modtools-skill-change"><span class="std std-ref">modtools/skill-change</span></a>:</dt><dd><ul>
<li><p>now updates skill levels appropriately</p></li>
<li><p>only prints output if <code class="docutils literal notranslate"><span class="pre">-loud</span></code> is passed</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="_auto/base.html#names"><span class="std std-ref">names</span></a>: can now edit names of units</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Plugins.html#remotefortressreader"><span class="std std-ref">remotefortressreader</span></a>:</dt><dd><ul>
<li><p>support for moving adventurers</p></li>
<li><p>support for vehicles, gem shapes, item volume, art images, item improvements</p></li>
<li><p>includes item stack sizes</p></li>
<li><p>some performance improvements</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="removed">
<h3>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Plugins.html#tweak"><span class="std std-ref">tweak</span></a>: <code class="docutils literal notranslate"><span class="pre">kitchen-keys</span></code>: <a class="reference external" href="https://www.bay12games.com/dwarves/mantisbt/view.php?id=614">Bug 614</a> fixed in DF 0.44.04</p></li>
<li><p><a class="reference internal" href="Removed.html#warn-stuck-trees"><span class="std std-ref">warn-stuck-trees</span></a>: <a class="reference external" href="https://www.bay12games.com/dwarves/mantisbt/view.php?id=9252">Bug 9252</a> fixed in DF 0.44.01</p></li>
</ul>
</div>
<div class="section" id="id81">
<h3>Internals<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Gui::getAnyUnit()</span></code> supports many more screens/menus</p></li>
</ul>
</div>
<div class="section" id="id82">
<h3>Lua<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">dfhack.console</span></code> API</p></li>
<li><p>API can now wrap functions with 12 or 13 parameters</p></li>
<li><p>Exposed <code class="docutils literal notranslate"><span class="pre">get_vector()</span></code> (from C++) for all types that support <code class="docutils literal notranslate"><span class="pre">find()</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">df.unit.get_vector()</span> <span class="pre">==</span> <span class="pre">df.global.world.units.all</span></code></p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">json</span></code> I/O error messages</p></li>
<li><p>Stopped a crash when trying to create instances of classes whose vtable addresses are not available</p></li>
</ul>
</div>
<div class="section" id="id83">
<h3>Structures<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">buildings_other_id.DISPLAY_CASE</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">job_type.PutItemOnDisplay</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">twbt_render_map</span></code> code offset on x64</p></li>
<li><p>Fixed an issue preventing <code class="docutils literal notranslate"><span class="pre">enabler</span></code> from being allocated by DFHack</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">unit</span></code> alignment</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">viewscreen_titlest.start_savegames</span></code> alignment</p></li>
<li><p>Found <code class="docutils literal notranslate"><span class="pre">renderer</span></code> vtable on osx64</p></li>
<li><p>Identified <code class="docutils literal notranslate"><span class="pre">historical_entity.unknown1b.deities</span></code> (deity IDs)</p></li>
<li><p>Located <code class="docutils literal notranslate"><span class="pre">start_dwarf_count</span></code> offset for all builds except 64-bit Linux; <a class="reference internal" href="_auto/base.html#startdwarf"><span class="std std-ref">startdwarf</span></a> should work now</p></li>
<li><dl class="simple">
<dt>New globals:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">soul_next_id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_load_version</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">movie_version</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">basic_seed</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title_spaced</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ui_building_resize_radius</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>The former <code class="docutils literal notranslate"><span class="pre">announcements</span></code> global is now a field in <code class="docutils literal notranslate"><span class="pre">d_init</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ui_menu_width</span></code> global is now a 2-byte array; the second item is the former <code class="docutils literal notranslate"><span class="pre">ui_area_map_width</span></code> global, which is now removed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">adventure_movement_optionst</span></code>, <code class="docutils literal notranslate"><span class="pre">adventure_movement_hold_tilest</span></code>, <code class="docutils literal notranslate"><span class="pre">adventure_movement_climbst</span></code>: named coordinate fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">artifact_record</span></code>: fixed layout (changed in 0.44.04)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">incident</span></code>: fixed layout (changed in 0.44.01) - note that many fields have moved</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mission</span></code>: added type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code>: added 3 new vmethods: <code class="docutils literal notranslate"><span class="pre">getCreatureTile</span></code>, <code class="docutils literal notranslate"><span class="pre">getCorpseTile</span></code>, <code class="docutils literal notranslate"><span class="pre">getGlowTile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_assign_display_itemst</span></code>: fixed layout on x64 and identified many fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">viewscreen_reportlistst</span></code>: fixed layout, added <code class="docutils literal notranslate"><span class="pre">mission_id</span></code> vector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world.status</span></code>: named <code class="docutils literal notranslate"><span class="pre">missions</span></code> vector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world</span></code> fields formerly beginning with <code class="docutils literal notranslate"><span class="pre">job_</span></code> are now fields of <code class="docutils literal notranslate"><span class="pre">world.jobs</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">world.job_list</span></code> is now <code class="docutils literal notranslate"><span class="pre">world.jobs.list</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="older-changelogs">
<h2><a class="toc-backref" href="#id98">Older Changelogs</a><a class="headerlink" href="#older-changelogs" title="Permalink to this headline">¶</a></h2>
<p>Are kept in a seperate file:  <a class="reference internal" href="History.html#history"><span class="std std-ref">Historical changelogs</span></a></p>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2015-2021, The DFHack Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/docs/NEWS.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>